{"config":{"lang":["ja"],"separator":"[\\s\\-\uff0c\u3002]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"Hi gays, Welcome to my Zone!","text":"<p>\u2014\u2014 \u6c38\u8fdc\u6d3b\u5728\u70ed\u7231\u91cc\uff01</p> <p>\u8fd9\u91cc\u8bb0\u5f55\u6211\u7684\u4e00\u4e9b\u5b66\u4e60\u7b14\u8bb0\uff0c\u4e5f\u8bb0\u5f55\u6210\u957f\uff01</p> <p></p>"},{"location":"blogs/post/%E4%B8%BB%E9%A1%B5%E7%AE%80%E4%BB%8B/","title":"Hi gays, Welcome to my Zone!","text":"<p>\u2014\u2014 \u6c38\u8fdc\u6d3b\u5728\u70ed\u7231\u91cc\uff01</p> <p>\u8fd9\u91cc\u8bb0\u5f55\u6211\u7684\u4e00\u4e9b\u5b66\u4e60\u7b14\u8bb0\uff0c\u4e5f\u8bb0\u5f55\u6210\u957f\uff01</p> <p></p>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%B8%80%E3%80%81%E9%A1%B9%E7%9B%AE%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/","title":"\u7b2c\u4e00\u7ae0 \u9879\u76ee\u57fa\u672c\u8bbe\u7f6e","text":""},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%B8%80%E3%80%81%E9%A1%B9%E7%9B%AE%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/#_1","title":"\u4e00\u3001\u73af\u5883\u914d\u7f6e","text":""},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%B8%80%E3%80%81%E9%A1%B9%E7%9B%AE%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/#1-ubuntu-2004lts","title":"1. \u79df\u597d\u4e91\u670d\u52a1\u5668\uff0c\u6ce8\u610f Ubuntu \u7248\u672c\uff1a20.04LTS","text":""},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%B8%80%E3%80%81%E9%A1%B9%E7%9B%AE%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/#2-acs-sudo","title":"2. \u521b\u5efa\u65b0\u7684\u5de5\u4f5c\u7528\u6237 acs \u5e76\u8d4b\u4e88 sudo \u6743\u9650","text":"<pre><code>adduser acs  # \u521b\u5efa\u7528\u6237 acs\nusermod -aG sudo acs  # \u7ed9\u7528\u6237 acs \u5206\u914d sudo \u6743\u9650\n</code></pre>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%B8%80%E3%80%81%E9%A1%B9%E7%9B%AE%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/#3-ssh","title":"3. \u914d\u7f6e SSH \u514d\u5bc6\u767b\u5f55","text":"<pre><code>vim ~/.ssh/config\nssh-keygen\nssh-copy-id 'yourServerName'\n</code></pre> <p>\u5728\u6587\u4ef6 <code>.ssh/config</code> \u4e2d\u914d\u7f6e\u5982\u4e0b\uff1a</p> <pre><code>Host 'yourServerName':\n    HostName '\u516c\u7f51 IP \u5730\u5740'\nUser '\u767b\u5f55\u540d\uff0c\u8fd9\u91cc\u8bbe\u7f6e\u7684\u662f acs'\n</code></pre>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%B8%80%E3%80%81%E9%A1%B9%E7%9B%AE%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/#4-git","title":"4. \u914d\u7f6e git","text":"<pre><code>git config --global user.name '\u7528\u6237\u540d'\ngit config --global user.email '\u90ae\u7bb1'\n</code></pre>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%B8%80%E3%80%81%E9%A1%B9%E7%9B%AE%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/#5-vim-tmux","title":"5. \u914d\u7f6e vim \u548c tmux","text":"<p>\u8fd9\u91cc\u76f4\u63a5\u5c06 <code>ACTerminal</code> \u4e2d\u6839\u76ee\u5f55\u4e0b\u7684 <code>.vimrc</code>  \u548c <code>tmux.conf</code> \u76f4\u63a5\u590d\u5236\u5230\u670d\u52a1\u5668\u7528\u6237 <code>acs</code> \u7684\u6839\u76ee\u5f55\u4e0b\u5373\u53ef\u3002</p>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%B8%80%E3%80%81%E9%A1%B9%E7%9B%AE%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/#6-docker","title":"6. docker \u7684\u5b89\u88c5\u4e0e\u73af\u5883\u914d\u7f6e","text":"<p>\u5b89\u88c5 <code>docker</code> \u524d\u5148\u6267\u884c\uff1a</p> <pre><code>apt update\n</code></pre> <p>\u7136\u540e\u6839\u636e \u5b98\u65b9    \u6863 \u4e2d <code>Installation using the repository</code> \u4e2d\u6b65\u9aa4\u4e00\u6b65\u4e00\u6b65\u6267\u884c\u5373\u53ef\u3002</p> <p><code>docker</code> \u5b89\u88c5\u5b8c\u6bd5\u4e4b\u540e\u53ef\u4ee5\u4f7f\u7528\u6307\u4ee4 <code>docker -v</code> \u6765\u5224\u65ad\u662f\u5426\u6b63\u786e\u5b89\u88c5\u3002</p> <p>\u4e3a\u4e86\u907f\u514d\u6bcf\u4e00\u6b21\u4f7f\u7528 <code>docker</code> \u547d\u4ee4\u90fd\u9700\u8981\u52a0\u4e0a <code>sudo</code> \u6743\u9650\uff0c\u53ef\u4ee5\u5c06\u5f53\u524d\u7528\u6237\u52a0\u5165\u5b89\u88c5\u4e2d\u81ea\u52a8\u521b\u5efa\u7684\u7528\u6237\u7ec4\uff1a</p> <pre><code>sudo usermod -aG docker $USER\n</code></pre> <p>\u4e0a\u9762\u547d\u4ee4\u6267\u884c\u5b8c\u540e\uff0c\u9700\u8981\u9000\u51fa\u670d\u52a1\u5668\u91cd\u65b0\u767b\u9646</p> <p>\u7136\u540e\u901a\u8fc7 <code>AcTerminal</code> \u5c06 <code>AcTerminal</code> \u4e2d <code>/var/lib/acwing/docker/images</code> \u4e0b\u7684 <code>django_lesson_1_0.tar</code> \u955c\u50cf\u4e0a\u4f20\u5230\u4e91\u670d\u52a1\u5668\u4e2d\uff1a</p> <pre><code>scp /var/lib/acwing/docker/images/django_lesson_1_0.tar 'yourHostName':./\n</code></pre> <p>\u914d\u7f6e\u8fc7\u7a0b\uff1a</p> <pre><code># \u9996\u5148\u8fdb\u5165\u81ea\u5df1\u7684\u670d\u52a1\u5668\n# \u52a0\u8f7d\u955c\u50cf\u5230\u672c\u5730\u670d\u52a1\u5668\ndocker load -i django_lesson_1_0.tar # \u67e5\u770b\u521a\u624d\u52a0\u8f7d\u7684\u955c\u50cf\ndocker images # \u4f7f\u7528\u955c\u50cf\u521b\u5efa\u5bb9\u5668\u5e76\u542f\u52a8\n# -p \u8bbe\u7f6e\u7aef\u53e3\u6620\u5c04\uff1a20000\u662f\u7528\u4e8essh\u767b\u5f55docker\uff0c8000\u662f\u7528\u4e8e\u8c03\u8bd5\uff0c\u8fd9\u4e24\u4e2a\u7aef\u53e3\u9700\u8981\u5728\u670d\u52a1\u5668\u540e\u53f0\u5b89\u5168\u7ec4\u4e2d\u6253\u5f00\n# --name\uff1a\u8bbe\u7f6e\u5bb9\u5668\u540d\u79f0\n# -itd\uff1a\u6307\u660e\u8981\u4f7f\u7528\u7684 \u955c\u50cf\u540d\u79f0:\u7248\u672c\u53f7\ndocker run -p 20000:22 -p 8000:8000 --name django_server -itd django_lesson:1.0 # \u8fdb\u5165\u5bb9\u5668\ndocker attach django_server\n\n# \u5728\u5bb9\u5668\u91cc\u9762\u521b\u5efa\u65b0\u7528\u6237\u5e76\u8d4b\u4e88sudo\u6743\u9650\nadduser acs usermod -aG sudo acs  # \u6302\u8d77\u5bb9\u5668\u91cd\u65b0\u8fdb\u5165\uff0c\u5148\u6309 ctrl+p \u518d\u6309 ctrl+q\uff0c\u7136\u540e\u9000\u51fa\u670d\u52a1\u5668 ctrl+d\n# \uff01\uff01\uff01\u5982\u679c\u76f4\u63a5 ctrl+d \u4f1a\u76f4\u63a5\u5173\u6389\u5bb9\u5668\uff0c\u540e\u9762\u9700\u8981\u91cd\u65b0\u542f\u52a8\n# \u4f7f\u7528 ssh \u901a\u8fc7\u7aef\u53e3 20000 \u767b\u5f55\u5bb9\u5668\nssh acs@localhost -p 20000 # \u5728\u670d\u52a1\u5668\u7aef\u767b\u5f55 docker \u5bb9\u5668\nssh acs@123.60.154.120 -p 20000 # \u5728\u672c\u5730\u7ec8\u7aef\u767b\u5f55 docker \u5bb9\u5668\n# \u914d\u7f6e ssh \u514d\u5bc6\u76f4\u63a5\u767b\u5f55 docker \u5bb9\u5668\uff0c\u5c31\u4e0d\u9700\u8981\u4f7f\u7528\u670d\u52a1\u5668\u767b\u9646\u4e86\nHost django\n    HostName 123.60.154.120\n    User acs\n    Port 20000\nscp-copy-id django\n</code></pre>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%B8%80%E3%80%81%E9%A1%B9%E7%9B%AE%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE/#_2","title":"\u4e8c\u3001\u9879\u76ee\u642d\u5efa","text":"<p>\u67e5\u770b django \u7248\u672c\uff1a<code>django-admin --version</code></p> <p>\u521b\u5efa\u9879\u76ee\uff1a<code>django-admin startproject acapp</code></p> <p>\u8fd9\u91cc\u7684 <code>acapp</code> \u662f\u9879\u76ee\u540d\u79f0\uff0c\u4e4b\u540e\u53ef\u4ee5\u5728\u6839\u76ee\u5f55\u4e0b\u53d1\u73b0\u591a\u4e86\u4e00\u4e2a\u6587\u4ef6\u5939 <code>acapp</code>\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>tree</code> \u67e5\u770b\u9879\u76ee\u76ee\u5f55\u7ed3\u6784\u3002</p> <p>\u5728\u6587\u4ef6\u5939 <code>acapp</code> \u91cc\u9762\u914d\u7f6e <code>github</code> \u4ed3\u5e93\u65b9\u4fbf\u7ba1\u7406\u9879\u76ee\uff0c\u5177\u4f53\u64cd\u4f5c\u4f1a\u5728\u521b\u5efa\u4ed3\u5e93\u7684\u65f6\u5019\u6709\u63d0\u793a\u3002</p> <p>\u6ce8\u610f <code>push</code> \u5230 <code>github</code> \u4e4b\u524d\u9700\u8981\u5c06\u5f53\u524d\u670d\u52a1\u5668\u7684\u516c\u94a5\u653e\u8fdb <code>github</code> \u7684\u94a5\u5319\u8bbf\u95ee\u7ba1\u7406\u4e2d</p> <p>\u5230\u8fd9\u91cc\u53ef\u4ee5\u8bd5\u7740\u8fd0\u884c\u9879\u76ee\uff0c\u4f7f\u7528\u547d\u4ee4\uff1a</p> <pre><code>python3 manage.py runserver 0.0.0.0:8000\n</code></pre> <p>\u7136\u540e\u53ef\u4ee5\u5728\u670d\u52a1\u5668\u5730\u5740\u680f\u8f93\u5165\u670d\u52a1\u5668\u7684\u516c\u7f51IP\u540e\u9762\u52a0\u4e0a <code>:8000</code> \u5373\u53ef\u8bbf\u95ee\u3002</p> <p>\u8fd9\u4e2a\u65f6\u5019\u6253\u5f00\u5730\u5740 <code>\u516c\u7f51IP:8000</code> \u5f80\u5f80\u4f1a\u6709\u62a5\u9519\uff1a<code>Invalid HTTP_HOST header: '\u516c\u7f51IP:8000'. You may need to add '\u516c\u7f51IP' to ALLOWED_HOSTS</code>\u3002\u6839\u636e\u63d0\u793a\uff0c\u5728\u6587\u4ef6 <code>/acapp/acapp/settings.py</code> \u4e2d\u7684 <code>ALLOWED_HOSTS = []</code> \u6dfb\u52a0 <code>\"\u516c\u7f51IP\"</code> \u5373\u53ef\uff1a<code>ALLOWED_HOSTS = [\u201dIP\u5730\u5740\u201c]</code>\uff0c\u8fd9\u91cc\u8981\u5199\u5728 <code>\u201d\u201c</code> \u91cc\u9762\uff0c\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\u3002</p> <p>\u5b8c\u6210\u642d\u5efa\u4e4b\u540e\uff0c\u4f1a\u770b\u89c1\u7f51\u9875\u4e0a\u6709<code>The install worked successfully! Congratulations!</code> \u4ee5\u53ca\u4e0b\u56fe</p> <p></p> <p>\u5b8c\u6210\u4e4b\u540e\u56de\u5230\u9879\u76ee\u6839\u76ee\u5f55 <code>acapp</code> \u4f7f\u7528 <code>git status</code> \u53ef\u4ee5\u770b\u5230\u5982\u4e0b\uff1a</p> <p></p> <p>\u8fd9\u91cc\u9762\u591a\u4e86\u4e00\u4e2a <code>__pycache__</code> \u6587\u4ef6\u5939\uff0c\u8fd9\u4e2a\u662f <code>python</code> \u4e3a\u4e86\u52a0\u901f\u8fd0\u884c\u9884\u7f16\u8bd1\u7684\u6587\u4ef6\uff0c\u4e0d\u9700\u8981\u4e0a\u4f20\u3002</p> <p>\u53ef\u4ee5\u8fd9\u6837\u8bbe\u7f6e\uff0c\u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\u65b0\u5efa\u4e00\u4e2a <code>.gitignore</code> \u6587\u4ef6\u5e76\u5728\u91cc\u9762\u5199\u5165\uff1a</p> <pre><code>**/__pycache__\n</code></pre> <p>\u8fd9\u6837\u4f7f\u7528 <code>git add .</code> \u6307\u4ee4\u7684\u65f6\u5019\u4f1a\u5c06\u8be5\u6587\u4ef6\u5168\u90e8\u8fc7\u6ee4\u6389\u3002</p> <p>\u4e0b\u9762\u76f4\u63a5\u63d0\u4ea4\u4ee3\u7801\uff1a</p> <pre><code>git add .\ngit commit -m \"modify allowed host\"\ngit push\n</code></pre> <p>\u4e0a\u9762\u8fc7\u7a0b\u7ed3\u675f\u540e\uff0c\u53ef\u4ee5\u53d1\u73b0\u6211\u4eec\u5728\u6253\u5f00\u7f51\u9875\u7684\u65f6\u5019\u662f\u4e00\u4e2a <code>django</code> \u7684\u9ed8\u8ba4\u9875\u9762\uff0c\u4e0b\u9762\u4e3a\u4e86\u5f00\u53d1\u4e00\u4e2a <code>app</code>\uff0c\u9996\u5148\u521b\u5efa\u4e00\u4e2a <code>app</code></p> <pre><code>python3 manage.py startapp game\n</code></pre> <p>\u6267\u884c\u540e\u53ef\u4ee5\u53d1\u73b0\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\u9762\u591a\u4e86\u4e00\u4e2a\u6587\u4ef6\u5939 <code>app</code>\uff0c\u7ed3\u6784\u5982\u4e0b\uff1a</p> <p></p> <p>\u5176\u4e2d\u8981\u5173\u6ce8\u51e0\u4e2a\u6587\u4ef6\u5939\uff1a</p> <ul> <li><code>admin.py</code>\uff1a\u5b58\u50a8\u7ba1\u7406\u5458\u9875\u9762\uff0c\u7ba1\u7406\u5458\u6240\u80fd\u770b\u5230\u7684\u6570\u636e\u5e93</li> <li><code>models.py</code>\uff1a\u5b9a\u4e49\u7f51\u7ad9\u5404\u79cd\u6570\u636e\u5e93\u8868</li> <li><code>views.py</code>\uff1a\u5b9a\u4e49\u89c6\u56fe</li> </ul> <p>\u63d0\u4ea4\u4e00\u6b21\uff1a</p> <pre><code>git add .\ngit commit -m \"start app game\"\ngit push\n</code></pre> <p>\u5230\u8fd9\u91cc\u5982\u679c\u8fd0\u884c\u9879\u76ee <code>python3 manage.py runserver 0.0.0.0:8000</code> \u4f1a\u62a5\u9519\uff0c\u5982\u4e0b\uff1a</p> <p></p> <p>\u6839\u636e\u63d0\u793a\uff0c\u5148\u5173\u95ed\u9879\u76ee\uff0c\u518d\u6267\u884c\uff1a<code>python3 manage.py migrate</code>\uff0c\u518d\u6253\u5f00\u9879\u76ee\uff0c\u5c31\u6b63\u5e38\u4e86\u3002</p> <p>\u5bf9\u4e8e <code>django</code> \u9879\u76ee\uff0c\u4f1a\u6709\u4e00\u4e2a\u7ba1\u7406\u5458\u754c\u9762\uff0c\u5728\u5730\u5740\u680f\u91cc\u9762\u8f93\u5165\uff1a</p> <pre><code>\u516c\u7f51IP:8000/admin\n</code></pre> <p></p> <p>\u56de\u5230\u9879\u76ee\u6839\u76ee\u5f55\uff0c\u8fd9\u65f6\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u7ba1\u7406\u5458\u8d26\u6237\uff1a</p> <pre><code>python3 manage.py createsuperuser\n</code></pre> <p>\u7136\u540e\u5c31\u53ef\u4ee5\u5728\u7ba1\u7406\u5458\u9875\u9762\u767b\u5f55\u4e86\uff0c\u767b\u5f55\u540e\u754c\u9762\u5982\u4e0b\uff1a</p> <p></p> <p>\u4e0b\u9762\u521b\u5efa\u81ea\u5df1\u7684\u754c\u9762\u3002</p> <p>\u5148\u8fdb\u5165\u9879\u76ee\u6839\u76ee\u5f55\u6587\u4ef6\u5939\u4e0b\u7684 <code>game</code> \u6587\u4ef6\u5939\uff0c\u7136\u540e\u521b\u5efa\u6587\u4ef6 <code>urls.py</code> \u548c\u6587\u4ef6\u5939  <code>templates</code>\u3002</p> <pre><code>touch urls.py\nmkdir templates # \u7528\u4e8e\u5b58\u50a8\u7f51\u9875\u6a21\u677f\n</code></pre> <p>\u518d\u8bf4\u660e\u51e0\u4e2a\u91cd\u8981\u6587\u4ef6/\u6587\u4ef6\u5939\u7684\u4f5c\u7528\uff1a</p> <ul> <li><code>models.py</code>\uff1a\u5b58\u50a8\u6570\u636e\u7ed3\u6784\uff0c\u5373\u6570\u636e\u5e93\u91cc\u9762\u7684\u8868\uff0c\u6216\u8005\u8bf4\u662f <code>class</code></li> <li><code>view.py</code>\uff1a\u5b58\u50a8\u51fd\u6570\u903b\u8f91/\u5185\u5bb9\uff0c\u5373\u89c6\u56fe</li> <li><code>urls.py</code>\uff1a\u5b58\u50a8\u8def\u7531\uff0c\u5f53\u7528\u6237\u70b9\u51fb\u7f51\u7ad9\u4e0a\u4efb\u4f55\u4e00\u4e2a\u6309\u94ae/\u5730\u5740\u7684\u65f6\u5019\u90fd\u4f1a\u5bf9\u5e94\u670d\u52a1\u5668\u7aef\u7684\u4e00\u4e2a\u51fd\u6570\uff0c\u8be5\u6587\u4ef6\u5c31\u662f\u5b9e\u73b0\u8fd9\u6837\u7684\u6620\u5c04</li> <li><code>templates</code>\uff1a\u5b58\u50a8 <code>html</code>\uff0c\u5373\u7f51\u9875\u5185\u5bb9</li> </ul> <p>\u73b0\u5728\u5728\u6587\u4ef6 <code>views.py</code> \u4e2d\u5199\u5165\u4ee5\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>from django.http import HttpResponse\ndef index(request):\nline1 = '&lt;h1 style=\"text-align: center\"&gt;\u672f\u58eb\u4e4b\u6218&lt;/h1&gt;'\nline4 = '&lt;a href=\"/play/\"&gt;\u8fdb\u5165\u6e38\u620f\u754c\u9762&lt;/a&gt;'\nline3 = '&lt;hr&gt;'\nline2 = '&lt;img src=\"https://ts1.cn.mm.bing.net/th/id/R-C.ae41c43640dee5186f32cb4010f961d9?rik=55LRRKngICtMZw&amp;riu=http%3a%2f%2fwow.tgbus.com%2fUploadFiles_2396%2f201707%2f20170728150701694.png&amp;ehk=oNN6MUkcD4eqYYfZY%2b8pbe7eCXt7WkK4hsTUFHBOFG8%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0\" width=400&gt;'\nreturn HttpResponse(line1 + line4 + line3 + line2)\ndef play(request):\nline1 = '&lt;h1 style=\"text-align: center\"&gt;\u6e38\u620f\u754c\u9762&lt;/h1&gt;'\nline3 = '&lt;a href=\"/\"&gt;\u8fd4\u56de\u4e3b\u754c\u9762&lt;/a&gt;'\nline2 = '&lt;img src=\"https://ts1.cn.mm.bing.net/th/id/R-C.ae41c43640dee5186f32cb4010f961d9?rik=55LRRKngICtMZw&amp;riu=http%3a%2f%2fwow.tgbus.com%2fUploadFiles_2396%2f201707%2f20170728150701694.png&amp;ehk=oNN6MUkcD4eqYYfZY%2b8pbe7eCXt7WkK4hsTUFHBOFG8%3d&amp;risl=&amp;pid=ImgRaw&amp;r=0\" width=400&gt;'\nreturn HttpResponse(line1 + line3 + line2)\n</code></pre> <p>\u5728\u6587\u4ef6 <code>urls.py</code> \u4e2d\u5199\u5165\u4ee5\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>from django.urls import path\nfrom game.views import index, play\nurlpatterns = [\npath(\"\", index, name=\"index\"), # path \u4f5c\u7528\u662f\u89e3\u6790\u57df\u540d\npath(\"play/\", play, name=\"play\")\n]\n</code></pre> <p>\u5c06\u5176\u52a0\u5165\u603b\u8def\u7531\uff0c\u5728\u6587\u4ef6 <code>~/acapp/acapp/urls.py</code> \u6587\u4ef6\u4e2d\u4fee\u6539\uff1a</p> <pre><code>from django.contrib import admin\nfrom django.urls import path, include\nurlpatterns = [\npath('game/', include('game.urls')), # \u5982\u679c\u5c06 game/ \u5220\u9664\u4f1a\u81ea\u52a8\u6253\u5f00\u9875\u9762\n# path('', include('game.urls')), \u591a\u9875\u9762\u9700\u8981\u5148\u5220\u9664 game/\npath('admin/', admin.site.urls),\n]\n</code></pre> <p>\u5230\u8fd9\u91cc\u5982\u679c\u5728\u5730\u5740\u680f\u4e2d\u8f93\u5165 <code>\u516c\u7f51IP:8000</code> \u4f1a\u663e\u793a\u5982\u4e0b\uff1a</p> <p></p> <p>\u5982\u679c\u8f93\u5165\uff1a<code>\u516c\u7f51IP:8000/game</code> \u4f1a\u663e\u793a\u6587\u5b57 <code>\u6211\u7684\u7b2c\u4e00\u4e2a\u7f51\u9875\uff01\uff01\uff01</code></p> <p>\u8fd9\u4e2a\u8fc7\u7a0b\u662f\u4e00\u4e2a\u8fde\u7eed\u7684\u8fc7\u7a0b\uff1a</p> <ol> <li>\u7528\u6237\u8f93\u5165\u8bf7\u6c42\uff0c\u5373\u4e00\u4e2a <code>url</code>\uff1b</li> <li>\u8fdb\u5165 <code>acapp/acapp/urls.py</code>\uff0c\u901a\u8fc7 <code>include('game.urls')</code> \u8fdb\u5165 <code>\\acapp\\game\\urls.py</code>\uff1b</li> <li>\u901a\u8fc7 <code>path(\"\", index, name=\"index\")</code> \u8fdb\u5165 <code>views.py</code> \u91cc\u9762\u7684 <code>index</code> \u51fd\u6570\uff1b</li> <li>\u6700\u7ec8\u8f93\u51fa <code>\u6211\u7684\u7b2c\u4e00\u4e2a\u7f51\u9875\uff01\uff01\uff01</code>\u3002</li> </ol> <p>\u6700\u540e\u4e0a\u4f20\u6587\u4ef6\uff1a\uff0c\u6ce8\u610f\u8981\u73b0\u5728 <code>.gitignore</code> \u4e2d\u6dfb\u52a0\u5bf9 <code>.swp</code> \u6587\u4ef6\u7684\u8fc7\u6ee4\uff0c\u52a0\u4e0a <code>*.swp</code> \u5373\u53ef\u3002</p> <pre><code>git add .\ngit commit -m \"write my first page\"\ngit push\n</code></pre>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%B8%83%E3%80%81%E5%AE%9E%E7%8E%B0%E8%81%94%E6%9C%BA%E5%AF%B9%E6%88%98%E7%B3%BB%E7%BB%9F/","title":"\u7b2c\u4e03\u7ae0 \u5b9e\u73b0\u8054\u673a\u5bf9\u6218\u7cfb\u7edf","text":""},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%B8%83%E3%80%81%E5%AE%9E%E7%8E%B0%E8%81%94%E6%9C%BA%E5%AF%B9%E6%88%98%E7%B3%BB%E7%BB%9F/#_1","title":"\u4e00\u3001\u7edf\u4e00\u957f\u5ea6\u5355\u4f4d","text":"<p>\u5982\u679c\u8981\u5b9e\u73b0\u8054\u673a\u5bf9\u6218\uff0c\u4e0d\u540c\u73a9\u5bb6\u8fdb\u5165\u6e38\u620f\u540e\u7684\u6e38\u620f\u5c4f\u5e55\u957f\u5bbd\u6bd4\u5e94\u8be5\u662f\u4e00\u6837\u7684\uff0c\u5426\u5219\u5f53\u4e00\u4e2a\u73a9\u5bb6\u5728\u672c\u5730\u7684\u65f6\u5019\u8fd8\u5728\u5c4f\u5e55\u91cc\u9762\uff0c\u4f46\u662f\u5728\u53e6\u4e00\u4e2a\u73a9\u5bb6\u54ea\u91cc\u5c31\u5df2\u7ecf\u8dd1\u51fa\u5c4f\u5e55\u4e86\u3002</p> <p>\u5728\u6e32\u67d3\u5730\u56fe\u7684\u65f6\u5019\uff0c\u6839\u636e\u5f53\u524d\u7528\u6237\u754c\u9762\u957f\u548c\u5bbd\u7684\u5927\u5c0f\uff0c\u6700\u7ec8\u5c06\u6e38\u620f\u754c\u9762\u59cb\u7ec8\u6e32\u67d3\u6210\u4e00\u4e2a 16:9 \u7684\u754c\u9762\u3002</p> <p>\u4fee\u6539\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/playground/zbase.js</code>\uff1a</p> <pre><code>class AcGamePlayground {\nconstructor(root) {\nthis.root = root;\nthis.$playground = $(`&lt;div class=\"ac-game-playground\"&gt;&lt;/div&gt;`);\nthis.hide();\nthis.root.$ac_game.append(this.$playground); // \u6b64\u5904\u6dfb\u52a0\nthis.start();\n}\n...\nstart() { // \u4fee\u6539\u51fd\u6570\nlet outer = this;\n$(window).resize(function() {\nouter.resize();\n}); }\nresize() { // \u6dfb\u52a0\u51fd\u6570\nconsole.log(\"resize\");\nthis.width = this.$playground.width();\nthis.height = this.$playground.height();\nlet unit = Math.min(this.width / 16, this.height / 9);\nthis.width = unit * 16;\nthis.height = unit * 9;\nthis.scale = this.height; }\nshow() { // \u6253\u5f00playground\u754c\u9762\nthis.$playground.show();\nthis.resize(); // \u6b64\u5904\u6dfb\u52a0\n// \u5220\u9664this.root.$ac_game.append(this.$playground);\nthis.width = this.$playground.width();\nthis.height = this.$playground.height();\n...\n</code></pre> <p>\u6253\u5305\u5e76\u91cd\u542f\u670d\u52a1\uff0c\u6b64\u65f6\u6253\u5f00\u6e38\u620f\u754c\u9762\u540e\u7528\u9f20\u6807\u62d6\u52a8\u4fee\u6539\u7a97\u53e3\u5927\u5c0f\u4f1a\u5728\u63a7\u5236\u53f0\u770b\u5230\u8f93\u51fa <code>resize</code>\uff0c\u4f46\u662f\u6e38\u620f\u771f\u5b9e\u80cc\u666f\u5927\u5c0f\u5e76\u6ca1\u6709\u6539\u53d8\uff0c\u4e0b\u9762\u4fee\u6539\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/playground/game_map/zbase.js</code>\uff1a</p> <pre><code>    ...\nstart() {\n}\n// \u6dfb\u52a0\u6b64\u51fd\u6570\nresize() {\nthis.ctx.canvas.width = this.playground.width;\nthis.ctx.canvas.height = this.playground.height;\nthis.ctx.fillStyle = \"rgba(0, 0, 0, 1)\";\nthis.ctx.fillRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n}\nupdate() {\n...\n</code></pre> <p>\u540c\u65f6\u9700\u8981\u4fee\u6539\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/playground/zbase.js</code>\uff1a</p> <pre><code>    ...\nouter.resize();\n}); }\nresize() {\n// \u5220\u9664console.log(\"resize\");\nthis.width = this.$playground.width();\nthis.height = this.$playground.height();\nlet unit = Math.min(this.width / 16, this.height / 9);\nthis.width = unit * 16;\nthis.height = unit * 9;\nthis.scale = this.height;\nif (this.game_map) this.game_map.resize(); // \u6b64\u5904\u6dfb\u52a0\n}\nshow() { ...\n</code></pre> <p>\u4fee\u6539\u6587\u4ef6 <code>/home/acs/acapp/game/static/css/game.css</code>\uff0c\u9632\u6b62\u5730\u56fe\u6c38\u8fdc\u5728\u5de6\u4e0a\u89d2\uff1a</p> <pre><code>...\n.ac-game-playground {\nwidth: 100%;\nheight: 100%;\nuser-select: none;\nbackground-color: gray; /* \u6b64\u5904\u6dfb\u52a0 */\n}\n/* \u6dfb\u52a0\u4e0b\u9762\u51fd\u6570 */\n.ac-game-playground &gt; canvas {\nposition: relative;\ntop: 50%;\nleft: 50%;\ntransform: translate(-50%, -50%);\n}\n</code></pre> <p>\u6253\u5305\u5e76\u91cd\u542f\u670d\u52a1\uff0c\u5230\u8fd9\u91cc\u53ef\u4ee5\u5b9e\u73b0\u6e38\u620f\u754c\u9762\u968f\u7740\u7a97\u53e3\u5927\u5c0f\u7684\u53d8\u5316\u53d8\u5316\u3002</p> <p>\u4f46\u662f\u8fd9\u4e2a\u65f6\u5019\u4ecd\u7136\u5b58\u5728\u6e38\u620f\u4e2d\u7684\u5143\u7d20\u5e76\u4e0d\u4f1a\u968f\u7740\u7a97\u53e3\u7684\u5927\u5c0f\u53d8\u5316\u800c\u7b49\u6bd4\u4f8b\u7684\u53d8\u5316\u3002\u6ce8\u610f\u5730\u56fe\u4e2d\u7684\u5143\u7d20\u4ec5\u6709 <code>player\u3001pariticle\u3001skills</code>\u3002</p> <p>\u5148\u4fee\u6539\u521d\u59cb\u5316\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/playground/zbase.js</code>\uff1a</p> <pre><code>        ...\nthis.game_map = new GameMap(this); this.players = [];\nthis.players.push(new Player(this, this.width / 2 / this.scale, 0.5, 0.05, \"white\", 0.4, true)); // \u6b64\u5904\u4fee\u6539\nfor (let i = 0; i &lt; 5; i ++ ) { this.players.push(new Player(this, this.width / 2 / this.scale, 0.5, 0.05, this.get_random_color(), 0.4, false)); }  // \u6b64\u5904\u4fee\u6539\n}\n...\n</code></pre> <p>\u4fee\u6539\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/playground/player/zbase.js</code>\uff1a</p> <pre><code>        ...\nthis.is_me = is_me;\nthis.eps = 0.01; // \u6b64\u5904\u4fee\u6539\nthis.friction = 0.9; this.spent_time = 0; ...\nlet tx = Math.random() * this.playground.width / this.playground.scale; // \u6b64\u5904\u4fee\u6539\nlet ty = Math.random() * this.playground.height / ....\nthis.playground.game_map.$canvas.mousedown(function(e) {\nconst rect = outer.ctx.canvas.getBoundingClientRect();\nif (e.which === 3) { // \u6b64\u5904\u4fee\u6539\nouter.move_to((e.clientX - rect.left) / outer.playground.scale, (e.clientY - rect.top) / outer.playground.scale);\n} else if (e.which === 1) { if (outer.cur_skill === \"fireball\") {\nouter.shoot_fireball((e.clientX - rect.left) / outer.playground.scale, (e.clientY - rect.top) / outer.playground.scale); // \u6b64\u5904\u4fee\u6539\n}\n....\nshoot_fireball(tx, ty) {\nlet x = this.x, y = this.y;\nlet radius = 0.01; // \u6b64\u5904\u4fee\u6539\nlet angle = Math.atan2(ty - this.y, tx - this.x);\nlet vx = Math.cos(angle), vy = Math.sin(angle);\nlet color = \"orange\";\nlet speed = 0.6; // \u6b64\u5904\u4fee\u6539\nlet move_length = 1; // \u6b64\u5904\u4fee\u6539\nnew FireBall(this.playground, this, x, y, radius, vx, vy, color, speed, move_length, 0.01); // \u6b64\u5904\u4fee\u6539\n}\n....\nthis.radius -= damage;\nif (this.radius &lt; this.eps) { // \u6b64\u5904\u4fee\u6539\n....\nthis.update_move(); // \u6b64\u5904\u4fee\u6539\nthis.render(); }\n// \u6b64\u5904\u4fee\u6539\uff1a\u589e\u52a0\u51fd\u6570\nupdate_move() {\nthis.spent_time += this.timedelta / 1000;\nif (!this.is_me &amp;&amp; this.spent_time &gt; 2 &amp;&amp; Math.random() &lt; 1 / 300.0) { let player = this.playground.players[Math.floor(Math.random() * this.playground.players.length)];\nlet tx = player.x + player.speed * this.vx * this.timedelta / 1000 * 0.3;\nlet ty = player.y + player.speed * this.vy * this.timedelta / 1000 * 0.3;\nthis.shoot_fireball(tx, ty);\n}\nif (this.damage_speed &gt; this.eps)  { // \u6b64\u5904\u4fee\u6539\nthis.vx = this.vy = 0;\nthis.move_length = 0;\nthis.x += this.damage_x * this.damage_speed * this.timedelta / 1000;\nthis.y += this.damage_y * this.damage_speed * this.timedelta / 1000;\nthis.damage_speed *= this.friction;\n} else {\nif (this.move_length &lt; this.eps) {\nthis.move_length = 0;\nthis.vx = this.vy = 0;\nif (!this.is_me) { let tx = Math.random() * this.playground.width / this.playground.scale; // \u6b64\u5904\u4fee\u6539\nlet ty = Math.random() * this.playground.height / this.playground.scale; // \u6b64\u5904\u4fee\u6539\nthis.move_to(tx, ty);\n}\n} else {\nlet moved = Math.min(this.move_length, this.speed * this.timedelta / 1000);\nthis.x += this.vx * moved;\nthis.y += this.vy * moved;\nthis.move_length -= moved; }\n}\n}\nrender() { // \u6b64\u5904\u4fee\u6539\nlet scale = this.playground.scale; // \u6b64\u5904\u4fee\u6539\nif (this.is_me) {\nthis.ctx.save();\nthis.ctx.beginPath();\nthis.ctx.arc(this.x * scale, this.y * scale, this.radius * scale, 0, Math.PI * 2, false); // \u6b64\u5904\u4fee\u6539\nthis.ctx.stroke();\nthis.ctx.clip();\nthis.ctx.drawImage(this.img, (this.x - this.radius) * scale, (this.y - this.radius) * scale, this.radius * 2 * scale, this.radius * 2 * scale); // \u6b64\u5904\u4fee\u6539\nthis.ctx.restore();\n} else { this.ctx.beginPath();\nthis.ctx.arc(this.x * scale, this.y * scale, this.radius * scale, 0, Math.PI * 2, false); // \u6b64\u5904\u4fee\u6539\nthis.ctx.fillStyle = this.color;\nthis.ctx.fill();\n}\n}\n...\n</code></pre> <p>\u4fee\u6539\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/playground/skills/fireball/zbase.js</code>\uff1a</p> <pre><code>    ...\nthis.damage = damage;\nthis.eps = 0.01; // \u6b64\u5904\u4fee\u6539\n}\n...\nrender() {\nlet scale = this.playground.scale; // \u6b64\u5904\u4fee\u6539\nthis.ctx.beginPath();\nthis.ctx.arc(this.x * scale, this.y * scale, this.radius * scale, 0, Math.PI * 2, false); // \u6b64\u5904\u4fee\u6539\nthis.ctx.fillStyle = this.color;\nthis.ctx.fill();\n}\n}\n</code></pre> <p>\u4fee\u6539\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/playground/pariticle/zbase.js</code>\uff1a</p> <pre><code>    ...\nthis.friction = 0.9;\nthis.eps = 0.01; // \u6b64\u5904\u4fee\u6539\n...\nrender() {\nlet scale = this.playground.scale; // \u6b64\u5904\u4fee\u6539\nthis.ctx.beginPath();\nthis.ctx.arc(this.x * scale, this.y * scale, this.radius * scale, 0, Math.PI * 2, false); // \u6b64\u5904\u4fee\u6539\nthis.ctx.fillStyle = this.color;\nthis.ctx.fill();\n...\n</code></pre> <p>\u63d0\u4ea4\u4ee3\u7801\uff1a</p> <pre><code>git add .\ngit commit -m \"normalizing unit\"\ngit push\n</code></pre>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%B8%83%E3%80%81%E5%AE%9E%E7%8E%B0%E8%81%94%E6%9C%BA%E5%AF%B9%E6%88%98%E7%B3%BB%E7%BB%9F/#_2","title":"\u4e8c\u3001\u589e\u52a0\u201c\u8054\u673a\u5bf9\u6218\u201d\u6a21\u5f0f(\u591a\u4eba\u6a21\u5f0f)","text":"<p>\u4fee\u6539\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/menu/zbase.js</code>\uff1a</p> <pre><code>    ...\nadd_listening_events() {\nlet outer = this;\nthis.$single_mode.click(function(){\nouter.hide();\nouter.root.playground.show(\"single mode\"); // \u6b64\u5904\u4fee\u6539\n});\nthis.$multi_mode.click(function(){ // \u6b64\u5904\u4fee\u6539\nouter.hide();\nouter.root.playground.show(\"multi mode\");\n});\n...\n</code></pre> <p>\u4fee\u6539\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/playground/zbase.js</code>\uff1a</p> <pre><code>    ...\nshow(mode) { // \u6b64\u5904\u4fee\u6539\nthis.$playground.show();\n// \u5220\u9664this.resize();\nthis.width = this.$playground.width();\nthis.height = this.$playground.height();\nthis.game_map = new GameMap(this); this.resize(); // \u6b64\u5904\u4fee\u6539\nthis.players = [];\nthis.players.push(new Player(this, this.width / 2 / this.scale, 0.5, 0.05, \"white\", 0.4, this.root.settings.username, this.root.settings.photo)); // \u6b64\u5904\u4fee\u6539\n// \u6b64\u5904\u4fee\u6539\nif (mode === \"single mode\") {\nfor (let i = 0; i &lt; 5; i ++ ) {\nthis.players.push(new Player(this, this.width / 2 / this.scale, 0.5, 0.05, this.get_random_color(), 0.4, \"robot\")); // \u6b64\u5904\u4fee\u6539\n}\n} else if (mode === \"multi mode\") {\n}\n}\n...\n</code></pre> <p>\u4fee\u6539\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/playground/player/zbase.js</code>\uff1a</p> <pre><code>class Player extends AcGameObject {\nconstructor(playground, x, y, radius, color, speed, character, username, photo) { // \u6b64\u5904\u4fee\u6539\n...\nthis.speed = speed;\nthis.character = character; // \u6b64\u5904\u4fee\u6539\nthis.username = username; // \u6b64\u5904\u4fee\u6539\nthis.photo = photo; // \u6b64\u5904\u4fee\u6539\n...\nif (this.character !== \"robot\") { // \u6b64\u5904\u4fee\u6539\nthis.img = new Image();\nthis.img.src = this.photo; // \u6b64\u5904\u4fee\u6539\n}\n}\nstart() {\nif (this.character === \"me\") { // \u6b64\u5904\u4fee\u6539\nthis.add_listening_events();\n...\nupdate_move() {\nthis.spent_time += this.timedelta / 1000;\nif (!this.character === \"robot\" &amp;&amp; this.spent_time &gt; 2 &amp;&amp; Math.random() &lt; 1 / 300.0) { // \u6b64\u5904\u4fee\u6539\n...\nif (this.character === \"robot\") { // \u6b64\u5904\u4fee\u6539\n...\nrender() { let scale = this.playground.scale;\nif (this.character !== \"robot\") { // \u6b64\u5904\u4fee\u6539\n...\n</code></pre>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%B8%83%E3%80%81%E5%AE%9E%E7%8E%B0%E8%81%94%E6%9C%BA%E5%AF%B9%E6%88%98%E7%B3%BB%E7%BB%9F/#django_channels","title":"\u4e09\u3001\u914d\u7f6edjango_channels","text":"<p>\u8fd9\u4e2a\u662fDjango\u7528\u4e8e\u540c\u65f6\u5b9e\u73b0HTTP\u3001HTTP2\u548cwebsockets(WSS)\u7684\u5de5\u5177\u3002</p> <p>HTTP\u534f\u8bae\u662f\u5355\u5411\u7684\uff0c\u53ea\u8981client\u7aef\u4e0d\u5411server\u53d1\u8d77\u8bf7\u6c42\uff0cserver\u662f\u4e0d\u4f1a\u8fd4\u56de\u6570\u636e\u7684\u3002</p> <ol> <li> <p>\u5b89\u88c5 <code>channels_redis</code>\uff1a<code>pip install channels_redis</code></p> </li> <li> <p>\u914d\u7f6e <code>accapp/acapp/asgi.py</code>\uff1a</p> <pre><code>import os\nfrom channels.auth import AuthMiddlewareStack\nfrom channels.routing import ProtocolTypeRouter, URLRouter\nfrom django.core.asgi import get_asgi_application\nfrom game.routing import websocket_urlpatterns\nos.environ.setdefault('DJANGO_SETTINGS_MODULE', 'acapp.settings')\napplication = ProtocolTypeRouter({\n\"http\": get_asgi_application(),\n\"websocket\": AuthMiddlewareStack(URLRouter(websocket_urlpatterns))\n})\n</code></pre> </li> <li> <p>\u914d\u7f6e <code>acapp/acapp/settings.py</code>\uff0c\u5728 <code>INSTALLED_APPS</code> \u4e2d\u6dfb\u52a0 <code>channels</code> \uff1a</p> <pre><code>INSTALLED_APPS = [ 'channels',  # \u6b64\u5904\u6dfb\u52a0\n'game.apps.GameConfig',\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n]\n</code></pre> <p>\u5728\u6587\u672b\u6dfb\u52a0\u4e0b\u9762\u7684\u4ee3\u7801\uff1a</p> <pre><code>ASGI_APPLICATION = 'acapp.asgi.application'\nCHANNEL_LAYERS = {\n\"default\": {\n\"BACKEND\": \"channels_redis.core.RedisChannelLayer\",\n        \"CONFIG\": {\n\"hosts\": [(\"127.0.0.1\", 6379)],\n        },\n    },\n}\n</code></pre> </li> <li> <p>\u914d\u7f6e <code>game/routing.py</code>\uff0c\u8fd9\u8fd9\u4e00\u90e8\u5206\u7684\u4f5c\u7528\u76f8\u5f53\u4e8e <code>http</code> \u7684 <code>urls</code>\u3002</p> <pre><code>from django.urls import path\nwebsocket_urlpatterns = [\n]\n</code></pre> </li> <li> <p>\u7f16\u5199 <code>acapp/game/consumers</code>\uff0c\u8fd9\u4e00\u90e8\u5206\u7684\u4f5c\u7528\u76f8\u5f53\u4e8e <code>http</code> \u7684 <code>views</code>\uff1a\u8fdb\u5165 <code>consumer</code> \u6587\u4ef6\u5939\uff0c\u521b\u5efa\u6587\u4ef6 <code>__init__.py</code> \u548c\u6587\u4ef6\u5939 <code>multiplayer</code> \u91cc\u9762\u521b\u5efa\u6587\u4ef6 <code>__init__.py</code> \u548c\u6587\u4ef6 <code>index.py</code>\uff0c\u5728\u6587\u4ef6 <code>index.py</code> \u4e2d\u6dfb\u52a0\u4e00\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>from channels.generic.websocket import AsyncWebsocketConsumer\nimport json\nclass MultiPlayer(AsyncWebsocketConsumer):\nasync def connect(self):\nawait self.accept()\nprint('accept')\nself.room_name = \"room\"\nawait self.channel_layer.group_add(self.room_name, self.channel_name)\nasync def disconnect(self, close_code):\nprint('disconnect')\nawait self.channel_layer.group_discard(self.room_name, self.channel_name)\nasync def receive(self, text_data):\ndata = json.loads(text_data)\nprint(data)\n</code></pre> </li> <li> <p>\u542f\u52a8 <code>django_channels</code>\uff1a</p> <pre><code># \u5728~/acapp\u76ee\u5f55\u4e0b\u6267\u884c\uff1a\ndaphne -b 0.0.0.0 -p 5015 acapp.asgi:application\n</code></pre> <p>\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u9700\u8981\u542f\u52a8\u7684\u670d\u52a1\u5668\uff1a</p> <ul> <li> <p>nginx\uff1a<code>sudo /etc/init.d/nginx start</code></p> </li> <li> <p>redis-server\uff1a<code>sudo redis-server /etc/redis/redis.conf</code> </p> </li> <li>uwsg\uff1a<code>uwsgi \u2013ini scripts/uwsgi.ini</code></li> <li>django_channels\uff1a<code>daphne -b 0.0.0.0 -p 5015 acapp.asgi:application</code></li> </ul> </li> <li> <p>\u5b9e\u73b0\u8def\u7531</p> <p>\u5728\u6587\u4ef6 <code>/home/acs/acapp/game/routing.py</code> \u91cc\u9762\u4fee\u6539\uff1a</p> <pre><code>from django.urls import path\nfrom game.consumers.multiplayer.index import MultiPlayer  # \u6b64\u5904\u6dfb\u52a0\nwebsocket_urlpatterns = [\npath(\"wss/multiplayer/\", MultiPlayer.as_asgi(), name=\"wss_multiplayer\"),\n]\n</code></pre> </li> <li> <p>\u5728\u524d\u7aef\u7a97\u53e3\u4e2d\u5efa\u7acb\u4e0e\u670d\u52a1\u5668\u7684\u8fde\u63a5\uff08\u901a\u8fc7Socket\uff09\u8fdb\u5165\u6587\u4ef6\u5939 <code>/home/acs/acapp/game/static/js/src/playground</code> \u521b\u5efa\u6587\u4ef6\u5939 <code>socket</code>\uff0c\u5728\u8be5\u6587\u4ef6\u5939\u4e0b\u6587\u4ef6\u5939 <code>multiplayer</code> \u7528\u4e8e\u5b9e\u73b0\u8054\u673a\u5bf9\u6218\u7684\u529f\u80fd\u3002\u5728\u6587\u4ef6\u5939 <code>multiplayer</code> \u4e0b\u9762\u521b\u5efa\u6587\u4ef6 <code>zbase.js</code>\uff1a</p> <pre><code>class MultiPlayerSocket {\nconstructor(playground) {\nthis.playground = playground;\n// \u5efa\u7acb\u8fde\u63a5\nthis.ws = new WebSocket(\"wws://app4588.acapp.acwing.com.cn/wss/multiplayer/\")\n}\nstart() {\n}\n}\n</code></pre> </li> <li> <p>\u5c06\u524d\u7aef\u6dfb\u52a0\u7684\u51fd\u6570\u653e\u8fdb\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/playground/zbase.js</code> \u4e2d\uff1a</p> <pre><code>    ...\nshow(mode) {\nlet outer = this; // \u4fee\u6539\u8fd9\u91cc\n...\n} else if (mode === \"multi mode\") {\nthis.mps = new MultiPlayerSocket(this); // \u4fee\u6539\u8fd9\u91cc\nthis.mps.ws.onopen = function() {  // \u4fee\u6539\u8fd9\u91cc\nouter.mps.send_create_player();\n};\n...\n</code></pre> <p>\u540c\u65f6\u4fee\u6539\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/playground/socket/multiplayer/zbase.js</code>\uff1a</p> <pre><code>    ... \nsend_create_player() { # \u6dfb\u52a0\u8fd9\u91cc\nthis.ws.send(JSON.stringify({\n'message': \"hello acapp server\",\n})) \n}\nreceive_create_player() { # \u6dfb\u52a0\u8fd9\u91cc\n}\n</code></pre> </li> </ol> <p>\u6bcf\u4e00\u6b21\u4fee\u6539\u5b8c\u4e4b\u540e\uff0c\u9700\u8981\u5148\u6253\u5305\uff0c\u7136\u540e\u91cd\u542fwss\u670d\u52a1\u3001http\u670d\u52a1(uwsg)\u3002</p>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%B8%83%E3%80%81%E5%AE%9E%E7%8E%B0%E8%81%94%E6%9C%BA%E5%AF%B9%E6%88%98%E7%B3%BB%E7%BB%9F/#_3","title":"\u56db\u3001\u7f16\u5199\u540c\u6b65\u51fd\u6570","text":"<p>\u7531\u4e8e\u540c\u6b65\u7684\u65f6\u5019\u6240\u6709\u7269\u4f53\uff08\u73a9\u5bb6\u3001\u706b\u7403\u7b49\uff09\u90fd\u9700\u8981\u540c\u6b65\uff0c\u6240\u4ee5\u9700\u8981\u7ed9\u6bcf\u4e00\u4e2a\u7269\u4f53\u5206\u914d\u4e00\u4e2a\u552f\u4e00\u7684\u7f16\u53f7\uff0c\u4fee\u6539\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/playground/ac_game_object/zbase.js</code>\uff1a</p> <pre><code>    ...\nthis.has_called_start = false; this.timedelta = 0; this.uuid = this.create_uuid(); // \u6b64\u5904\u6dfb\u52a0\n}\ncreate_uuid() { // \u6b64\u5904\u6dfb\u52a0\nlet res = \"\";\nfor (let i = 0; i &lt; 8; i ++ ) {\nlet x = parseInt(Math.floor(Math.random() * 10));\nres += x;\n}\nreturn res;\n}\nstart() {\n...\n</code></pre> <p>\u7531\u4e8e\u6bcf\u4e2a\u7a97\u53e3\u5728\u6253\u5f00\u540e\u90fd\u53ef\u80fd\u521b\u5efa\u4e00\u4e2a <code>uuid</code>\uff0c\u4e3a\u4e86\u4f7f\u6bcf\u4e2a\u7a97\u53e3\u4e2d\u7684 <code>uuid</code> \u4fdd\u6301\u4e00\u81f4\uff0c\u9700\u8981\u4f7f\u7528\u901a\u4fe1\u7684\u65b9\u5f0f\u6765\u4fdd\u8bc1\u6240\u6709\u7a97\u53e3\u4e2d\u7684 <code>uuid</code> \u4e0e\u6700\u521d\u521b\u5efa\u8be5 <code>object</code> \u7684 <code>uuid</code> \u968f\u673a\u6570\u4e00\u81f4\u3002</p> <p>\u4fee\u6539\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/playground/zbase.js</code>\uff1a</p> <pre><code>    ...\n} else if (mode === \"multi mode\") {\nthis.mps = new MultiPlayerSocket(this);\nthis.mps.uuid = this.players[0].uuid; // \u6b64\u5904\u6dfb\u52a0\n// \u5f53\u8fde\u63a5\u6210\u529f\u4e4b\u540e\u6267\u884c\u51fd\u6570\u5411\u540e\u7aef\u53d1\u9001\u4e00\u4e2a\u6d88\u606f\nthis.mps.ws.onopen = function() {\nouter.mps.send_create_player();\n};\n}\n}\n</code></pre> <p>\u4fee\u6539\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/playground/socket/multiplayer/zbase.js</code>\uff1a</p> <pre><code>    ... // \u4fee\u6539\u6b64\u51fd\u6570\nsend_create_player() {\nlet outer = this;\nthis.ws.send(JSON.stringify({\n'event': \"create player\",\n'uuid': outer.uuid,\n})) }\n...\n</code></pre> <p>\u4e0b\u9762\u540c\u6b65\u73a9\u5bb6\u7a97\u53e3\uff0c\u5373\u5f53\u6709\u53e6\u4e00\u4e2a\u73a9\u5bb6\u8fdb\u5165\u6e38\u620f\u7684\u65f6\u5019\uff0c\u9700\u8981\u5c06\u8be5\u73a9\u5bb6\u6e32\u67d3\u5230\u5f53\u524d\u7a97\u53e3\u4e2d\uff0c\u5e76\u4e14\u5c06\u5f53\u524d\u73a9\u5bb6\u6e32\u67d3\u5230\u521a\u52a0\u5165\u6e38\u620f\u73a9\u5bb6\u7684\u7a97\u53e3\u4e2d\u3002</p> <p>\u6211\u4eec\u5c06\u5bf9\u5c40\u4fe1\u606f\u5747\u5b58\u50a8\u5728redis\u7684room\uff08\u76f8\u5f53\u4e8e\u4e00\u4e2a\u623f\u95f4\uff09\u91cc\u9762\uff0c\u6bcf\u4e00\u5c40\u653e\u5728\u4e00\u4e2aroom\u4e2d\uff0c\u6bd4\u5982\u7b2c\u4e00\u5c40\u653e\u5728 <code>room_0</code> \u4e2d\uff0c\u7b2c\u4e8c\u5c40\u653e\u5728 <code>room_2</code> \u4e2d\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002</p> <p>\u5047\u8bbe\u6bcf\u4e2a\u623f\u95f4\u4ec5\u80fd\u5bb9\u7eb3\u4e09\u4e2a\u73a9\u5bb6\u73a9\u6e38\u620f\uff0c\u6bcf\u6b21\u6709\u65b0\u73a9\u5bb6\u8fdb\u5165\u6e38\u620f\uff0c\u5982\u679c\u7b2c\u4e00\u4e2a\u623f\u95f4 <code>room_0</code> \u4eba\u6570\u4e0d\u591f\uff0c\u5c31\u52a0\u5165\u8be5\u623f\u95f4\u3002\u5982\u679c\u7b2c\u4e00\u4e2a\u623f\u95f4\u4eba\u6570\u5df2\u6ee1\uff0c\u5c31\u52a0\u5165\u7b2c\u4e8c\u4e2a\u623f\u95f4 <code>room_1</code>\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002</p> <p>\u8bbe\u7f6e\u623f\u95f4\u4eba\u6570\u4e0a\u9650\uff0c\u5728\u6587\u4ef6 <code>/home/acs/acapp/acapp/settings.py</code> \u672b\u5c3e\u6dfb\u52a0</p> <pre><code>ROOM_CAPACITY = 3\n</code></pre> <p>\u4fee\u6539\u6587\u4ef6 <code>/home/acs/acapp/game/consumers/multiplayer/index.py</code>\uff1a</p> <pre><code>from channels.generic.websocket import AsyncWebsocketConsumer\nimport json\nfrom django.conf import settings # \u6b64\u5904\u6dfb\u52a0\nfrom django.core.cache import cache # \u6b64\u5904\u6dfb\u52a0\nclass MultiPlayer(AsyncWebsocketConsumer):\nasync def connect(self):\nself.room_name = None # \u6b64\u5904\u6dfb\u52a0\nfor i in range(1000): # \u6b64\u5904\u6dfb\u52a0\nname = \"name-%d\" % (i)\nif not cache.has_key(name) or len(cache.get(name)) &lt; settings.ROOM_CAPACITY:\nself.room_name = name\nbreak\nif not self.room_name: # \u6b64\u5904\u6dfb\u52a0\nreturn\nawait self.accept()\n# \u5220\u6389 print('accept')\nif not cache.has_key(self.room_name): # \u6b64\u5904\u6dfb\u52a0\ncache.set(self.room_name, [], 3600) \n# \u6b64\u5904\u4fee\u6539\nfor player in cache.get(self.room_name):\nawait self.send(text_data=json.dumps({\n'event': \"create_player\",\n'uuid': player['uuid'],\n'username': player['username'],\n'photo': player['photo'],\n}))\n# \u5220\u9664 self.room_name = \"room\"\nawait self.channel_layer.group_add(self.room_name, self.channel_name)\nasync def disconnect(self, close_code):\nprint('disconnect')\nawait self.channel_layer.group_discard(self.room_name, self.channel_name)\nasync def receive(self, text_data):\ndata = json.loads(text_data)\nprint(data)\n</code></pre> <p>\u4fee\u6539\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/playground/zbase.js</code>\uff1a</p> <pre><code>    ...\nthis.mps.ws.onopen = function() {\nouter.mps.send_create_player(outer.root.settings.username,\nouter.root.settings.photo); // \u6b64\u5904\u4fee\u6539\n};\n...\n</code></pre> <p>\u4fee\u6539\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/playground/socket/multiplayer/zbase.js</code>\uff1a</p> <pre><code>    ...\nsend_create_player(username, photo) { // \u4fee\u6539\u6b64\u5904\nlet outer = this;\nthis.ws.send(JSON.stringify({\n'event': \"create player\",\n'uuid': outer.uuid,\n'username': username, // \u4fee\u6539\u6b64\u5904\n'photo': photo, // \u4fee\u6539\u6b64\u5904\n})) }\n...\n</code></pre> <p>\u4fee\u6539\u6587\u4ef6 <code>/home/acs/acapp/game/consumers/multiplayer/index.py</code>\uff1a</p> <pre><code>    ...\n# \u5220\u9664 self.room_name = \"room\"\nawait self.channel_layer.group_add(self.room_name, self.channel_name)\nasync def disconnect(self, close_code):\nprint('disconnect')\nawait self.channel_layer.group_discard(self.room_name, self.channel_name)\nasync def create_player(self, data):\nplayers = cache.get(self.room_name)\nplayers.append({\n'uuid': data['uuid'],\n'username': data['username'],\n'photo': data['photo']\n})\ncache.set(self.room_name, players, 3600) # \u6709\u6548\u671f1\u5c0f\u65f6\nawait self.channel_layer.group_sned(\nself.room_name,\n{\n'type': \"group_create_player\",\n'event': \"create_player\",\n'uuid': data['uuid'],\n'username': data['username'],\n'photo': data['photo'],\n}\n)\nasync def group_create_player(self, data):\nawait self.send(text_data=json.dumps(data))\nasync def receive(self, text_data):\ndata = json.loads(text_data)\nevent = data['event']\nif event == \"create_player\":\nawait self.create_plyer(data)\n...\n</code></pre> <p>\u4fee\u6539\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/playground/socket/multiplayer/zbase.js</code>\uff1a</p> <pre><code>class MultiPlayerSocket {\nconstructor(playground) {\nthis.playground = playground;\nthis.ws = new WebSocket(\"wws://app4588.acapp.acwing.com.cn/wss/multiplayer/\")\nthis.start() // \u6b64\u5904\u4fee\u6539\n}\nstart() {\nthis.receive() // \u6b64\u5904\u4fee\u6539\n}\nreceive() { // \u6b64\u5904\u4fee\u6539\nlet outer = this;\nthis.ws.onmessage = function(e) {\nlet data = JSON.parse(e.data);\nlet uuid = data.uuid;\nif (uuid === outer.uuid) return false;\nlet event = data.event;\nif (event === \"create_player\") {\nouter.receive_create_player(uuid, data.username, data.photo);\n}\n};\n}\n// \u6b64\u5904\u4fee\u6539\nsend_create_player(username, photo) {\nlet outer = this;\nthis.ws.send(JSON.stringify({\n'event': \"create player\",\n'uuid': outer.uuid,\n'username': username,\n'photo': photo,\n})) }\n// \u6b64\u5904\u4fee\u6539\nreceive_create_player(uuid, username, photo) {\nlet player = new Player(\nthis.playground,\nthis.playground.width / 2 / this.playground.scale,\n0.5,\n0.05,\n\"white\",\n0.15,\n\"enemy\",\nusername,\nphoto,\n);\nplayer.uuid = uuidl;\nthis.playground,player.push(player);\n}\n}\n</code></pre> <p>\u4fee\u6539\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/playground/player/zbase.js</code>\uff1a</p> <pre><code>    ...\nstart() {\nif (this.character === \"me\") { this.add_listening_events();\n} else if (this.character === \"robot\"){ // \u4fee\u6539\u8fd9\u91cc\nlet tx = Math.random() * this.playground.width / this.playground.scale; let ty = Math.random() * this.playground.height / this.playground.scale;\nthis.move_to(tx, ty);\n}\n}\n...\n</code></pre> <p>\u63d0\u4ea4\u4ee3\u7801\uff1a</p> <pre><code>git add .\ngit commit -m \"implement multiplayer section-1\"\ngit push\n</code></pre>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%B8%89%E3%80%81%E5%88%9B%E5%BB%BA%E6%B8%B8%E6%88%8F%E7%95%8C%E9%9D%A2/","title":"\u7b2c\u4e09\u7ae0 \u521b\u5efa\u6e38\u620f\u754c\u9762","text":"<p>\u4e24\u70b9\u6ce8\u610f\uff1a</p> <ul> <li>\u6bcf\u6b21\u66f4\u65b0 <code>js</code> \u6587\u4ef6\u4e4b\u540e\u8bb0\u7740\u91cd\u65b0\u6253\u5305\u6587\u4ef6\uff0c\u5728\u6587\u4ef6\u5939 <code>/home/acs/acapp/scripts</code> \u4e0b\u6267\u884c\uff1a<code>./compress_game_js.sh</code> \u5373\u53ef\u3002</li> <li>\u64cd\u4f5c\u4e4b\u540e\u5982\u679c\u6253\u5f00\u7f51\u9875\u4f9d\u7136\u62a5\u9519\u4e14\u65e0\u56fe\u7247\u663e\u793a\uff0c\u9700\u8981\u5148\u6e05\u9664\u6e38\u89c8\u5668\u7f13\u5b58\u518d\u6253\u5f00\u5373\u53ef\u3002</li> </ul> <p>\u9996\u5148\u8fdb\u5165\u6587\u4ef6 <code>/acapp/game/templates/multiends/web.html</code> \u4e2d\u4fee\u6539 <code>js</code> \u7684\u5f15\u7528\u6a21\u5f0f\uff1a</p> <pre><code>{% load static %}\n\n&lt;head&gt;\n&lt;link rel=\"stylesheet\" href=\"https://cdn.acwing.com/static/jquery-ui-dist/jquery-ui.min.css\"&gt;\n&lt;script src=\"https://cdn.acwing.com/static/jquery/js/jquery-3.3.1.min.js\"&gt;&lt;/script&gt;\n&lt;link rel=\"stylesheet\" href=\"{% static 'css/game.css' %}\"&gt;\n&lt;!-- \u8fd9\u91cc\u5220\u9664\uff1a\u5f15\u5165\u81ea\u5df1\u7684 js \u6587\u4ef6 \n    &lt;script src=\"{% static 'js/dist/game.js' %}\"&gt;&lt;/script&gt;\n    --&gt;\n&lt;/head&gt;\n&lt;body style=\"margin: 0\"&gt;\n&lt;div id=\"ac_game_123\"&gt;&lt;/div&gt;\n&lt;script type=\"module\"&gt; &lt;!-- \u6dfb\u52a0\u5f15\u7528\u6a21\u5f0f&gt;\nimport {AcGame} from \"{% static 'js/dist/game.js' %}\"; &lt;!-- import js\u4ee3\u7801&gt;\n$(document).ready(function(){\nlet ac_game = new AcGame(\"ac_game_123\");\n});\n&lt;/script&gt;\n&lt;/body&gt;\n</code></pre> <p>\u518d\u5230\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/zbase.js</code> \u91cc\u9762\u6dfb\u52a0\u5173\u952e\u5b57 <code>export</code> \uff1a</p> <pre><code>export class AcGame {\nconstructor(id) {   this.id = id;\nthis.$ac_game = $('#' + id);\nthis.menu = new AcGameMenu(this);\nthis.playground = new AcGamePlayground(this);\nthis.start();\n}\nstart() {\n}\n}\n</code></pre> <p>\u66f4\u65b0\u4e4b\u540e\u8bb0\u7740\u91cd\u65b0\u6253\u5305\u6587\u4ef6\uff0c\u5728\u6587\u4ef6\u5939 <code>/home/acs/acapp/scripts</code> \u4e0b\u6267\u884c\uff1a<code>./compress_game_js.sh</code> \u5373\u53ef\u3002</p> <p>\u4e0a\u9762\u64cd\u4f5c\u4e4b\u540e\u5982\u679c\u6253\u5f00\u7f51\u9875\u4f9d\u7136\u62a5\u9519\u4e14\u65e0\u56fe\u7247\u663e\u793a\uff0c\u9700\u8981\u5148\u6e05\u9664\u6e38\u89c8\u5668\u7f13\u5b58\u518d\u6253\u5f00\u5373\u53ef\u3002</p> <p>\u4e0a\u9762\u662f\u5bf9\u4e0a\u8282\u8bfe\u7684\u5185\u5bb9\u8fdb\u884c\u4e00\u4e9b\u4fee\u6b63\uff0c\u4e3a\u4e86\u65b9\u4fbf\u8c03\u8bd5\uff0c\u6253\u5f00\u7f51\u9875\u76f4\u63a5\u8fdb\u5165\u6e38\u620f\u754c\u9762\uff0c\u53ef\u4ee5\u5bf9\u6587\u4ef6  <code>/home/acs/acapp/game/static/js/src/zbase.js</code>  \u4e2d\u521b\u5efa <code>AcGameMenu(this)</code> \u6ce8\u91ca\u6389\uff1a</p> <pre><code>export class AcGame {\nconstructor(id) {   this.id = id;\nthis.$ac_game = $('#' + id);\n// this.menu = new AcGameMenu(this);\nthis.playground = new AcGamePlayground(this);\nthis.start();\n}\nstart() {\n}\n}\n</code></pre> <p>\u4e0b\u9762\u8fdb\u5165\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/playground/zbase.js</code> \u4fee\u6539\u6e38\u620f\u754c\u9762\uff0c\u5e76\u4e14\u540c\u65f6\u9700\u8981\u5728\u6587\u4ef6 <code>/home/acs/acapp/game/static/css/game.css</code> \u6dfb\u52a0\u6837\u5f0f\u3002</p> <pre><code>class AcGamePlayground {\nconstructor(root) {\nthis.root = root;\nthis.$playground = $(`&lt;div class=\"ac-game-playground\"&gt;&lt;/div&gt;`);\n// this.hide(); \u53bb\u6389\u9690\u85cf\uff0c\u4e0d\u7136\u6253\u5f00\u7f51\u9875\u770b\u4e0d\u89c1\nthis.root.$ac_game.append(this.$playground);\n// \u5b58\u50a8\u754c\u9762\u7684\u5bbd\u9ad8\uff0c\u56e0\u4e3a\u540e\u9762\u5e38\u7528\nthis.width = this.$playground.width();\nthis.height = this.$playground.height();\nthis.game_map = new GameMap(this); // \u6dfb\u52a0\u5730\u56fe\nthis.players = []; // \u6dfb\u52a0\u73a9\u5bb6\nthis.players.push(new Player(this, this.width / 2, this.height / 2, this.height * 0.05, \"white\", this.height * 0.25, true));\nthis.start();\n}\nstart() {\n}\nshow() { // \u6253\u5f00playground\u754c\u9762\nthis.$playground.show();\n}\nhide() { // \u5173\u95edplayground\u754c\u9762\nthis.$playground.hide();\n}\n}\n</code></pre> <pre><code>.ac-game-menu {\nwidth: 100%;\nheight: 100%;\nbackground-image: url(\"/static/image/menu/background.gif\");\nbackground-size: 100% 100%;\nuser-select: none;\n}\n.ac-game-menu-field {\nwidth: 20vw;\nposition: relative;\ntop: 40vh;\nleft: 19vw;\n}\n.ac-game-menu-field-item {\nheight: 7vh;\nwidth: 18vw;\ncolor: white;\nfont-size: 6vh;\nfont-style: italic;\npadding: 2vh;\ncursor: pointer;\ntext-align: center;\nbackground-color: rgba(39, 21, 28, 0.6);\nborder-radius: 10px;\nletter-spacing: 0.5vw;\n}\n/* \u8bbe\u7f6e\u9f20\u6807\u60ac\u6d6e\u6837\u5f0f */\n.ac-game-menu-field-item:hover {\ntransform: scale(1.2);\ntransition: 100ms;\n}\n/* \u8bbe\u7f6e\u6e38\u620f\u754c\u9762\u6837\u5f0f */\n.ac-game-playground {\nwidth: 100%;\nheight: 100%;\nuser-select: none;\n}\n</code></pre> <p>\u66f4\u65b0\u4e4b\u540e\u8bb0\u7740\u91cd\u65b0\u6253\u5305\u6587\u4ef6\uff0c\u5728\u6587\u4ef6\u5939 <code>/home/acs/acapp/scripts</code> \u4e0b\u6267\u884c\uff1a<code>./compress_game_js.sh</code> \u5373\u53ef\u3002</p> <p>\u4e3a\u4e86\u5b9e\u73b0\u6e38\u620f\u4e2d\u5c0f\u7403\u79fb\u52a8\u7684\u6548\u679c\uff0c\u9700\u8981\u5148\u5b9e\u73b0\u4e00\u4e2a\u57fa\u7c7b <code>AcGameObject</code> \u7528\u4e8e\u5b9e\u73b0\u7269\u4f53\u79fb\u52a8\u7ed8\u5236\uff0c\u6bcf\u79d2\u949f\u7ed8\u5236 <code>60</code> \u5e27\u3002</p> <p>\u5728\u6587\u4ef6\u5939 <code>/home/acs/acapp/game/static/js/src/playground</code> \u4e0b\u521b\u5efa\u6587\u4ef6\u5939 <code>ac_game_object</code>\uff0c\u5728\u8be5\u6587\u4ef6\u5939\u4e0b\u521b\u5efa\u6587\u4ef6 <code>zbase.js</code>\u3002</p> <pre><code>let AC_GAME_OBJECTS = []; // \u5168\u5c40\u8c03\u7528\uff0c\u6bcf\u6b21\u8c03\u7528\u90fd\u6dfb\u52a0\u4e00\u6b21\nclass AcGameObject {\nconstructor() {\nAC_GAME_OBJECTS.push(this);\nthis.has_called_start = false; // \u662f\u5426\u6267\u884c\u8fc7 start \u51fd\u6570\nthis.timedelta = 0; // \u5f53\u524d\u5e27\u8ddd\u79bb\u4e0a\u4e00\u5e27\u7684\u65f6\u95f4\u95f4\u9694\n}\nstart() { // \u53ea\u4f1a\u5728\u7b2c\u4e00\u5e27\u6267\u884c\u4e00\u6b21\n}\nupdate() { // \u6bcf\u4e00\u5e27\u5747\u4f1a\u6267\u884c\u4e00\u6b21\n}\non_destroy() { // \u5728\u88ab\u5220\u9664\u4e4b\u524d\u6267\u884c\u4e00\u6b21\n}\ndestroy() { // \u5220\u9664\u8be5\u7269\u4f53\nthis.on_destroy();\nfor (let i = 0; i &lt; AC_GAME_OBJECTS.length; i ++ ) {\nif (AC_GAME_OBJECTS[i] === this) {\nAC_GAME_OBJECTS.splice(i, 1);\nbreak;\n}\n}\n}\n}\nlet last_timestamp;\nlet AC_GAME_ANIMATION = function(timestamp) {\nfor (let i = 0; i &lt; AC_GAME_OBJECTS.length; i ++ ) {\nlet obj = AC_GAME_OBJECTS[i];\nif (!obj.has_called_start) {\nobj.start();\nobj.has_called_start = true;\n} else {\nobj.timedelta = timestamp - last_timestamp;\nobj.update();\n}\n}\nlast_timestamp = timestamp;\nrequestAnimationFrame(AC_GAME_ANIMATION);\n}\nrequestAnimationFrame(AC_GAME_ANIMATION);\n</code></pre> <p>\u5728\u6587\u4ef6\u5939 <code>/home/acs/acapp/game/static/js/src/playground</code> \u4e0b\u521b\u5efa\u6587\u4ef6\u5939 <code>game_map</code> \u7528\u4e8e\u5b58\u50a8\u6e38\u620f\u5730\u56fe\uff0c\u5728\u8be5\u6587\u4ef6\u5939\u4e0b\u521b\u5efa\u6587\u4ef6 <code>zbase.js</code>\u3002</p> <pre><code>class GameMap extends AcGameObject {\nconstructor(playground) {\nsuper();\nthis.playground = playground;\nthis.$canvas = $(`&lt;canvas&gt;&lt;/canvas&gt;`); // \u753b\u5e03\nthis.ctx = this.$canvas[0].getContext('2d');\nthis.ctx.canvas.width = this.playground.width;\nthis.ctx.canvas.height = this.playground.height;\nthis.playground.$playground.append(this.$canvas);\n}\nstart() {\n}\nupdate() {\nthis.render();\n}\nrender() { // \u6e32\u67d3\u5730\u56fe\nthis.ctx.fillStyle = \"rgba(0, 0, 0, 0.5)\"; //  \u6700\u540e\u6dfb\u52a0 0.5 \u4f7f\u5f97\u5237\u65b0\u5730\u56fe\u6709\u4e86\u4e00\u4e2a\u6e10\u53d8\u7684\u8fc7\u7a0b\uff0c\u5e76\u4e14\u7403\u7684\u79fb\u52a8\u8f68\u8ff9\u4f1a\u6709\u4e00\u4e2a\u6b8b\u5f71\nthis.ctx.fillRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n}\n}\n</code></pre> <p>\u5728\u6587\u4ef6\u5939 <code>/home/acs/acapp/game/static/js/src/playground</code> \u4e0b\u521b\u5efa\u6587\u4ef6\u5939 <code>player</code> \u7528\u4e8e\u5b58\u50a8\u73a9\u5bb6\uff0c\u5728\u8be5\u6587\u4ef6\u5939\u4e0b\u521b\u5efa\u6587\u4ef6 <code>zbase.js</code>\u3002</p> <pre><code>class Player extends AcGameObject {\nconstructor(playground, x, y, radius, color, speed, is_me) {\nsuper();\nthis.playground = playground;\nthis.ctx = this.playground.game_map.ctx;\nthis.x = x;\nthis.y = y;\nthis.damage_x = 0; // \u88ab\u653b\u51fb\u5230\u65f6\u7684x\u65b9\u5411\u7684\u4f4d\u79fb\nthis.damage_y = 0; // \u88ab\u653b\u51fb\u5230\u65f6\u7684y\u65b9\u5411\u7684\u4f4d\u79fb\nthis.damage_speed = 0; // \u88ab\u653b\u51fb\u5230\u65f6\u7684\u901f\u5ea6\nthis.vx = 0; // x \u65b9\u5411\u79fb\u52a8\u901f\u5ea6\nthis.vy = 0; // y \u65b9\u5411\u79fb\u52a8\u901f\u5ea6\nthis.move_length = 0; // \u6bcf\u6b21\u70b9\u51fb\u9875\u9762\u5c0f\u7403\u79fb\u52a8\u7684\u8ddd\u79bb\nthis.radius = radius;\nthis.color = color;\nthis.speed = speed;\nthis.is_me = is_me;\nthis.eps = 0.1;\nthis.friction = 0.9; // \u6469\u64e6\u529b\uff0c\u5b9e\u73b0\u78b0\u649e\u540e\u901f\u5ea6\u7531\u5feb\u5230\u6162\u8870\u51cf\u7684\u6548\u679c\nthis.spent_time = 0; // \u6e38\u620f\u5f00\u59cb\u524d\u51c6\u5907\u65f6\u95f4\nthis.cur_skill = null; // \u5f53\u524d\u9009\u62e9\u7684\u6280\u80fd\n}\nstart() {\nif (this.is_me) {\nthis.add_listening_events();\n} else { // \u7ed9\u654c\u4eba\u8bbe\u7f6e\u968f\u673a\u4f4d\u7f6e\nlet tx = Math.random() * this.playground.width;\nlet ty = Math.random() * this.playground.height;\nthis.move_to(tx, ty);\n}\n}\nadd_listening_events() {\nlet outer = this;\n// \u6e05\u9664\u6389\u9f20\u6807\u5728\u9875\u9762\u7684\u53f3\u952e\u529f\u80fd\nthis.playground.game_map.$canvas.on(\"contextmenu\", function() {\nreturn false;\n}) // \u4f7f\u56fe\u50cf\u6cbf\u7740\u9f20\u6807\u70b9\u51fb\u4f4d\u7f6e\u79fb\u52a8\nthis.playground.game_map.$canvas.mousedown(function(e) {\nconst rect = outer.ctx.canvas.getBoundingClientRect();\nif (e.which === 3) {\nouter.move_to(e.clientX - rect.left, e.clientY - rect.top); // \u5750\u6807\u6620\u5c04\uff0c\u4e0e\u7528\u6237\u4e00\u81f4\n} else if (e.which === 1) { // \u5982\u679c\u70b9\u51fb\u9f20\u6807\u5de6\u952e\nif (outer.cur_skill === \"fireball\") { // \u5982\u679c\u5f53\u524d\u6280\u80fd\u662f fireball \u5c31\u91ca\u653e\u706b\u7403\nouter.shoot_fireball(e.clientX - rect.left, e.clientY - rect.top);\n}\nouter.cur_skill = null; // \u91ca\u653e q \u952e\n}\n})\n// \u6309 q \u952e\u4f7f\u7528\u706b\u7403\u6280\u80fd\n$(window).keydown(function(e) {\nif (e.which === 81) { // \u5982\u679c\u6309\u4e0b\u7684\u662f q \u952e\nouter.cur_skill = \"fireball\";\nreturn false;\n} })\n}\nshoot_fireball(tx, ty) { // \u671d\u5750\u6807\u53d1\u5c04\u706b\u7403\nlet x = this.x, y = this.y;\nlet radius = this.playground.height * 0.01;\nlet angle = Math.atan2(ty - this.y, tx - this.x);\nlet vx = Math.cos(angle), vy = Math.sin(angle);\nlet color = \"orange\";\nlet speed = this.playground.height * 0.8;\nlet move_length = this.playground.height * 1;\nnew FireBall(this.playground, this, x, y, radius, vx, vy, color, speed, move_length, this.playground.height * 0.01);\n}\n// \u6c42\u51fa\u56fe\u4e2d\u4e24\u70b9\u6b27\u51e0\u91cc\u5f97\u8ddd\u79bb\nget_dist(x1, y1, x2, y2) {\nlet dx = x1 - x2;\nlet dy = y1 - y2;\nreturn Math.sqrt(dx * dx + dy * dy);\n}\nmove_to(tx, ty) {\nthis.move_length = this.get_dist(this.x, this.y, tx, ty);\nlet angle = Math.atan2(ty - this.y, tx - this.x); // \u6c42\u51fa\u89d2\u5ea6 tan\uff0c\u53c2\u6570\u5148\u4e3a y\uff0c\u540e\u4e3a x\nthis.vx = Math.cos(angle);\nthis.vy = Math.sin(angle);\n}\n// \u5982\u679c\u88ab\u653b\u51fb\u5230\nis_attacked(angle, damage) {\n// \u6bcf\u4e00\u6b21\u649e\u51fb\u751f\u6210 10~15 \u4e2a\u968f\u673a\u5c0f\u7403\nfor (let i = 0; i &lt; 20 + Math.random() * 10; i ++ ) {\nlet x = this.x, y = this.y;\nlet radius = this.radius * Math.random() * 0.3;\nlet angle = Math.PI * 2 * Math.random();\nlet vx = Math.cos(angle), vy = Math.sin(angle);\nlet color = this.color;\nlet speed = this.speed * 6;\nlet move_length = this.radius * Math.random() * 7;\nnew Particle(this.playground, x, y, radius, vx, vy, color, speed, move_length);\n}\nthis.radius -= damage;\nif (this.radius &lt; 10) {\nthis.destroy();\nreturn false;\n}\nthis.damage_x = Math.cos(angle);\nthis.damage_y = Math.sin(angle);\nthis.damage_speed = damage * 100; // \u88ab\u653b\u51fb\u5230\u7684\u540e\u9000\u901f\u5ea6\n}\nupdate() { // \u6bcf 1 \u79d2\u66f4\u65b0 60 \u6b21\nthis.spent_time += this.timedelta / 1000;\n// \u81ea\u52a8\u653b\u51fb\u529f\u80fd\uff1a\u6bcf 3 \u79d2\u949f\u5411\u4e00\u540d\u73a9\u5bb6\u53d1\u5c04\u4e00\u679a\u70ae\u5f39\nif (!this.is_me &amp;&amp; this.spent_time &gt; 2 &amp;&amp; Math.random() &lt; 1 / 300.0) { // \u81ea\u5df1\u4e0d\u80fd\u653b\u51fb\u81ea\u5df1\u4e14\u524d 3s \u4e0d\u80fd\u653b\u51fb\nlet player = this.playground.players[Math.floor(Math.random() * this.playground.players.length)];\nlet tx = player.x + player.speed * this.vx * this.timedelta / 1000 * 0.3; // \u9884\u5224 0.3 \u79d2\u949f\u4e4b\u540e x \u65b9\u5411\u4f4d\u7f6e\nlet ty = player.x + player.speed * this.vy * this.timedelta / 1000 * 0.3;\nthis.shoot_fireball(tx, ty);\n}\nif (this.damage_speed &gt; 10) {\nthis.vx = this.vy = 0;\nthis.move_length = 0;\nthis.x += this.damage_x * this.damage_speed * this.timedelta / 1000;\nthis.y += this.damage_y * this.damage_speed * this.timedelta / 1000;\nthis.damage_speed *= this.friction; // \u4e58\u4e0a\u6469\u64e6\u7cfb\u6570\n} else {\n// \u66f4\u65b0\u7403\u7684\u79fb\u52a8\nif (this.move_length &lt; this.eps) {\nthis.move_length = 0;\nthis.vx = this.vy = 0;\nif (!this.is_me) { // \u5982\u679c\u662f\u654c\u4eba\u505c\u6b62\u4e86\uff0c\u5c31\u9700\u8981\u5728\u6307\u5b9a\u4e00\u4e2a\u70b9\u7ee7\u7eed\u524d\u8fdb\nlet tx = Math.random() * this.playground.width;\nlet ty = Math.random() * this.playground.height;\nthis.move_to(tx, ty);\n}\n} else {\n/* \n                \u53d6 min \u662f\u4e3a\u4e86\u4fdd\u8bc1\u4e0d\u8d85\u754c\n                \u6bcf\u4e00\u79d2\u949f\u79fb\u52a8 this.speed\n                timedelta \u8868\u793a\u5f53\u524d\u65f6\u95f4\u8ddd\u79bb\u4e0a\u4e00\u4e2a\u65f6\u95f4\u6233\u7684\u65f6\u95f4\u5dee\n                timedelta \u7684\u5355\u4f4d\u4f7f ms\uff0c\u6240\u4ee5\u9700\u8981\u9664\u4ee5 1000\n                */\nlet moved = Math.min(this.move_length, this.speed * this.timedelta / 1000);\nthis.x += this.vx * moved;\nthis.y += this.vy * moved;\nthis.move_length -= moved; // \u79fb\u52a8\u4e4b\u540e\u9700\u8981\u51cf\u53bb\u79fb\u52a8\u7684\u8ddd\u79bb\n}\n}\n// \u66f4\u65b0\u753b\u5e03\nthis.render();\n}\nrender() {\nthis.ctx.beginPath();\nthis.ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);\nthis.ctx.fillStyle = this.color;\nthis.ctx.fill();\n}\n// \u5f53\u73a9\u5bb6\u6ca1\u6709\u4e86\u5c31\u7ed3\u675f\non_destroy() {\nfor (let i = 0; i &lt; this.playground.players.length; i ++ ) {\nif (this.playground.players[i] === this) {\nthis.playground.players.splice(i, 1);\n}\n}\n}\n}\n</code></pre> <p>\u5728\u6587\u4ef6\u5939 <code>/home/acs/acapp/game/static/js/src/playground</code> \u4e0b\u521b\u5efa\u6587\u4ef6\u5939 <code>skills</code> \u7528\u4e8e\u5b58\u50a8\u73a9\u5bb6\u6280\u80fd\uff0c\u5728\u8be5\u6587\u4ef6\u5939\u4e0b\u521b\u5efa\u6587\u4ef6\u5939 <code>fireball</code> \u7528\u4e8e\u5b58\u50a8\u53d1\u5c04\u706b\u7403\u6548\u679c\uff0c\u521b\u5efa\u6587\u4ef6 <code>zbase.js</code>\u3002</p> <pre><code>class FireBall extends AcGameObject {\nconstructor(playground, player, x, y, radius, vx, vy, color, speed, move_length, damage) {\nsuper();\nthis.playground = playground;\nthis.player = player;\nthis.ctx = this.playground.game_map.ctx;\nthis.x = x;\nthis.y = y;\nthis.vx = vx;\nthis.vy = vy;\nthis.radius = radius;\nthis.color = color;\nthis.speed = speed;\nthis.move_length = move_length;\nthis.damage = damage;\nthis.eps = 0.1;\n}\nstart() {\n}\nupdate() {\nif (this.move_length &lt; this.eps) {\nthis.destroy();\nreturn false;\n}\nlet moved = Math.min(this.move_length, this.speed * this.timedelta / 1000);\nthis.x += this.vx * moved;\nthis.y += this.vy * moved;\nthis.move_length -= moved;\n// \u78b0\u649e\u68c0\u6d4b\nfor (let i = 0; i &lt; this.playground.players.length; i ++ ) {\nlet player = this.playground.players[i];\nif (this.player !== player &amp;&amp; this.is_collision(player)) {\nthis.attack(player); // \u5982\u679c\u78b0\u649e\u5c31\u653b\u51fb\u654c\u4eba\n}\n}\nthis.render();\n}\nget_dist(x1, y1, x2, y2) {\nlet dx = x1 - x2;\nlet dy = y1 - y2;\nreturn Math.sqrt(dx * dx + dy * dy);\n}\nis_collision(player) {\nlet distance = this.get_dist(this.x, this.y, player.x, player.y);\nif (distance &lt; this.radius + player.radius) return true;\nreturn false;\n}\nattack(player) {\nlet angle = Math.atan2(player.y - this.y, player.x - this.x);\nplayer.is_attacked(angle, this.damage);\nthis.destroy();\n}\nrender() {\nthis.ctx.beginPath();\nthis.ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);\nthis.ctx.fillStyle = this.color;\nthis.ctx.fill();\n}\n}\n</code></pre> <p>\u5728\u6587\u4ef6\u5939 <code>/home/acs/acapp/game/static/js/src/playground</code> \u4e0b\u521b\u5efa\u6587\u4ef6\u5939 <code>pariticle</code> \u7528\u4e8e\u5b9e\u73b0\u5c0f\u7403\u88ab\u649e\u51fb\u4e4b\u540e\u5206\u6563\u5f00\u591a\u4e2a\u5c0f\u7403\u7684\u7c92\u5b50\u6548\u679c\uff0c\u521b\u5efa\u6587\u4ef6 <code>zbase.js</code>\u3002</p> <pre><code>class Particle extends AcGameObject {\nconstructor(playground, x, y, radius, vx, vy, color, speed, move_length) {\nsuper();\nthis.playground = playground;\nthis.ctx = this.playground.game_map.ctx;\nthis.x = x;\nthis.y = y;\nthis.radius = radius;\nthis.vx = vx;\nthis.vy = vy;\nthis.color = color;\nthis.speed = speed;\nthis.move_length = move_length;\nthis.friction = 0.9;\nthis.eps = 1;\n}\nstart() {\n}\nupdate() {\nif (this.move_length &lt; this.eps || this.speed &lt; this.eps) {\nthis.destroy();\nreturn false;\n}\nlet moved = Math.min(this.move_length, this.speed * this.timedelta / 1000);\nthis.x += this.vx * moved;\nthis.y += this.vy * moved;\nthis.move_length -= moved;\nthis.speed *= this.friction;\nthis.render();\n}\nrender() {\nthis.ctx.beginPath();\nthis.ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);\nthis.ctx.fillStyle = this.color;\nthis.ctx.fill();\n}\n}\n</code></pre> <p>\u540c\u65f6\u9700\u8981\u5728\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/playground/zbase.js</code> \u4e2d\u4fee\u6539\uff1a</p> <pre><code>class AcGamePlayground {\nconstructor(root) {\nthis.root = root;\nthis.$playground = $(`&lt;div class=\"ac-game-playground\"&gt;&lt;/div&gt;`);\n// this.hide(); \u53bb\u6389\u9690\u85cf\uff0c\u4e0d\u7136\u6253\u5f00\u7f51\u9875\u770b\u4e0d\u89c1\nthis.root.$ac_game.append(this.$playground);\n// \u5b58\u50a8\u754c\u9762\u7684\u5bbd\u9ad8\uff0c\u56e0\u4e3a\u540e\u9762\u5e38\u7528\nthis.width = this.$playground.width();\nthis.height = this.$playground.height();\nthis.game_map = new GameMap(this); // \u6dfb\u52a0\u5730\u56fe\nthis.players = []; // \u6dfb\u52a0\u73a9\u5bb6\nthis.players.push(new Player(this, this.width / 2, this.height / 2, this.height * 0.05, \"white\", this.height * 0.4, true));\nfor (let i = 0; i &lt; 5; i ++ ) { // \u6dfb\u52a0\u654c\u4eba\nthis.players.push(new Player(this, this.width / 2, this.height / 2, this.height * 0.05, this.get_random_color(), this.height * 0.4, false)); // \u6ce8\u610f\u654c\u4eba\u662f false\n}\nthis.start();\n}\nget_random_color() {\nlet colors = [\"blue\", \"red\", \"pink\", \"Fuchsia\", \"green\", \"yellow\", \"Aqua\"]\nreturn colors[Math.floor(Math.random() * 7)]\n}\nstart() {\n}\nshow() { // \u6253\u5f00playground\u754c\u9762\nthis.$playground.show();\n}\nhide() { // \u5173\u95edplayground\u754c\u9762\nthis.$playground.hide();\n}\n}\n</code></pre> <p>\u6700\u540e\u63d0\u4ea4\u4ee3\u7801\uff1a</p> <pre><code>git add .\ngit commit -m \"the thrid lesson code\"\ngit push\n</code></pre>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%BA%8C%E3%80%81%E5%88%9B%E5%BB%BA%E8%8F%9C%E5%8D%95%E7%95%8C%E9%9D%A2/","title":"\u7b2c\u4e8c\u7ae0 \u521b\u5efa\u83dc\u5355\u754c\u9762","text":""},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%BA%8C%E3%80%81%E5%88%9B%E5%BB%BA%E8%8F%9C%E5%8D%95%E7%95%8C%E9%9D%A2/#_1","title":"\u4e00\u3001\u9879\u76ee\u7cfb\u7edf\u8bbe\u8ba1","text":"<ul> <li>\u83dc\u5355\u754c\u9762\uff1a<code>menu</code></li> <li>\u6e38\u620f\u754c\u9762\uff1a<code>playground</code></li> <li>\u8bbe\u7f6e\u754c\u9762\uff1a<code>settings</code></li> </ul>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%BA%8C%E3%80%81%E5%88%9B%E5%BB%BA%E8%8F%9C%E5%8D%95%E7%95%8C%E9%9D%A2/#_2","title":"\u4e8c\u3001\u9879\u76ee\u6587\u4ef6\u7ed3\u6784","text":"<p>\u4e3b\u8981\u6307\u5728 <code>/acapp/game</code> \u4e0b\u7684\u6587\u4ef6</p> <ul> <li> <p><code>templates</code>\u76ee\u5f55\uff1a\u7ba1\u7406<code>html</code>\u6587\u4ef6</p> </li> <li> <p><code>urls</code>\u76ee\u5f55\uff1a\u7ba1\u7406\u8def\u7531\uff0c\u5373\u94fe\u63a5\u4e0e\u51fd\u6570\u7684\u5bf9\u5e94\u5173\u7cfb</p> </li> <li><code>views</code>\u76ee\u5f55\uff1a\u7ba1\u7406<code>http</code>\u51fd\u6570</li> <li><code>models</code>\u76ee\u5f55\uff1a\u7ba1\u7406\u6570\u636e\u5e93\u6570\u636e</li> <li><code>static</code>\u76ee\u5f55\uff1a\u7ba1\u7406\u9759\u6001\u6587\u4ef6\uff0c\u6bd4\u5982\uff1a<ul> <li><code>css</code>\uff1a\u5bf9\u8c61\u7684\u683c\u5f0f\uff0c\u6bd4\u5982\u4f4d\u7f6e\u3001\u957f\u5bbd\u3001\u989c\u8272\u3001\u80cc\u666f\u3001\u5b57\u4f53\u5927\u5c0f\u7b49</li> <li><code>js</code>\uff1a\u5bf9\u8c61\u7684\u903b\u8f91\uff0c\u6bd4\u5982\u5bf9\u8c61\u7684\u521b\u5efa\u4e0e\u9500\u6bc1\u3001\u4e8b\u4ef6\u51fd\u6570\u3001\u79fb\u52a8\u3001\u53d8\u8272\u7b49</li> <li><code>image</code>\uff1a\u56fe\u7247</li> <li><code>audio</code>\uff1a\u58f0\u97f3</li> <li>\u2026</li> </ul> </li> <li><code>consumers</code>\u76ee\u5f55\uff1a\u7ba1\u7406<code>websocket</code>\u51fd\u6570</li> </ul> <p>\u9996\u5148\u5220\u6389\u6587\u4ef6\u5939\u4e0b\u9762\u7684\u6587\u4ef6 <code>urls.py, models.py, views.py</code>\uff0c\u7136\u540e\u5206\u522b\u5c06\u5176\u521b\u5efa\u6210\u6587\u4ef6\u5939 <code>urls, models, views</code>\u3002\u5e76\u4e14\u4e3a\u4e86\u8fd9\u4e09\u4e2a\u6587\u4ef6\u5728 <code>python</code> \u4e2d\u80fd\u591f\u88ab <code>import</code>\uff0c\u9700\u8981\u5206\u522b\u5728\u6bcf\u4e2a\u6587\u4ef6\u5939\u4e0b\u521b\u5efa\u6587\u4ef6 <code>__init__.py</code>\uff0c\u54ea\u6015\u662f\u7a7a\u6587\u4ef6\u4e5f\u53ef\u4ee5\u3002</p> <p>\u4e4b\u540e\u7ee7\u7eed\u521b\u5efa\u6587\u4ef6\u5939 <code>static, consumers</code>\u3002</p> <p>\u73b0\u5728\u5982\u679c\u91cd\u65b0\u8fd0\u884c\u9879\u76ee\uff0c\u4f1a\u62a5\u9519\uff1a</p> <p></p> <p>\u62a5\u9519\u539f\u56e0\u662f\u56e0\u4e3a\u5728 <code>/acapp/acapp/urls.py</code> \u4e2d\u7b2c\u4e00\u4e2a <code>path</code> \u91cc\u9762\u5f15\u7528\u7684 <code>urls</code> \u5df2\u7ecf\u53d8\u6210\u4e86\u4e00\u4e2a\u6587\u4ef6\u800c\u4e0d\u662f\u51fd\u6570\uff0c\u8fd9\u91cc\u76f4\u63a5\u6ce8\u91ca\u6389\uff1a\uff0c\u4fee\u6539\u540e\u5982\u4e0b\uff1a</p> <pre><code>from django.contrib import admin\nfrom django.urls import path, include\nurlpatterns = [\n# path('', include('game.urls')),\npath('admin/', admin.site.urls),\n]\n</code></pre> <p>\u7136\u540e\u91cd\u65b0\u8fd0\u884c\u9879\u76ee\u4fbf\u53ef\u6b63\u786e\u8fd0\u884c\uff0c\u6bcf\u5237\u65b0\u4e00\u6b21\u7f51\u9875\uff0c\u5c31\u4f1a\u51fa\u73b0\u4e00\u4e2a\u65b0\u7684\u65f6\u95f4\uff0c\u8fd9\u91cc\u7684\u65f6\u95f4\u662f <code>UTC</code> \u6807\u51c6\u65f6\u95f4\uff0c\u6240\u4ee5\u4e0b\u9762\u9700\u8981\u5bf9\u7f51\u7ad9\u505a\u4e00\u4e9b\u5168\u5c40\u6027\u7684\u8bbe\u7f6e\u3002</p> <p></p> <p>\u6253\u5f00\u6587\u4ef6 <code>/acapp/acapp/setting.py</code>\uff0c\u8bbe\u7f6e\uff1a</p> <pre><code># \u8bbe\u7f6e\u65f6\u533a\nTIME_ZONE = 'Asia/Shanghai' # \u5c06 app \u52a0\u5165\u9879\u76ee\nINSTALLED_APPS = [\n'game.apps.GameConfig', # \u5c06 app \u52a0\u5165\u9879\u76ee\n'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n]\n# \u8bbe\u7f6e\u9759\u6001\u6587\u4ef6\u8def\u5f84\nimport os # \u5f00\u5934\u5f15\u5165 os \u5305\nSTATIC_ROOT = os.path.join(BASE_DIR, 'static') # join()\u4f1a\u5c06\u4e24\u4e2a\u5b57\u7b26\u4e32\u5408\u5e76\uff0cBASE_DIR\u5728\u5f00\u5934\u5df2\u7ecf\u5b9a\u4e49\nSTATIC_URL = '/static/' # \u8fd9\u884c\u539f\u6765\u6587\u4ef6\u4e2d\u5df2\u7ecf\u5b58\u5728\nMEDIA_ROOT = os.path.join(BASE_DIR, 'media') # \u4f5c\u7528\u540c\u4e0a\nMEDIA_URL = '/media/' </code></pre> <p>\u5728 <code>/acappp/game/static/</code> \u4e0b\u9762\u521b\u5efa\u6587\u4ef6\u5939 <code>image, js, css, audio</code> \uff0c\u7136\u540e\u5728\u6bcf\u4e2a\u6587\u4ef6\u5939\u4e0b\u9762\u5206\u522b\u521b\u5efa\u6587\u4ef6\u5939 <code>menu, playground, settings</code>\uff0c\u8fd9\u91cc\u662f\u4e3a\u4e86\u4fdd\u8bc1\u9879\u76ee\u7684\u7edf\u4e00\u3002</p> <p>\u7136\u540e\u8fdb\u5165 <code>/static/image/menu/</code> \u6587\u4ef6\u5939\u4e0b\u9762\uff0c\u4f7f\u7528\u547d\u4ee4\u4e0b\u8f7d\u56fe\u7247\uff1a</p> <pre><code># wget --output-document=\u81ea\u5b9a\u4e49\u56fe\u7247\u540d\u79f0 \u56fe\u7247\u5730\u5740\nwget --output-document=background.gif https://s1.ax1x.com/2022/04/26/L769wd.gif\n</code></pre> <p>\u8fd9\u65f6\u5019\u5728\u6d4f\u89c8\u5668\u5730\u5740\u680f\u4e2d\u8f93\u5165\uff1a<code>http://123.60.154.120:8000/static/image/menu/background.gif</code> \u5219\u4f1a\u663e\u793a\u521a\u624d\u4e0b\u8f7d\u7684\u56fe\u7247\u3002</p> <p>\u5728 <code>acapp/game/static/css/</code> \u4e0b\u9762\u521b\u5efa\u6587\u4ef6 <code>game.css</code>\uff1b</p> <p>\u5728 <code>acapp/game/static/js</code> \u4e0b\u9762\u521b\u5efa\u6587\u4ef6\u5939 <code>dist</code> \u548c <code>src</code>\uff1b</p> <p>\u5728 <code>acapp</code> \u4e0b\u9762\u521b\u5efa\u6587\u4ef6\u5939 <code>scripts</code> \uff0c\u8fd9\u91cc\u9762\u7528\u4e8e\u5b58\u653e\u811a\u672c\uff0c\u5176\u4e2d\u4e00\u4e2a\u811a\u672c <code>compress_game_js.sh</code> \u662f\u5c06\u4e0a\u9762\u6587\u4ef6\u5939 <code>src</code> \u91cc\u9762\u7684\u6240\u6709 <code>js</code> \u6587\u4ef6\u5408\u5e76\u5728\u4e00\u4e2a <code>js</code> \u6587\u4ef6\u5e76\u5b58\u653e\u4e8e\u6587\u4ef6\u5939 <code>dist</code> \u4e2d\u3002</p> <pre><code># compress_game_js.sh\n#! /bin/bash\nJS_PATH=/home/acs/acapp/game/static/js/\nJS_PATH_DIST=${JS_PATH}dist/\nJS_PATH_SRC=${JS_PATH}src/\n\nfind $JS_PATH_SRC -type f -name '*.js' | sort | xargs cat &gt; ${JS_PATH_DIST}game.js\n</code></pre> <p>\u7136\u540e\u7ed9\u811a\u672c\u6dfb\u52a0\u53ef\u6267\u884c\u6743\u9650\uff1a<code>chmod +x compress_game_js.sh</code>\u3002</p> <p>\u6267\u884c\u811a\u672c\u4e4b\u540e\u5728\u4e4b\u524d <code>dist</code> \u6587\u4ef6\u5939\u4e0b\u4f1a\u591a\u4e00\u4e2a\u6587\u4ef6 <code>game.js</code></p> <p>\u63d0\u4ea4\u4e00\u6b21\u4ee3\u7801\uff1a</p> <pre><code>git add .\ngit commit -m \"create project structure\"\ngit push\n</code></pre> <p>\u6709\u4e86 <code>static</code> \u6587\u4ef6\u5c31\u53ef\u4ee5\u521b\u5efa <code>html</code> \u6587\u4ef6\uff0c\u4e0b\u9762\u521b\u5efa <code>html</code> \u6587\u4ef6\u3002</p> <p>\u5148\u8fdb\u5165\u6587\u4ef6\u5939 <code>/acapp/game/templates</code>\uff0c\u521b\u5efa\u6587\u4ef6\u5939 <code>menu, settings, playground</code>\uff0c\u4e3a\u4e86\u652f\u6301\u591a\u7ec8\u7aef\uff0c\u7ee7\u7eed\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u9762\u591a\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u5939 <code>multiends</code>\u540e\u8fdb\u5165\u8be5\u6587\u4ef6\u5939\uff0c\u521b\u5efa\u6587\u4ef6 <code>web.html</code>\u3002</p> <pre><code>&lt;!-- web.html --&gt;\n&lt;!-- \u9700\u8981\u63d0\u524d\u58f0\u660e\u4e00\u4e0b\u9759\u6001\u53d8\u91cf --&gt;\n{% load static %}\n\n&lt;head&gt;\n&lt;!-- \u4e0b\u9762\u4e24\u6761\u94fe\u63a5\u662f\u6dfb\u52a0\u5916\u90e8 js \u5e93--&gt;\n&lt;link rel=\"stylesheet\" href=\"https://cdn.acwing.com/static/jquery-ui-dist/jquery-ui.min.css\"&gt;\n&lt;script src=\"https://cdn.acwing.com/static/jquery/js/jquery-3.3.1.min.js\"&gt;&lt;/script&gt;\n&lt;!-- \u5f15\u5165\u81ea\u5df1\u7684\u9759\u6001\u6587\u4ef6\uff0c\u6ce8\u610f{}\u91cc\u9762\u7684\u5185\u5bb9\u662f Django \u7684\u8bed\u6cd5 --&gt;\n&lt;link rel=\"stylesheet\" href=\"{% static 'css/game.css' %}\"&gt;\n&lt;!-- \u5f15\u5165\u81ea\u5df1\u7684 js \u6587\u4ef6 --&gt;\n&lt;script src=\"{% static 'js/dist/game.js' %}\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;!-- margin\u662f\u6307\u5f53\u524d\u754c\u9762\u7684\u8fb9\u6846\u5916\u5ef6\u5bbd\u5ea6 --&gt;\n&lt;body style=\"margin: 0\"&gt;\n&lt;!-- \u6e38\u620f\u6846\u67b6 --&gt;\n&lt;div id=\"ac_game_123\"&gt;&lt;/div&gt;\n&lt;!-- \u5f15\u5165js\u4ee3\u7801 --&gt;\n&lt;script&gt;\n$(document).ready(function(){\nlet ac_game = AcGame(\"ac_game_123\");\n});\n&lt;/script&gt;\n&lt;/body&gt;\n</code></pre> <p>\u5728\u6587\u4ef6 <code>acapp/game/static/hjs/dist/game.js</code> \u91cc\u9762\u4fee\u6539\uff1a</p> <pre><code>class AcGame {\nconstructor(id) {\n}\n}\n</code></pre> <p>\u5728\u6587\u4ef6\u5939 <code>acapp/game/static/js/src</code> \u4e0b\u9762\u521b\u5efa\u6587\u4ef6\u5939 <code>menu, settings, playground</code>\uff0c\u518d\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6 <code>zbase.js</code> \u7528\u4e8e\u6253\u5305\u4e0a\u9762\u4e09\u4e2a\u6587\u4ef6\u5939\u91cc\u7684\u6240\u6709\u6587\u4ef6\u3002</p> <p>\u6587\u4ef6\u540d\u547d\u540d\u4e3a <code>zbase.js</code> \u7684\u539f\u56e0\uff1a\u56e0\u4e3a\u6253\u5305\u662f\u6309\u7167\u5b57\u5178\u5e8f\u53bb\u6253\u5305\u7684\uff0c\u6240\u4ee5\u9700\u8981\u6253\u5305\u7684\u6587\u4ef6\u90fd\u9700\u8981\u653e\u5728\u8fd9\u4e2a\u6587\u4ef6\u524d\u9762\u3002</p> <pre><code>// zbase.js\nclass AcGame {\nconstructor(id) {   }\n}\n</code></pre> <p>\u63a5\u4e0b\u6765\u4fee\u6539\u6587\u4ef6\u5939 <code>views</code>\uff0c\u8fdb\u5165\u6587\u4ef6\u5939\u540e\u540c\u7406\u521b\u5efa\u6587\u4ef6\u5939 <code>menu, settings, playground</code>\uff0c\u5e76\u5728\u6bcf\u4e00\u4e2a\u6587\u4ef6\u5939\u4e0b\u9762\u521b\u5efa\u6587\u4ef6 <code>__init__.py</code> \u4ee5\u4f7f\u5176\u80fd\u591f\u88ab <code>python</code> \u7a0b\u5e8f\u5bfc\u5165\uff0c\u7136\u540e\u5728\u6587\u4ef6\u5939 <code>/views/</code> \u4e0b\u9762\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6 <code>index.py</code>\uff0c\u4e3b\u8981\u7528\u4e8e\u8bbf\u95ee\u521a\u624d\u521b\u5efa\u7684 <code>html</code> \u6587\u4ef6</p> <pre><code># index.py\nfrom django.shortcuts import render # render \u662f\u5728\u670d\u52a1\u5668\u7aef\u6e32\u67d3\u4e00\u4e2a html \u6587\u4ef6\ndef index(request) :\nreturn render(request, \"multiends/web.html\")\n</code></pre> <p>\u63a5\u4e0b\u6765\u7f16\u8f91\u6587\u4ef6\u5939 <code>urls</code>\uff0c\u8fdb\u5165\u6587\u4ef6\u5939\u540e\u540c\u7406\u521b\u5efa\u6587\u4ef6\u5939 <code>menu, settings, playground</code>\uff0c\u5e76\u5728\u6bcf\u4e00\u4e2a\u6587\u4ef6\u5939\u4e0b\u9762\u521b\u5efa\u6587\u4ef6 <code>__init__.py</code> \u4ee5\u4f7f\u5176\u80fd\u591f\u88ab <code>python</code> \u7a0b\u5e8f\u5bfc\u5165\uff0c\u5728\u6587\u4ef6\u5939 <code>urls</code> \u4e0b\u521b\u5efa\u6587\u4ef6 <code>index.py</code>\uff0c\u4e3b\u8981\u7528\u4e8e\u5c06\u5f53\u524d\u6587\u4ef6\u5939\u4e0b\u5176\u4f59\u6587\u4ef6\u5939\u91cc\u9762\u7684 <code>url</code> \u7ed9 <code>inclu</code> \u8fdb\u6765\u3002</p> <pre><code># index.py\nfrom django.urls import path, include\nurlpatterns = [\n]\n</code></pre> <p>\u7136\u540e\u5c06\u6587\u4ef6\u5939 <code>urls</code> \u4e0b\u7684 <code>index.py</code> \u6587\u4ef6\u5206\u522b\u590d\u5236\u5230\u6587\u4ef6\u5939 <code>menu, playground, settings</code> \u4e2d\u3002</p> <p>\u7136\u540e\u8fd4\u56de\u6587\u4ef6\u5939 <code>urls</code> \u4e0b\u7684 <code>index.py</code> \u6587\u4ef6\uff0c\u5c06\u521a\u624d\u590d\u5236\u7684\u51e0\u4e2a\u6587\u4ef6\u6dfb\u52a0\u8fdb\u6765\uff1a</p> <pre><code># index.py\nfrom django.urls import path, include\nfrom game.views.index import index\nurlpatterns = [\npath(\"\", index, name=\"index\"),\npath(\"menu/\", include(\"game.urls.menu.index\")),\npath(\"playground/\", include(\"game.urls.playground.index\")),\npath(\"settings/\", include(\"game.urls.settings.index\")),\n]\n</code></pre> <p>\u4e0b\u9762\u4fee\u6539\u5168\u5c40\u7684 <code>urls</code>\uff0c\u8fdb\u5165\u6587\u4ef6 <code>/acapp/acapp/urls.py</code> \u8fdb\u884c\u4fee\u6539\uff1a</p> <pre><code>from django.contrib import admin\nfrom django.urls import path, include\nurlpatterns = [\npath('', include('game.urls.index')), # \u6b64\u5904\u4fee\u6539\npath('admin/', admin.site.urls),\n]\n</code></pre> <p>\u63d0\u4ea4\u4e00\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>git add .\ngit commit -m \"write html js views urls\"\ngit push\n</code></pre> <p>\u5230\u6b64\uff0c\u524d\u671f\u51c6\u5907\u5de5\u4f5c\u7ed3\u675f\uff01</p>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%BA%8C%E3%80%81%E5%88%9B%E5%BB%BA%E8%8F%9C%E5%8D%95%E7%95%8C%E9%9D%A2/#_3","title":"\u4e09\u3001\u521b\u5efa\u83dc\u5355\u754c\u9762","text":"<p>\u8fdb\u5165\u6587\u4ef6 <code>/acapp/game/static/js/src/zbase.js</code>\uff0c\u8fdb\u884c\u4fee\u6539\uff1a</p> <pre><code>class AcGame {\nconstructor(id) {   console.log(\"create ac game\");\n}\n}\n</code></pre> <p>\u6bcf\u6b21\u4fee\u6539\u6587\u4ef6\u4e4b\u540e\u90fd\u9700\u8981\u91cd\u65b0\u6253\u5305\u4e00\u6b21\uff0c\u5373\u5728 <code>/acapp/scripts/</code> \u4e0b\u6267\u884c <code>./compress_game_js.sh</code>\uff0c\u6267\u884c\u4e4b\u540e\u4f1a\u5728\u6d4f\u89c8\u5668\u7684\u63a7\u5236\u53f0\u770b\u5230\u8f93\u51fa <code>create ac game</code>\u3002</p>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%BA%8C%E3%80%81%E5%88%9B%E5%BB%BA%E8%8F%9C%E5%8D%95%E7%95%8C%E9%9D%A2/#31","title":"3.1\u521b\u5efa\u80cc\u666f\u56fe\u7247","text":"<p>\u5728\u6587\u4ef6\u5939 <code>/acapp/game/static/js/src/menu</code> \u4e0b\u9762\u521b\u5efa\u6587\u4ef6 <code>zbase.js</code> \uff0c\u8be5 <code>js</code> \u6587\u4ef6\u7684\u6837\u5f0f\u90fd\u9700\u8981\u5728 <code>/acapp/game/static/css/game.css</code> \u4e2d\u8fdb\u884c\u8bbe\u7f6e\uff0c\u6700\u540e\u8fd8\u9700\u5c06\u6dfb\u52a0\u7684 <code>js</code> \u653e\u5165\u9875\u9762\u4e2d\uff0c\u5219\u9700\u8981\u8c03\u6574 <code>/acapp/game/static/js/src/zbase.js</code> \u6587\u4ef6\u3002</p> <pre><code>// /acapp/game/static/js/src/menu/zbase.js\nclass AcGameMenu {\nconstructor(root) { // \u4f20\u5165\u7684\u662f\u603b\u5bf9\u8c61\uff0cHTML\u4e2dnew\u51fa\u6765\u7684 ac_game\nthis.root = root; // \u8bb0\u5f55\u5bf9\u8c61\u4fe1\u606f\nthis.$menu = $(`\n        &lt;div class=\"ac-game-menu\"&gt;&lt;/div&gt;\n        `);\nthis.root.$ac_game.append(this.$menu);\n}\n}\n</code></pre> <pre><code>/* /acapp/game/static/css/game.css */\n.ac-game-menu {\nwidth: 100%;\nheight: 100%;\nbackground-image: url(\"/static/image/menu/background.gif\");\nbackground-size: 100% 100%;\n}\n</code></pre> <pre><code>// /acapp/game/static/js/src/zbase.js\nclass AcGame {\nconstructor(id) {   this.id = id;\nthis.$ac_game = $('#' + id);\nthis.menu = new AcGameMenu(this);\n}\n}\n</code></pre> <p>\u5728\u5237\u65b0\u9875\u9762\u4e4b\u524d\uff0c\u9700\u8981\u5148\u6253\u5305\uff0c\u8fdb\u5165\u6587\u4ef6\u5939 <code>/acapp/scripts/</code> \u6267\u884c <code>./compress_game_js.sh</code>\u3002</p>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%BA%8C%E3%80%81%E5%88%9B%E5%BB%BA%E8%8F%9C%E5%8D%95%E7%95%8C%E9%9D%A2/#32","title":"3.2 \u521b\u5efa\u83dc\u5355\u9009\u9879","text":"<p>\u5728\u6587\u4ef6 <code>/acapp/game/static/js/src/menu/zbase.js</code> \u8fdb\u884c\u4fee\u6539\uff0c\u540c\u65f6\u9700\u8981\u5bf9\u5176\u6837\u5f0f\u8fdb\u884c\u4fee\u6539</p> <pre><code>// /acapp/game/static/js/src/menu/zbase.js\nclass AcGameMenu {\nconstructor(root) { // \u4f20\u5165\u7684\u662f\u603b\u5bf9\u8c61\uff0cHTML\u4e2dnew\u51fa\u6765\u7684 ac_game\nthis.root = root; // \u8bb0\u5f55\u5bf9\u8c61\u4fe1\u606f\n// \u8bbe\u7f6e\u83dc\u5355\uff1a\u80cc\u666f\u3001\u83dc\u5355\u6309\u94ae\nthis.$menu = $(`\n        &lt;div class=\"ac-game-menu\"&gt;\n            &lt;div class=\"ac-game-menu-field\"&gt;\n                &lt;div class=\"ac-game-menu-field-item ac-game-menu-field-item-single-mode\"&gt;\u5355\u4eba\u6a21\u5f0f&lt;/div&gt;\n                &lt;br&gt;\n                &lt;div class=\"ac-game-menu-field-item ac-game-menu-field-item-multi-mode\"&gt;\u591a\u4eba\u6a21\u5f0f&lt;/div&gt;\n                &lt;br&gt;\n                &lt;div class=\"ac-game-menu-field-item ac-game-menu-field-item-settings\"&gt;\u8bbe\u7f6e&lt;/div&gt;\n            &lt;/div&gt; \n        &lt;/div&gt; \n       `);\nthis.root.$ac_game.append(this.$menu);\nthis.$single_mode = this.$menu.find('.ac-game-menu-field-item-single-mode');\nthis.$multi_mode = this.$menu.find('.ac-game-menu-field-item-multi-mode');\nthis.$settings = this.$menu.find('.ac-game-menu-field-item-settings');\nthis.start();\n}\nstart() {\nthis.add_listening_events();\n}\nadd_listening_events() {\nlet outer = this;\nthis.$single_mode.click(function(){\nconsole.log(\"click single mode\");\n});\nthis.$multi_mode.click(function(){\nconsole.log(\"click multi mode\");\n});\nthis.$settings.click(function(){\nconsole.log(\"click settings\");\n});\n}\n}\n</code></pre> <pre><code>/* /acapp/game/static/css/game.css */\n.ac-game-menu {\nwidth: 100%;\nheight: 100%;\nbackground-image: url(\"/static/image/menu/background.gif\");\nbackground-size: 100% 100%;\nuser-select: none;\n}\n.ac-game-menu-field {\nwidth: 20vw;\nposition: relative;\ntop: 40vh;\nleft: 19vw;\n}\n.ac-game-menu-field-item {\nheight: 7vh;\nwidth: 18vw;\ncolor: white;\nfont-size: 6vh;\nfont-style: italic;\npadding: 2vh;\ncursor: pointer;\ntext-align: center;\nbackground-color: rgba(39, 21, 28, 0.6);\nborder-radius: 10px;\nletter-spacing: 0.5vw;\n}\n/* \u8bbe\u7f6e\u9f20\u6807\u60ac\u6d6e\u6837\u5f0f */\n.ac-game-menu-field-item:hover {\ntransform: scale(1.2);\ntransition: 100ms;\n}\n</code></pre> <p>\u8fdb\u5165\u6587\u4ef6\u5939 <code>/acapp/game/static/js/src/playground</code> \u521b\u5efa\u6587\u4ef6 <code>zbase.js</code></p> <pre><code>// /acapp/game/static/js/src/playground/zbase.js\nclass AcGamePlayground {\nconstructor(root) {\nthis.root = root;\nthis.$playground = $(`&lt;div&gt;\u6e38\u620f\u754c\u9762&lt;/div&gt;`);\nthis.hide();\nthis.root.$ac_game.append(this.$playground);\nthis.start();\n}\nstart() {\n}\nshow() { // \u6253\u5f00playground\u754c\u9762\nthis.$playground.show();\n}\nhide() { // \u5173\u95edplayground\u754c\u9762\nthis.$playground.hide();\n}\n}\n</code></pre> <p>\u56de\u5230\u6587\u4ef6 <code>/acapp/game/static/js/src/zbase.js</code></p> <pre><code>class AcGame {\nconstructor(id) {   this.id = id;\nthis.$ac_game = $('#' + id);\nthis.menu = new AcGameMenu(this);\nthis.playground = new AcGamePlayground(this);\nthis.start();\n}\nstart() {\n}\n}\n</code></pre> <p>\u4e0b\u9762\u5b9e\u73b0\u754c\u9762\u5207\u6362\uff0c\u56de\u5230\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/menu/zbase.js</code> \u4e2d\u4fee\u6539 <code>click</code> \u4e8b\u4ef6\uff0c</p> <pre><code> add_listening_events() {\nlet outer = this;\nthis.$single_mode.click(function(){\nouter.hide(); // \u9690\u85cf\u5f53\u524d\u754c\u9762\nouter.root.playground.show(); // \u6253\u5f00\u6e38\u620f\u754c\u9762\n});\nthis.$multi_mode.click(function(){\nconsole.log(\"click multi mode\");\n});\nthis.$settings.click(function(){\nconsole.log(\"click settings\");\n});\n}\n</code></pre> <p>\u5728\u5237\u65b0\u9875\u9762\u4e4b\u524d\uff0c\u9700\u8981\u5148\u6253\u5305\uff0c\u8fdb\u5165\u6587\u4ef6\u5939 <code>/acapp/scripts/</code> \u6267\u884c <code>./compress_game_js.sh</code>\u3002</p>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%BA%94%E3%80%81%E5%88%9B%E5%BB%BA%E8%B4%A6%E5%8F%B7%E7%B3%BB%E7%BB%9F/","title":"\u7b2c\u4e94\u7ae0 \u521b\u5efa\u8d26\u53f7\u7cfb\u7edf","text":"<p>\u9996\u5148\uff0c\u4e3a\u4e86\u65b9\u4fbf\u8c03\u8bd5\uff0c\u5728\u6587\u4ef6 <code>/home/acs/acapp/acapp/settings.py</code> \u4e2d\u5c06 <code>DEBUG</code> \u4fee\u6539\u4e3a <code>True</code>\uff0c\u5426\u5219\u51fa\u9519\u8bef\u65f6\u524d\u7aef\u4e0d\u4f1a\u62a5\u5177\u4f53\u9519\u8bef\uff0c\u53ea\u4f1a\u663e\u793a\u4e00\u4e2a\u9519\u8bef\u4ee3\u7801\uff1a  <code>DEBUG = True</code></p>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%BA%94%E3%80%81%E5%88%9B%E5%BB%BA%E8%B4%A6%E5%8F%B7%E7%B3%BB%E7%BB%9F/#_1","title":"\u4e00\u3001\u6dfb\u52a0\u540e\u53f0\u8d26\u53f7\u7ba1\u7406\u8868","text":"<p>\u767b\u5f55 <code>Django</code> \u540e\u53f0\u53ef\u67e5\u770b\u5176\u81ea\u5e26\u7684\u4e00\u4e2a\u8d26\u53f7\u7cfb\u7edf\uff0c\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165\uff1a<code>\u7cfb\u7edf\u5206\u914d\u7684\u7f51\u5740/admin</code> \u5373\u53ef\u8fdb\u5165\u540e\u53f0\u3002\u5176\u4e2d\u7684 <code>Users</code> \u4e00\u680f\u5373\u662f <code>Django</code> \u81ea\u5e26\u7684\u666e\u901a\u7528\u6237\u7ba1\u7406\u7cfb\u7edf\uff0c\u53ef\u4ee5\u6dfb\u52a0\u548c\u5220\u9664\u7528\u6237\u3002\u4f46\u662f\u8fd9\u6837\u7684\u7528\u6237\u7ba1\u7406\u7cfb\u7edf\u65e0\u6cd5\u6ee1\u8db3\u8981\u6c42\uff0c\u6240\u4ee5\u9700\u8981\u8fdb\u4e00\u6b65\u6269\u5c55\u8fd9\u4e2a\u7cfb\u7edf\u3002</p> <p>\u5982\u679c\u5fd8\u8bb0\u5bc6\u7801\uff0c\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u8d85\u7ea7\u7528\u6237\uff1a<code>pyhtong3 manage.py createsuperuser</code></p> <p>\u4fee\u6539\u7ba1\u7406\u5458\u8d26\u6237\u5bc6\u7801\uff1a<code>python3 manage.py changepassword \u7528\u6237\u540d</code></p> <p>\u8fdb\u5165\u6587\u4ef6\u5939 <code>/home/acs/acapp/game/models</code> \u4e0b\u521b\u5efa\u6587\u4ef6\u5939 <code>player</code> \u5e76\u5728\u91cc\u9762\u521b\u5efa<code>python</code>\u6587\u4ef6 <code>__init.py__</code>\uff0c\u540c\u65f6\u521b\u5efa\u6587\u4ef6 <code>play.py</code>\uff0c\u5e76\u5199\u5165\uff1a</p> <pre><code>from django.db import models\nfrom django.contrib.auth.models import User\nclass Player(models.Model):\nuser = models.OneToOneField(User, on_delete=models.CASCADE) # \u521b\u5efa\u4e00\u4e2a\u7c7b\u4f3c\u539f\u59cbUSER\u7684\u4e00\u4e00\u5bf9\u5e94\u7684\u8868\uff0cCASCADE\u6307\u5f53USER\u88ab\u5220\u9664\u9700\u8981\u5c06\u5173\u8054\u7684user\u4e00\u8d77\u5220\u9664\u3002\nphoto = models.URLField(max_length=256, blank=True) # \u7167\u7247\uff1a\u6700\u5927\u957f\u5ea6\uff0c\u53ef\u7a7a\ndef __str__(self):\nreturn str(self.user)\n</code></pre> <p>__Tips\uff1a__\u5982\u679c\u5fd8\u8bb0 <code>django</code> \u76f8\u5173\u6307\u4ee4\uff0c\u53ef\u4ee5\u5728\u6587\u4ef6\u5939 <code>/acapp</code> \u4e0b\u9762\u6267\u884c <code>python3 manage.py shell</code>\uff0c\u4f1a\u4ea7\u751f\u4e00\u4e2a\u4ea4\u4e92\u5f0f\u7684\u547d\u4ee4\u884c\uff0c\u6bcf\u6b21\u8f93\u5165\u547d\u4ee4\u4f1a\u6709\u63d0\u793a\u3002</p> <p>\u521b\u5efa\u5b8c\u8868 <code>Player</code> \u4e4b\u540e\uff0c\u5982\u679c\u5e0c\u671b\u5728\u7ba1\u7406\u5458\u9875\u9762\u770b\u89c1\uff0c\u9700\u8981\u5c06\u5176\u6ce8\u518c\u5230\u6587\u4ef6 <code>/home/acs/acapp/game/admin.py</code> \u4e2d\uff1a</p> <pre><code>from django.contrib import admin\nfrom game.models.player.player import Player\n# Register your models here.\nadmin.site.register(Player)\n</code></pre> <p>\u6b64\u5916\uff0c\u6bcf\u6b21\u5bf9\u6570\u636e\u8868\u5b9a\u4e49\u66f4\u65b0\u4e4b\u540e\uff0c\u90fd\u9700\u8981\u6267\u884c\uff1a</p> <pre><code>python3 manage.py makemigrations\npython3 manage.py migrate\n</code></pre> <p>\u91cd\u542f\u4e00\u4e0b <code>uwsgi</code> \u670d\u52a1\uff1a<code>uwsgi --ini scripts/uwsgi.ini</code>\uff0c\u6253\u5f00\u9875\u9762\u5373\u53ef\u770b\u89c1\u5982\u4e0b\uff1a</p> <p>\u53ef\u4ee5\u5728 <code>Players</code> \u4e2d\u6dfb\u52a0\u4e00\u4e2a\u73a9\u5bb6\uff1a</p>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%BA%94%E3%80%81%E5%88%9B%E5%BB%BA%E8%B4%A6%E5%8F%B7%E7%B3%BB%E7%BB%9F/#_2","title":"\u4e8c\u3001\u521b\u5efa\u767b\u5f55\u754c\u9762","text":"<p>\u8fd9\u91cc\u524d\u7aef\u540e\u7aef\u8fdb\u884c\u6570\u636e\u8c03\u7528\u7684\u8fc7\u7a0b\u5982\u4e0b\uff1a</p> <p></p> <p>\u6bcf\u4e2a\u7bad\u5934\u4ee3\u8868\u4e00\u4e2a\u51fd\u6570\uff0c\u6bcf\u4e2a\u51fd\u6570\u90fd\u9700\u8981\u5b9e\u73b0\u4e09\u4e2a\u4e1c\u897f\uff1a</p> <ul> <li><code>views</code>\uff1a\u8c03\u7528\u6570\u636e\u5e93\u903b\u8f91</li> <li><code>urls</code>\uff1a\u5b9e\u73b0\u8def\u7531</li> <li><code>js</code>\uff1a\u524d\u7aef\u5b9e\u73b0\u8c03\u7528</li> </ul> <p>\u5728\u5904\u7406\u6570\u636e\u4e4b\u524d\uff0c\u4e3a\u4e86\u533a\u5206\u4ece\u524d\u7aef\u4f20\u5230\u670d\u52a1\u5668\u7684\u6570\u636e\u662f\u4ece\u54ea\u79cd\u524d\u7aef\u4f20\u8fc7\u6765\u7684\uff0ce.g. \u624b\u673a\u3001web \u7b49\u3002\u9700\u8981\u4fee\u6539\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/zbase.js</code></p> <pre><code>export class AcGame {\nconstructor(id, AcWingOS) {  // \u5982\u679c\u5b58\u5728\u53c2\u6570 AcWingOS\uff0c\u5219\u6e38\u620f\u5728 AcApp \u4e2d\u6267\u884c\uff0c\u5426\u5219\u5728 web \u4e2d\u6267\u884c\nthis.id = id;\nthis.$ac_game = $('#' + id);\nthis.AcWingOS = AcWingOS; // \u6b64\u5904\u6dfb\u52a0\nthis.menu = new AcGameMenu(this);\nthis.playground = new AcGamePlayground(this);\nthis.start();\n}\nstart() {\n}\n}\n</code></pre> <p>\u8fdb\u5165\u6587\u4ef6\u5939 <code>/home/acs/acapp/game/views/settings</code>\uff0c\u4ee5\u540e\u6240\u6709\u7528\u6237\u76f8\u5173\u4fe1\u606f\u653e\u5728\u8be5\u6587\u4ef6\u5939\u4e0b\u3002\u521b\u5efa\u6587\u4ef6 <code>getinfo.py</code>\uff1a</p> <pre><code>from django.http import JsonResponse\nfrom game.models.player.player import Player\ndef getinfo_acapp(request):\nplayer = Player.objects.all()[0] # \u53d6\u7b2c\u4e00\u4e2a\u73a9\u5bb6\nreturn JsonResponse({\n'result': \"success\",\n'username': player.user.username,\n'photo': player.photo,\n})\ndef getinfo_web(request):\nuser = request.user\nif not user.is_authenticated: # \u5982\u679c\u7528\u6237\u672a\u767b\u5f55\nreturn JsonResponse({\n'result': \"\u672a\u767b\u5f55\"\n})\nelse:\nplayer = Player.objects.all()[0] # \u53d6\u7b2c\u4e00\u4e2a\u73a9\u5bb6\nreturn JsonResponse({\n'result': \"success\",\n'username': player.user.username,\n'photo': player.photo,\n})\ndef getinfo(request):  # \u6bcf\u6b21\u8c03\u7528\u90fd\u4f1a\u4f20\u5165\u4e00\u4e2a\u8bf7\u6c42\nplatform = request.GET.get(\"platform\") # \u5224\u65ad\u4ece\u4ec0\u4e48\u5e73\u53f0\u4f20\u5165\nif platform == \"ACAPP\":\nreturn getinfo_acapp(request)\nelif platform == \"WEB\":\nreturn getinfo_web(request)\n</code></pre> <p>\u4e0b\u9762\u5199\u8def\u7531\uff0c\u8fdb\u5165\u6587\u4ef6 <code>game/urls/settings/index.py</code> \u4fee\u6539\uff1a</p> <pre><code>from django.urls import path, include\nfrom game.views.settings.getinfo import getinfo # \u6b64\u5904\u6dfb\u52a0\nurlpatterns = [\npath(\"getinfo/\", getinfo, name=\"settings_getinfo\"), # \u6b64\u5904\u6dfb\u52a0\n]\n</code></pre> <p>\u91cd\u542f\u4e00\u4e0b <code>uwsgi</code> \u670d\u52a1\uff1a<code>uwsgi --ini scripts/uwsgi.ini</code>\uff0c\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165 <code>https://app4588.acapp.acwing.com.cn/settings/getinfo/</code>\uff0c\u53ef\u4ee5\u770b\u89c1\u8fd4\u56de\u5b57\u7b26 <code>{\"result\": \"success\", \"username\": \"lumoumou\", \"photo\": \"https://pic4.zhimg.com/v2-5c2578612d6920d0858d6b8617f97ac8_r.jpg?source=1940ef5c\"}</code>\u3002</p> <p>\u7528\u4e4b\u524d\u7684\u4ee3\u7801\uff0c\u6d4f\u89c8\u5668\u4e2d\u4e00\u8f93\u5165 <code>https://app4588.acapp.acwing.com.cn/</code> \u5c31\u8fdb\u5165\u4e86\u6e38\u620f\u83dc\u5355\u754c\u9762\uff0c\u8fd9\u6837\u4e0d\u5408\u7406\uff0c\u6240\u4ee5\u9700\u8981\u5728\u8fd9\u4e2a\u754c\u9762\u4e4b\u524d\u5728\u6dfb\u52a0\u4e00\u4e2a\u767b\u5f55\u754c\u9762\u3002</p> <p>\u8fdb\u5165\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/menu/zbase.js</code>\uff0c\u7531\u4e8e\u4e00\u4e0a\u6765\u9700\u8981\u6253\u5f00\u767b\u5f55\u754c\u9762\uff0c\u6240\u4ee5\u83dc\u5355\u754c\u9762\u5c31\u5e94\u8be5\u5148\u5173\u95ed\uff0c</p> <pre><code>class AcGameMenu {\nconstructor(root) { // \u4f20\u5165\u7684\u662f\u603b\u5bf9\u8c61\uff0cHTML\u4e2dnew\u51fa\u6765\u7684 ac_game\nthis.root = root; // \u8bb0\u5f55\u5bf9\u8c61\u4fe1\u606f\n// \u8bbe\u7f6e\u83dc\u5355\uff1a\u80cc\u666f\u3001\u83dc\u5355\u6309\u94ae\nthis.$menu = $(`\n        &lt;div class=\"ac-game-menu\"&gt;\n            &lt;div class=\"ac-game-menu-field\"&gt;\n                &lt;div class=\"ac-game-menu-field-item ac-game-menu-field-item-single-mode\"&gt;\u5355\u4eba\u6a21\u5f0f&lt;/div&gt;\n                &lt;br&gt;\n                &lt;div class=\"ac-game-menu-field-item ac-game-menu-field-item-multi-mode\"&gt;\u591a\u4eba\u6a21\u5f0f&lt;/div&gt;\n                &lt;br&gt;\n                &lt;div class=\"ac-game-menu-field-item ac-game-menu-field-item-settings\"&gt;\u8bbe\u7f6e&lt;/div&gt;\n            &lt;/div&gt; \n        &lt;/div&gt; \n       `);\nthis.$menu.hide(); // \u6b64\u5904\u6dfb\u52a0\u5173\u95ed\nthis.root.$ac_game.append(this.$menu);\n...\n...\n</code></pre> <p>\u7531\u4e8e\u9700\u8981\u5148\u5224\u65ad\u7528\u6237\u662f\u5426\u767b\u5f55\uff0c\u6240\u4ee5\u9700\u8981\u521b\u5efa\u65b0\u6a21\u5757\uff0c\u5728\u6587\u4ef6\u5939 <code>/home/acs/acapp/game/static/js/src/settings</code> \u521b\u5efa\u6587\u4ef6 <code>zbase.js</code>\uff0c</p> <pre><code>class Settings {\nconstructor(root) {\nthis.root = root;\nthis.platform = \"WEB\";\nif (this.root.AcWingOS) this.platform = \"ACAPP\";\nthis.start();\n}\nstart() {\nthis.getinfo(); // \u91cd\u670d\u52a1\u5668\u7aef\u83b7\u53d6\u4fe1\u606f\n}\nregister() { // \u6253\u5f00\u6ce8\u518c\u754c\u9762\n}\nlogin() { // \u6253\u5f00\u767b\u5f55\u754c\u9762\n}\ngetinfo() {\nlet outer = this;\n$.ajax({\nurl: \"https://app4588.acapp.acwing.com.cn/settings/getinfo/\",\ntype: \"GET\",\ndata: {\nplatform: outer.platform,\n},\nsuccess: function(resp) {\nconsole.log(resp);\nif (resp.result === \"success\") {\nouter.hide();\nouter.root.menu.show();\n} else {\nouter.login();\n}\n}\n})\n}\nhide() {\n}\nshow() {\n}\n}\n</code></pre> <p>\u5728\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/zbase.js</code> \u4e2d\u521b\u5efa\u521a\u624d\u5199\u7684 <code>settings</code>\u3002</p> <pre><code>export class AcGame {\nconstructor(id, AcWingOS) {\nthis.id = id;\nthis.$ac_game = $('#' + id);\nthis.AcWingOS = AcWingOS;\nthis.settings = new Settings(this); // \u6b64\u5904\u6dfb\u52a0\nthis.menu = new AcGameMenu(this);\nthis.playground = new AcGamePlayground(this);\nthis.start();\n}\nstart() {\n}\n}\n</code></pre> <p>\u5728\u6839\u76ee\u5f55 <code>/acapp</code> \u4e0b\u6267\u884c\u4e00\u4e0b\u6253\u5305\u51fd\u6570\u5e76\u91cd\u542f\u670d\u52a1\u5668\uff1a</p> <pre><code>./scripts/compress_game_js.sh\nuwsgi --ini scripts/uwsgi.ini\n</code></pre> <p>\u8fd9\u4e2a\u65f6\u5019\u5728\u6d4f\u89c8\u5176\u4e2d\u660e\u660e\u672a\u767b\u5f55\uff0c\u5374\u5728\u63a7\u5236\u5929\u663e\u793a\u767b\u5f55\uff1a</p> <pre><code>{result: 'success', username: 'lumoumou', photo: 'https://pic4.zhimg.com/v2-5c2578612d6920d0858d6b8617f97ac8_r.jpg?source=1940ef5c'}\nphoto: =\"https://pic4.zhimg.com/v2-5c2578612d6920d0858d6b8617f97ac8_r.jpg?source=1940ef5c\"\nresult: =\"success\"\nusername: \"lumoumou\"\n[[Prototype]]: Object\n</code></pre> <p>\u56e0\u4e3a\u8fd9\u91cc\u524d\u7aef\u548c\u540e\u7aef\u4f7f\u7528\u540c\u4e00\u5957\u767b\u5f55\u7cfb\u7edf\uff0c\u5982\u679c\u60f3\u8981\u663e\u793a <code>\u672a\u767b\u5f55</code>\uff0c\u9700\u8981\u5728\u540e\u7aef\u9000\u51fa\uff0c</p> <p></p> <p>\u8fd9\u4e2a\u65f6\u5019\u5728\u70b9\u5f00\u7f51\u9875\u5c31\u4f1a\u663e\u793a\u5982\u4e0b\uff0c\u767d\u8272\u90e8\u5206\u4e3a\u767d\u8272\u80cc\u666f\uff0c\u8fd9\u4e2a\u65f6\u5019\u8fd8\u6ca1\u5199\u767b\u5f55\u754c\u9762</p> <p></p>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%BA%94%E3%80%81%E5%88%9B%E5%BB%BA%E8%B4%A6%E5%8F%B7%E7%B3%BB%E7%BB%9F/#_3","title":"\u4e09\u3001\u5b58\u50a8\u7528\u6237\u4fe1\u606f\u548c\u52a0\u8f7d\u7528\u6237\u5934\u50cf\u5230\u6e38\u620f\u4e2d","text":"<p>\u4e0b\u9762\u5b9e\u73b0\u5c06\u4fe1\u606f\u5b58\u50a8\u4e0b\u6765\u5e76\u6e32\u67d3\u5230\u6e38\u620f\u5c0f\u7403\u4e2d\u3002</p> <p>\u5728\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/settings/zbase.js</code> \u4e2d\u4fee\u6539\u4ee5\u5b58\u50a8\u4fe1\u606f\uff1a</p> <pre><code>class Settings {\nconstructor(root) {\nthis.root = root;\nthis.platform = \"WEB\";\nif (this.root.AcWingOS) this.platform = \"ACAPP\";\nthis.name = \"\"; // \u6b64\u5904\u6dfb\u52a0\uff1a\u5b58\u50a8\u7528\u6237\u540d\u79f0\nthis.photo = \"\"; // \u6b64\u5904\u6dfb\u52a0\uff1a\u5b58\u50a8\u7528\u6237\u7167\u7247\nthis.start();\n}\n...\n...\nsuccess: function(resp) {\nconsole.log(resp);\nif (resp.result === \"success\") {\nouter.username = resp.username; // \u6b64\u5904\u6dfb\u52a0\nouter.photo = resp.photo; // \u6b64\u5904\u6dfb\u52a0\nouter.hide();\nouter.root.menu.show();\n...\n</code></pre> <p>\u5728\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/playground/player/zbase.js</code> \u4fee\u6539\uff0c\u4ee5\u8c03\u7528\u56fe\u7247\u7ed8\u5236\u5934\u50cf\uff1a</p> <pre><code>class Player extends AcGameObject {\nconstructor(playground, x, y, radius, color, speed, is_me) {\n...\nthis.cur_skill = null;\n// \u6b64\u5904\u6dfb\u52a0\nif (this.is_me) { // \u5224\u65ad\u662f\u5426\u662f\u81ea\u5df1\uff0c\u53ea\u7ed9\u81ea\u5df1\u753b\nthis.img = new Image();\nthis.img.src = this.playground.root.settings.photo;\n}\n}\n...\n...\nrender() { // \u6b64\u5904\u4fee\u6539\nif (this.is_me) { // \u5982\u679c\u662f\u81ea\u5df1\uff0c\u7528\u7167\u7247\u7ed8\u5236\u5934\u50cf\nthis.ctx.save();\nthis.ctx.beginPath();\nthis.ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);\nthis.ctx.stroke();\nthis.ctx.clip();\nthis.ctx.drawImage(this.img, this.x - this.radius, this.y - this.radius, this.radius * 2, this.radius * 2); this.ctx.restore();\n} else { // \u5982\u679c\u662f\u654c\u4eba\uff0c\u7ed8\u5236\u989c\u8272\nthis.ctx.beginPath();\nthis.ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);\nthis.ctx.fillStyle = this.color;\nthis.ctx.fill();\n}\n}\n...\n</code></pre> <p>\u5728\u6839\u76ee\u5f55 <code>/acapp</code> \u4e0b\u6267\u884c\u4e00\u4e0b\u6253\u5305\u51fd\u6570\u5e76\u91cd\u542f\u670d\u52a1\u5668\uff1a</p> <pre><code>./scripts/compress_game_js.sh\nuwsgi --ini scripts/uwsgi.ini\n</code></pre> <p>\u8fd9\u4e2a\u65f6\u5019\u8fdb\u5165\u7f51\u9875\u70b9\u51fb\u5355\u4eba\u6a21\u5f0f\u4f1a\u6709\u5982\u4e0b\u6548\u679c\uff1a</p> <p></p> <p>\u5982\u679c\u5728 <code>AcApp</code> \u7aef\u53d1\u73b0\u4f9d\u7136\u6ca1\u6709\u53d8\u5316\u5219\u53ef\u4ee5 <code>command + shift + r</code> \u786c\u5237\u65b0\u4e00\u6b21\u3002</p>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%BA%94%E3%80%81%E5%88%9B%E5%BB%BA%E8%B4%A6%E5%8F%B7%E7%B3%BB%E7%BB%9F/#_4","title":"\u56db\u3001\u6e32\u67d3\u7528\u6237\u767b\u5f55\u754c\u9762","text":""},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%BA%94%E3%80%81%E5%88%9B%E5%BB%BA%E8%B4%A6%E5%8F%B7%E7%B3%BB%E7%BB%9F/#1","title":"1\u3001\u521b\u5efa\u80cc\u666f\uff08\u8fd9\u91cc\u8bbe\u7f6e\u7684\u80cc\u666f\u4e0e\u83dc\u5355\u9875\u9762\u80cc\u666f\u56fe\u7247\u76f8\u540c\uff09","text":"<p>\u5728\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/settings/zbase.js</code> \u4e2d\u4fee\u6539\uff1a</p> <pre><code>class Settings {\nconstructor(root) {\nthis.root = root;\nthis.platform = \"WEB\";\nif (this.root.AcWingOS) this.platform = \"ACAPP\";\nthis.name = \"\";\nthis.photo = \"\"; // \u6b64\u5904\u6dfb\u52a0\nthis.$settings = $(`\n            &lt;div class=\"ac-game-settings\"&gt;\n            &lt;/div&gt;\n        `)\nthis.root.\nthis.root.$ac_game.append(this.$settings);\nthis.start();\n}\n...\n...\nhide() {\nthis.$settings.hide(); // \u6b64\u5904\u6dfb\u52a0\n}\nshow() {\nthis.$settings.show(); // \u6b64\u5904\u6dfb\u52a0\n}\n}\n</code></pre> <p>\u5728\u6587\u4ef6 <code>/home/acs/acapp/game/static/css/game.css</code> \u4e2d\u4fee\u6539\uff1a</p> <pre><code>.ac-game-settings { /* \u6b64\u5904\u6dfb\u52a0 */\nwidth: 100%;\nheight: 100%;\nbackground-image: url(\"/static/image/menu/background.gif\");\nbackground-size: 100% 100%;\nuser-select: none;\n}\n.ac-game-menu {\nwidth: 100%;\n...\n...\n</code></pre> <p>\u5728\u6839\u76ee\u5f55 <code>/acapp</code> \u4e0b\u6267\u884c\u4e00\u4e0b\u6253\u5305\u51fd\u6570\u5e76\u91cd\u542f\u670d\u52a1\u5668\uff1a</p> <pre><code>./scripts/compress_game_js.sh\nuwsgi --ini scripts/uwsgi.ini\n</code></pre> <p>\u8fd9\u4e2a\u65f6\u5019\u8fdb\u5165\u7f51\u9875\uff08\u540e\u53f0\u672a\u767b\u5f55\u60c5\u51b5\u4e0b\uff09\u4f1a\u5728\u63a7\u5236\u53f0\u663e\u793a\uff1a<code>{result: '\u672a\u767b\u5f55'}</code></p>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%BA%94%E3%80%81%E5%88%9B%E5%BB%BA%E8%B4%A6%E5%8F%B7%E7%B3%BB%E7%BB%9F/#2","title":"2\u3001\u521b\u5efa\u767b\u5f55\u6846\u3001\u6ce8\u518c\u6846","text":"<p>\u6ce8\u610f\u4e0b\u8f7d <code>AcWing logo</code>\uff0c\u5728\u6587\u4ef6\u5939\u4e0b <code>/home/acs/acapp/game/static/image/settings</code> \u6267\u884c <code>wget https://cdn.acwing.com/media/article/image/2021/11/18/1_ea3d5e7448-logo64x64_2.png</code>\uff0c\u5e76\u91cd\u547d\u540d\u4e3a <code>acwing_logo.png</code></p> <p>\u5728\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/settings/zbase.js</code> \u4e2d\u4fee\u6539\uff1a</p> <pre><code>    ...\nif (this.root.AcWingOS) this.platform = \"ACAPP\";\nthis.name = \"\";\nthis.photo = \"\"; // \u6b64\u5904\u6dfb\u52a0\nthis.$settings = $(`\n            &lt;div class=\"ac-game-settings\"&gt;\n                &lt;div class=\"ac-game-settings-login\"&gt;&lt;/div&gt; \n                &lt;div class=\"ac-game-settings-register\"&gt;&lt;/div/\n            &lt;/div&gt;\n        `);\n// \u6b64\u5904\u6dfb\u52a0\nthis.$login = this.$settings.find(\".ac-game-settings-login\");\nthis.$login.hide();\n// \u6b64\u5904\u6dfb\u52a0\nthis.$register = this.$settings.find(\".ac-game-settings-register\");\nthis.$register.hide();\nthis.root.$ac_game.append(this.$settings);\nthis.start();\n}\nstart() {\nthis.getinfo(); }\n// \u6b64\u5904\u4fee\u6539\nregister() { this.$login.hide();\nthis.$register.show();\n}\n// \u6b64\u5904\u4fee\u6539\nlogin() { this.$register.hide();\nthis.$login.show();\n}\ngetinfo() {\n...\n</code></pre> <p>\u5728\u6587\u4ef6 <code>/home/acs/acapp/game/static/css/game.css</code> \u4e2d\u6dfb\u52a0\uff1a</p> <pre><code>.ac-game-settings-login {\nheight: 41vh;\nwidth: 20vw;\nposition: relative;\ntop: 50%;\nleft: 50%;\ntransform: translate(-50%, -50%);\nbackground-color: rgba(0, 0, 0, 0.7);\n}\n.ac-game-settings-register {\nheight: 49vh;\nwidth: 20vw;\nposition: relative;\ntop: 50%;\nleft: 50%;\ntransform: translate(-50%, -50%);\nbackground-color: rgba(0, 0, 0, 0.7);\n}\n</code></pre>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%BA%94%E3%80%81%E5%88%9B%E5%BB%BA%E8%B4%A6%E5%8F%B7%E7%B3%BB%E7%BB%9F/#_5","title":"\u4e94\u3001\u5b9e\u73b0\u8c03\u7528\uff08\u524d\u540e\u7aef\u4ea4\u4e92\uff09","text":""},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%BA%94%E3%80%81%E5%88%9B%E5%BB%BA%E8%B4%A6%E5%8F%B7%E7%B3%BB%E7%BB%9F/#1-login","title":"1. \u5b9e\u73b0 login","text":"<p>\u9996\u5148\u5728\u6587\u4ef6\u5939 <code>/home/acs/acapp/game/views/settings</code> \u4e0b\u65b0\u5efa\u6587\u4ef6 <code>login.py</code></p> <pre><code>from django.http import JsonResponse\nfrom django.contrib.auth import authenticate, login\ndef signin(request):\ndata = request.GET\nusername = data.get('username')\npassword = data.get('password')\nuser = authenticate(username=username, password=password) # \u4e0e\u6570\u636e\u5e93\u4e2d\u6570\u636e\u6bd4\u5bf9\nif not user:\nreturn JsonResponse({\n'result': \"\u7528\u6237\u540d\u6216\u8005\u5bc6\u7801\u4e0d\u6b63\u786e\"\n})\nlogin(request, user)\nreturn JsonResponse({\n'result': \"success\"\n})\n</code></pre> <p>\u518d\u5230\u6587\u4ef6 <code>/home/acs/acapp/game/urls/settings/index.py</code> \u6dfb\u52a0\u8def\u7531\uff1a</p> <pre><code>from django.urls import path, include\nfrom game.views.settings.getinfo import getinfo\nfrom game.views.settings.login import signin # \u6b64\u5904\u6dfb\u52a0\nurlpatterns = [\npath(\"getinfo/\", getinfo, name=\"settings_getinfo\"),\npath(\"login/\", signin, name=\"settings_login\"), # \u6b64\u5904\u6dfb\u52a0\n]\n</code></pre> <p>\u56de\u5230\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/settings/zbase.js</code> \u6dfb\u52a0\uff1a</p> <pre><code>        ...\nadd_listening_event_login() {\nlet outer = this;\nthis.$login_register.click(function() { outer.register();\n});\nthis.$login_submit.click(function() { // \u6b64\u5904\u6dfb\u52a0\nouter.login_on_remote();\n})\n}\n...\n// \u6b64\u5904\u6dfb\u52a0\nlogin_on_remote() { // \u5728\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u767b\u5f55\nlet outer = this;\nlet username = this.$login_username.val();\nlet password = this.$login_password.val();\nthis.$login_error_message.empty();\n$.ajax({\nurs: \"https://app4588.acapp.acwing.com.cn/settings/login/\",\ntype: \"GET\",\ndata: {\nusername: username,\npassword: password,\n},\nsuccess: function(resp) {\nconsole.log(resp);\nif (resp.result === \"success\") {\nlocation.reload();\n} else {\nouter.$login_error_message.html(resp.result);\n}\n}\n})\n}\n</code></pre>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%BA%94%E3%80%81%E5%88%9B%E5%BB%BA%E8%B4%A6%E5%8F%B7%E7%B3%BB%E7%BB%9F/#2-logout","title":"2. \u5b9e\u73b0 logout","text":"<p>\u5728\u6587\u4ef6\u5939 <code>/home/acs/acapp/game/views/settings</code> \u4e0b\u9762\u521b\u5efa\u6587\u4ef6 <code>logout.py</code></p> <pre><code>from django.http import JsonResponse\nfrom django.contrib.auth import logout\ndef signout(request):\nuser = request.user\nif not user.is_authenticated: # \u5982\u679c\u5df2\u7ecf\u767b\u5f55\nreturn JsonResponse({\n'result': \"success\",\n})\nlogout(request)\nreturn JsonResponse({\n'result': \"success\",\n})\n</code></pre> <p>\u518d\u5230\u6587\u4ef6 <code>/home/acs/acapp/game/urls/settings/index.py</code> \u6dfb\u52a0\u8def\u7531\uff1a</p> <pre><code>from django.urls import path, include\nfrom game.views.settings.getinfo import getinfo\nfrom game.views.settings.login import signin\nfrom game.views.settings.logout import signout  # \u6b64\u5904\u6dfb\u52a0\nurlpatterns = [\npath(\"getinfo/\", getinfo, name=\"settings_getinfo\"),\npath(\"login/\", signin, name=\"settings_login\"),\npath(\"logout/\", signout, name=\"settings_logout\"),  # \u6b64\u5904\u6dfb\u52a0\n]\n</code></pre> <p>\u56de\u5230\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/settings/zbase.js</code> \u6dfb\u52a0\uff1a</p> <pre><code>    ...\nregitster_on_remote() { // \u5728\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u6ce8\u518c\n}\nlogout_on_remote() { // // \u5728\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u767b\u51fa\nif (this.platform === \"ACAPP\") return false; // \u5982\u679c\u662f\u5728ACAPP\u4e0a\u5c31\u4e0d\u9000\u51fa\n$.ajax({\nurs: \"https://app4588.acapp.acwing.com.cn/settings/logout/\",\ntype: \"GET\",\nsuccess: function(resp) {\nconsole.log(resp);\nif (resp.result === \"success\") {\nlocation.reload();\n}\n}\n})\n}\nregister() { this.$login.hide();\nthis.$register.show();\n}\n...\n</code></pre> <p>\u4e3a\u4e86\u65b9\u4fbf\u8c03\u8bd5\uff0c\u5728\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/menu/zbase.js</code> \u4e2d\u5c06\u83dc\u5355\u4e0a\u7684 <code>\u8bbe\u7f6e</code> \u6539\u4e3a <code>\u9000\u51fa</code>\uff0c\u5e76\u5728\u76d1\u542c\u9f20\u6807\u4e8b\u4ef6\u51fd\u6570\u4e2d\u6dfb\u52a0\u89e6\u53d1\u4e8b\u4ef6\uff1a</p> <pre><code>        ...\n// \u8bbe\u7f6e\u83dc\u5355\uff1a\u80cc\u666f\u3001\u83dc\u5355\u6309\u94ae\nthis.$menu = $(`\n        &lt;div class=\"ac-game-menu\"&gt;\n            &lt;div class=\"ac-game-menu-field\"&gt;\n                &lt;div class=\"ac-game-menu-field-item ac-game-menu-field-item-single-mode\"&gt;\u5355\u4eba\u6a21\u5f0f&lt;/div&gt;\n                &lt;br&gt;\n                &lt;div class=\"ac-game-menu-field-item ac-game-menu-field-item-multi-mode\"&gt;\u591a\u4eba\u6a21\u5f0f&lt;/div&gt;\n                &lt;br&gt;\n                &lt;div class=\"ac-game-menu-field-item ac-game-menu-field-item-settings\"&gt;\u9000\u51fa&lt;/div&gt;\n            &lt;/div&gt; \n        &lt;/div&gt; \n       `);\n...\n...\nadd_listening_events() {\nlet outer = this;\nthis.$single_mode.click(function(){\nouter.hide();\nouter.root.playground.show();\n});\nthis.$multi_mode.click(function(){\nconsole.log(\"click multi mode\");\n});\nthis.$settings.click(function(){\nconsole.log(\"click settings\");\nouter.root.settings.logout_on_remote(); // \u6b64\u5904\u6dfb\u52a0\n});\n}\n...\n</code></pre>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E4%BA%94%E3%80%81%E5%88%9B%E5%BB%BA%E8%B4%A6%E5%8F%B7%E7%B3%BB%E7%BB%9F/#3-register","title":"3. \u5b9e\u73b0 register","text":"<p>\u5728\u6587\u4ef6\u5939 <code>/home/acs/acapp/game/views/settings</code> \u4e0b\u9762\u521b\u5efa\u6587\u4ef6 <code>register.py</code></p> <pre><code>from django.http import JsonResponse\nfrom django.contrib.auth import login\nfrom django.contrib.auth.models import User\nfrom game.models.player.player import Player\ndef register(request): \ndata = request.GET\nusername = data.get(\"username\", \"\").strip() # get\u5982\u679c\u4e3a\u7a7a\u8fd4\u56de\u7a7a\u201c\u201d\uff1b strip()\u53bb\u6389\u524d\u540e\u7a7a\u5b57\u7b26\npassword = data.get(\"password\", \"\").strip()\npassword_confirm = data.get(\"password_confirm\", \"\").strip()\nif not username or not password:\nreturn JsonResponse({\n'result': \"\u7528\u6237\u540d\u548c\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a\",\n})\nif password != password_confirm:\nreturn JsonResponse({\n'result': \"\u4e24\u4e2a\u5bc6\u7801\u4e0d\u4e00\u81f4\",\n})\nif User.objects.filter(username=username).exists():\nreturn JsonResponse({\n'result': \"\u7528\u6237\u540d\u5df2\u5b58\u5728\",\n})\n# \u521b\u5efa User\nuser = User(username=username)\nuser.set_password(password)\nuser.save()\n# \u521b\u5efa Player\uff0c\u8bbe\u7f6e\u4e86\u521d\u59cb\u9ed8\u8ba4\u503c\nPlayer.objects.create(user=user, photo=\"https://pic.3gbizhi.com/2019/0921/20190921112400880.jpg\") # \u4f7f\u7528\u7684\u662f\u9ed8\u8ba4\u7684\u7167\u7247\nlogin(request, user)\nreturn JsonResponse({\n'result': \"success\",\n})\n</code></pre> <p>\u518d\u5230\u6587\u4ef6 <code>/home/acs/acapp/game/urls/settings/index.py</code> \u6dfb\u52a0\u8def\u7531\uff1a</p> <pre><code>from django.urls import path, include\nfrom game.views.settings.getinfo import getinfo\nfrom game.views.settings.login import signin\nfrom game.views.settings.logout import signout\nfrom game.views.settings.register import register # \u6b64\u5904\u6dfb\u52a0\nurlpatterns = [\npath(\"getinfo/\", getinfo, name=\"settings_getinfo\"),\npath(\"login/\", signin, name=\"settings_login\"),\npath(\"logout/\", signout, name=\"settings_logout\"),\npath(\"register/\", register, name=\"sttings_register\"), # \u6b64\u5904\u6dfb\u52a0\n]\n</code></pre> <p>\u56de\u5230\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/settings/zbase.js</code> \u6dfb\u52a0\uff1a</p> <pre><code>   add_listening_event_register() {\nlet outer = this;\nthis.$register_login.click(function() { outer.login();\n});\nthis.$register_submit.click(function() { // \u7ed1\u5b9a\u76d1\u542c\u4e8b\u4ef6\nouter.regitster_on_remote();\n})\n}\n...\nouter.$login_error_message.html(resp.result);\n}\n}\n})\n}\nregitster_on_remote() { // \u5728\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u6ce8\u518c\nlet outer = this;\nlet username = this.$register_username.val();\nlet password = this.$register_password.val();\nlet password_confirm = this.$register_password_confirm.val();\nthis.$register_error_message.empty();\n$.ajax({\nurs: \"https://app4588.acapp.acwing.com.cn/settings/register/\",\ntype: \"GET\",\ndata: {\nusername: username,\npassword: password,\npassword_confirm: password_confirm,\n},\nsuccess: function(resp) {\nconsole.log(resp);\nif (resp.result === \"success\") {\nlocation.reload();\n} else {\nouter.$login_error_message.html(resp.result);\n}\n}\n})\n}   logout_on_remote() { // // \u5728\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u767b\u51fa\n...\n</code></pre> <p>\u5982\u679c\u6210\u529f\u6ce8\u518c\u7528\u6237\u4f1a\u5728\u540e\u53f0\u770b\u89c1\u3002</p> <p>\u8fd9\u8282\u8bfe\u7ed3\u675f\u63d0\u4ea4\u4ee3\u7801</p> <pre><code>git add .\ngit commit -m \"write native login system\"\ngit push\n</code></pre>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E5%85%AD%E3%80%81%E9%85%8D%E7%BD%AEAcWing%E4%B8%80%E9%94%AE%E7%99%BB%E5%BD%95/","title":"\u7b2c\u516d\u7ae0 \u914d\u7f6eAcWing\u4e00\u952e\u767b\u5f55","text":"<p>\u4e0a\u8282\u8bfe\u7684\u4e00\u4e2a bug\uff0c\u5728\u6587\u4ef6 <code>/home/acs/acapp/game/views/settings/getinfo.py</code> \u4e2d</p> <pre><code>...\ndef getinfo_web(request):\nuser = request.user\nif not user.is_authenticated: \nreturn JsonResponse({\n'result': \"\u672a\u767b\u5f55\"\n})\nelse:\n# player = Player.objects.all()[0] \u8fd9\u91cc\u6bcf\u6b21\u90fd\u662f\u67e5\u8be2\u7b2c\u4e00\u4e2a\u7528\u6237\uff1a\u7ba1\u7406\u5458\u7684\u4fe1\u606f\nplayer = Player.objects.get(user=user) # \u53d6\u5f53\u524d\u767b\u5f55\u7528\u6237\u7684\u4fe1\u606f\nreturn JsonResponse({\n'result': \"success\",\n'username': player.user.username,\n'photo': player.photo,\n})\n...\n</code></pre>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E5%85%AD%E3%80%81%E9%85%8D%E7%BD%AEAcWing%E4%B8%80%E9%94%AE%E7%99%BB%E5%BD%95/#django-redis","title":"\u4e00\u3001Django \u4e2d\u96c6\u6210 Redis \u4e0e\u57fa\u672c\u64cd\u4f5c","text":""},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E5%85%AD%E3%80%81%E9%85%8D%E7%BD%AEAcWing%E4%B8%80%E9%94%AE%E7%99%BB%E5%BD%95/#1-redis","title":"1. \u5b89\u88c5\u5e76\u542f\u52a8 redis","text":"<p>Django \u81ea\u5e26\u6570\u636e\u5e93\u662f SqLite\uff0c\u901a\u8fc7\u51e0\u884c\u547d\u4ee4\u53ef\u4ee5\u8fc1\u79fb\u5230 MySQL\u3002</p> <p>Redis \u4e5f\u662f\u6570\u636e\u5e93\uff0c\u4f46\u662f\u5b83\u662f\u5185\u5b58\u6570\u636e\u5e93\uff0c\u8bfb\u53d6\u901f\u5ea6\u9ad8\u4e8e\u4e0a\u9762\u4e24\u4e2a\u6570\u636e\u5e93\u3002</p> <p>Redis \u6570\u636e\u5e93\u7279\u70b9\uff1a</p> <ul> <li>Redis \u4e2d\u5b58\u50a8\u7684\u5168\u90e8\u662f <code>key:value</code> \uff0c\u5176\u4f59\u6570\u636e\u5e93\u5b58\u50a8\u7684\u662f\u8868\uff0c\u8868\u4e2d\u5b58\u50a8\u4e00\u4e2a\u4e00\u4e2a\u6761\u76ee\uff1b</li> <li>Redis \u662f\u5355\u7ebf\u7a0b\uff0c\u4e0d\u4f1a\u51fa\u73b0\u8bfb\u5199\u51b2\u7a81\u3002</li> </ul> <p>\u5728 Django \u4e2d\u96c6\u6210 Redis\uff1a</p> <ol> <li> <p>\u5b89\u88c5 <code>django_redis</code>\uff0c\u5728\u9879\u76ee\u6839\u76ee\u5f55 <code>/acapp/</code> \u4e0b\u6267\u884c\u6307\u4ee4\uff1a<code>pip isntall django_redis==5.0.0</code></p> <p>\u6ce8\u610f\uff1a\u8fd9\u91cc\u4e00\u5b9a\u8981\u6307\u5b9a\u7248\u672c\uff0c\u8ddf\u8bfe\u7a0b\u4fdd\u6301\u4e00\u81f4\uff0c\u5982\u679c\u76f4\u63a5\u5b89\u88c5\uff0c\u5373\u6267\u884c\u6307\u4ee4 <code>pip isntall django_redis</code> \u9519\u8bef\uff1a<code>ModuleNotFoundError: No module named 'django_redis'</code>\uff0c\u67e5\u8be2\u4e86\u539f\u56e0\u662f Redis \u548c Django \u7248\u672c\u4e0d\u517c\u5bb9\u3002</p> </li> <li> <p>\u5728\u6587\u4ef6 <code>/home/acs/acapp/acapp/settings.py</code> \u4e2d\u914d\u7f6e Django \u7684\u7f13\u5b58\u673a\u5236\uff0c\u5c06\u4e0b\u9762\u4ee3\u7801\u6dfb\u52a0\u8fdb\u53bb\u5373\u53ef</p> <pre><code>CACHES = {\n'default': {\n'BACKEND': 'django_redis.cache.RedisCache',\n'LOCATION': 'redis://127.0.0.1:6379/1',\n\"OPTIONS\": {\n\"CLIENT_CLASS\": \"django_redis.client.DefaultClient\",\n},\n},\n}\nUSER_AGENTS_CACHE = 'default'\n</code></pre> </li> <li> <p>\u542f\u52a8 <code>redis-server</code>\uff0c\u5728\u9879\u76ee\u6839\u76ee\u5f55 <code>/acapp/</code> \u4e0b\u6267\u884c\u6307\u4ee4\uff1a<code>sudo redis-server /etc/redis/redis.conf</code></p> <p>\u542f\u52a8\u5b8c\u6210\u4e4b\u540e\uff0c\u4f7f\u7528\u547d\u4ee4 <code>top</code> \u53ef\u4ee5\u67e5\u770b\u5230\u8fdb\u7a0b <code>redis-server</code></p> <p>\u5982\u679c\u9700\u8981\u5173\u95ed <code>redis-server</code>\uff0c\u53ef\u4ee5\u5728 <code>top</code> \u4e2d\u627e\u5230 <code>redis-server</code> \u7684 <code>PID</code> \u540e\u6267\u884c <code>kill -9 PID</code> \u5373\u53ef\u3002</p> </li> </ol>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E5%85%AD%E3%80%81%E9%85%8D%E7%BD%AEAcWing%E4%B8%80%E9%94%AE%E7%99%BB%E5%BD%95/#2-redis-django","title":"2. redis \u5728 Django \u4e2d\u7684\u57fa\u672c\u64cd\u4f5c","text":"<p>\u5728\u9879\u76ee\u6839\u76ee\u5f55 <code>/acapp/</code> \u4e0b\u6267\u884c\u6307\u4ee4 <code>python3 manage.py shell</code> \u8fdb\u5165 Django \u540e\u53f0\u7cfb\u7edf\uff0c\u5728\u8fd9\u4e2a\u7cfb\u7edf\u91cc\u9762\u5982\u679c\u4f7f\u7528 <code>Tab</code> \u952e\u4f1a\u6709\u547d\u4ee4\u63d0\u793a\u3002</p> <pre><code>from django.core.cache import cache # \u5f15\u5165 cache\ncache.keys('\u5173\u952e\u5b57') # \u67e5\u627e\u67d0\u4e2a\u5173\u952e\u5b57\uff0c\u652f\u6301\u6b63\u5219\u8868\u8fbe\u5f0f\ncache.set('lumoumou', 1, 5) # \u8bbe\u7f6e\uff1a\u5173\u952e\u5b57, \u503c, \u8fc7\u671f\u65f6\u95f4(\u5355\u4f4d\u662f\u79d2)\ncache.set('lumoumou', 1, None) # \u8bbe\u7f6e\u6c38\u4e0d\u8fc7\u671f\u7684\u5173\u952e\u5b57\ncache.has_key('\u5173\u952e\u5b57') # \u67e5\u8be2\u5173\u952e\u5b57\u662f\u5426\u5b58\u5728\ncache.get('\u5173\u952e\u5b57') # \u67e5\u8be2\u5173\u952e\u5b57\u7684\u503c\ncache.delete('\u5173\u952e\u5b57') # \u5220\u53bb\u67d0\u5173\u952e\u5b57\n# \u5220\u9664\u6240\u6709\u5173\u952e\u5b57\nfor key in cache.keys(\"*\"):\ncache.delete(key)\n</code></pre>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E5%85%AD%E3%80%81%E9%85%8D%E7%BD%AEAcWing%E4%B8%80%E9%94%AE%E7%99%BB%E5%BD%95/#webacwing","title":"\u4e8c\u3001WEB\u7aefAcWing\u4e00\u952e\u767b\u5f55","text":"<p>\u9996\u5148\u7531\u4e8e\u6bcf\u4e2a\u7528\u6237\u90fd\u9700\u8981\u5b58\u50a8 openid\uff08\u73b0\u9636\u6bb5\u6570\u636e\u5e93\u53ea\u5b58\u50a8\u4e86\u7528\u6237\u7684\u7528\u6237\u540d\u548c\u5934\u50cf\u4fe1\u606f\uff09\uff0c\u6240\u4ee5\u9700\u8981\u6dfb\u52a0\u4e00\u680f\uff0c\u5728\u6587\u4ef6 <code>/home/acs/acapp/game/models/player/player.py</code> \u4e2d\u4fee\u6539\uff1a</p> <pre><code>from django.db import models\nfrom django.contrib.auth.models import User\nclass Player(models.Model):\nuser = models.OneToOneField(User, on_delete=models.CASCADE)\nphoto = models.URLField(max_length=256, blank=True) \n# \u6b64\u5904\u6dfb\u52a0\nopenid = models.CharField(default=\"\", max_length=50, blank=True, null=True)    \ndef __str__(self):\nreturn str(self.user)\n</code></pre> <p>\u66f4\u65b0\u6570\u636e\u5e93\uff1a</p> <pre><code>python3 manage.py makemigrations\npython3 manage.py migrate\n</code></pre> <p>\u91cd\u542f\u670d\u52a1\u5373\u53ef\u5728\u540e\u53f0\u770b\u89c1\u6bcf\u4e2a\u7528\u6237\u4e0b\u9762\u591a\u4e86\u4e00\u680f\uff1a<code>uwsgi --ini scripts/uwsgi.ini</code></p> <p></p>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E5%85%AD%E3%80%81%E9%85%8D%E7%BD%AEAcWing%E4%B8%80%E9%94%AE%E7%99%BB%E5%BD%95/#1-code","title":"1. \u7533\u8bf7\u6388\u6743\u7801 code","text":"<p>\u8bf7\u6c42\u5730\u5740</p> <p><code>https://www.acwing.com/third_party/api/oauth2/web/authorize/</code></p> <p>\u53c2\u8003\u793a\u4f8b\uff1a<code>?</code> \u5f00\u59cb\uff0c <code>&amp;</code>\u9694\u5f00\u6bcf\u4e2a\u53c2\u6570</p> <pre><code>\u8bf7\u6c42\u65b9\u6cd5\uff1aGET\nhttps://www.acwing.com/third_party/api/oauth2/web/authorize/\uff1fappid=APPID&amp;redirect_uri=REDIRECT_URI&amp;scope=SCOPE&amp;state=STATE\n</code></pre> <p>\u53c2\u6570\u8bf4\u660e</p> \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e appid \u662f \u5e94\u7528\u7684\u552f\u4e00id\uff0c\u53ef\u4ee5\u5728AcWing\u7f16\u8f91AcApp\u7684\u754c\u9762\u91cc\u770b\u5230 redirect_uri \u662f \u63a5\u6536\u6388\u6743\u7801\u7684\u5730\u5740\u3002\u9700\u8981\u7528\u5bf9\u94fe\u63a5\u8fdb\u884c\u7f16\u7801\uff1aPython3\u4e2d\u4f7f\u7528urllib.parse.quote\uff1bJava\u4e2d\u4f7f\u7528URLEncoder.encode scope \u662f \u7533\u8bf7\u6388\u6743\u7684\u8303\u56f4\u3002\u76ee\u524d\u53ea\u9700\u586buserinfo state \u5426 \u7528\u4e8e\u5224\u65ad\u8bf7\u6c42\u548c\u56de\u8c03\u7684\u4e00\u81f4\u6027\uff0c\u6388\u6743\u6210\u529f\u540e\u540e\u539f\u6837\u8fd4\u56de\u3002\u8be5\u53c2\u6570\u53ef\u7528\u4e8e\u9632\u6b62csrf\u653b\u51fb\uff08\u8de8\u7ad9\u8bf7\u6c42\u4f2a\u9020\u653b\u51fb\uff09\uff0c\u5efa\u8bae\u7b2c\u4e09\u65b9\u5e26\u4e0a\u8be5\u53c2\u6570\uff0c\u53ef\u8bbe\u7f6e\u4e3a\u7b80\u5355\u7684\u968f\u673a\u6570\uff08\u5982\u679c\u662f\u5c06\u7b2c\u4e09\u65b9\u6388\u6743\u767b\u5f55\u7ed1\u5b9a\u5230\u73b0\u6709\u8d26\u53f7\u4e0a\uff0c\u90a3\u4e48\u63a8\u8350\u7528\u968f\u673a\u6570 + user_id\u4f5c\u4e3astate\u7684\u503c\uff0c\u53ef\u4ee5\u6709\u6548\u9632\u6b62CSRF\u653b\u51fb\uff09 <p>Tips\uff1astate\u662f\u5b58\u653e\u5728 redis \u4e2d\u7684</p> <p>\u8fd4\u56de\u8bf4\u660e</p> <p>\u7528\u6237\u540c\u610f\u6388\u6743\u540e\u4f1a\u91cd\u5b9a\u5411\u5230 <code>redirect_url</code>\uff0c\u8fd4\u56de\u53c2\u6570\u4e3a <code>code</code> \u548c <code>state</code>\u3002\u94fe\u63a5\u683c\u5f0f\u5982\u4e0b\uff1a</p> <pre><code>redirect_uri?code=CODE&amp;state=STATE\n</code></pre> <p>\u5982\u679c\u7528\u6237\u62d2\u7edd\u6388\u6743\uff0c\u5219\u4e0d\u4f1a\u53d1\u751f\u91cd\u5b9a\u5411\u3002</p> <p>\u540e\u7aef\u5b9e\u73b0\u8fc7\u7a0b</p> <p>\u5728\u6587\u4ef6\u5939 <code>/home/acs/acapp/game/views/settings</code> \u4e0b\u9762\u65b0\u5efa\u6587\u4ef6\u5939 <code>acwing</code> \u5e76\u5728\u91cc\u9762\u521b\u5efa\u6587\u4ef6 <code>__init__.py</code>\uff0c\u518d\u5728\u8be5\u6587\u4ef6\u5939\u4e0b\u9762\u521b\u5efa\u6587\u4ef6\u5939 <code>web</code> \u548c <code>acapp</code> \uff0c\u5e76\u5206\u522b\u5728\u4e24\u4e2a\u6587\u4ef6\u5939\u4e0b\u521b\u5efa\u6587\u4ef6 <code>__init__.py</code>\u3002</p> <p>\u5728\u6587\u4ef6\u5939 <code>web</code> \u4e0b\u9762\u521b\u5efa\u6587\u4ef6 <code>apply_code.py</code> \u7528\u4e8e\u5b9e\u73b0\u7533\u8bf7 <code>code</code>\u3002</p> <pre><code>from django.http import JsonResponse\ndef apply_code(request):\nappid = \"4588\" # \u5728 Acwing \u7f51\u7ad9 acapp \u5e94\u7528\u7f16\u8f91\u754c\u9762\u627e\nreturn JsonResponse({\n'result': \"success\",\n})\n</code></pre> <p>\u5728\u6587\u4ef6\u5939 <code>web</code> \u4e0b\u9762\u521b\u5efa\u6587\u4ef6 <code>receive_code.py</code> \u7528\u4e8e\u5b9e\u73b0\u63a5\u6536 <code>code</code>\u3002</p> <pre><code>from django.shortcuts import redirect\ndef receive_code(request):\nreturn redirect(\"index\")\n</code></pre> <p>\u5728\u6587\u4ef6\u5939 <code>/home/acs/acapp/game/urls/settings</code> \u4e0b\u9762\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u5939 <code>acwing</code> \u5e76\u521b\u5efa\u6587\u4ef6\u5939 <code>__init__.py</code> \u548c <code>index.py</code>\uff0c\u5728\u6587\u4ef6 <code>index.py</code> \u91cc\u4fee\u6539\u7528\u4e8e\u5b9e\u73b0 <code>acwing</code> \u7684\u8def\u7531\uff1a</p> <pre><code>from django.urls import path\nfrom game.views.settings.acwing.web.apply_code import apply_code\nfrom game.views.settings.acwing.web.receive_code import receive_code\nurlpatterns = [\npath(\"web/apply_code/\", apply_code, name=\"settings_acwing_web_apply_code\"),\npath(\"web/receive_code/\", receive_code, name=\"settings_acwing_web_receive_code\"),\n]\n</code></pre> <p>\u5728\u6587\u4ef6 <code>/home/acs/acapp/game/urls/settings/index.py</code> \u4e2d\u5c06 <code>acwing</code> \u4e2d\u7684\u76ee\u5f55\u5bfc\u5165\u8fdb\u6765\u3002</p> <pre><code>from django.urls import path, include # \u6dfb\u52a0 include\nfrom game.views.settings.getinfo import getinfo\nfrom game.views.settings.login import signin\nfrom game.views.settings.logout import signout\nfrom game.views.settings.register import register\nurlpatterns = [\npath(\"getinfo/\", getinfo, name=\"settings_getinfo\"),\npath(\"login/\", signin, name=\"settings_login\"),\npath(\"logout/\", signout, name=\"settings_logout\"),\npath(\"register/\", register, name=\"settings_register\"),\npath(\"acwing/\", include(\"game.urls.settings.acwing.index\")), # \u6b64\u5904\u6dfb\u52a0\n]\n</code></pre> <p>\u91cd\u542f\u670d\u52a1\u540e\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165 <code>\u6e38\u620f\u7f51\u5740/settings/acwing/web/apply_code</code> \u540e\u770b\u89c1 <code>{\"result\": \"success\"}</code>\uff0c\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165 <code>\u6e38\u620f\u7f51\u5740/settings/acwing/web/recei_code</code> \u540e\u770b\u89c1\u6e38\u620f\u767b\u5f55\u754c\u9762\u3002 </p> <p>\u7ee7\u7eed\u4fee\u6539\u6587\u4ef6 <code>/home/acs/acapp/game/views/settings/acwing/web/apply_code.py</code>\uff1a</p> <pre><code>from django.http import JsonResponse\nfrom urllib.parse import quote\nfrom random import randint\nfrom django.core.cache import cache\ndef get_state():\n\"\"\"\n    \u83b7\u53d6\u4e00\u4e2a8\u4f4d\u7684\u6bcf\u4e2a\u6570\u503c\u968f\u673a\u57280~8\u4e4b\u95f4\u7684\u6570\n    \"\"\"\nres = \"\"\nfor i in range(8):\nres += str(randint(0, 9))\nreturn res\ndef apply_code(request):\nappid = \"4588\" # \u5728 Acwing \u7f51\u7ad9 acapp \u5e94\u7528\u7f16\u8f91\u754c\u9762\u627e\nredirect_uri = quote(\"https://app4588.acapp.acwing.com.cn/settings/acwing/web/receive_code/\")\nscope = \"userinfo\"\nstate = get_state()\ncache.set(state, True, 7200)  # \u5c06 state \u5b58\u50a8 redis\uff0c\u503c\u4e3a True\uff0c\u6709\u6548\u65f6\u95f4 2 \u5c0f\u65f6(7200\u79d2)\napply_code_url = \"https://www.acwing.com/third_party/api/oauth2/web/authorize/\"\nreturn JsonResponse({\n'result': \"success\",\n'apply_code_url': apply_code_url + \"?appid=%s&amp;redirect_uri=%s&amp;scope=%s&amp;state=%s\" % (appid, redirect_uri, scope, state)\n})\n</code></pre> <p>\u91cd\u542f\u670d\u52a1\u540e\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165  <code>\u6e38\u620f\u7f51\u5740/settings/acwing/web/apply_code</code>  \u540e\u53ef\u4ee5\u770b\u89c1\u8fd4\u56de\u4fe1\u606f <code>{\"result\": \"success\", \"apply_code_url\": \"https://www.acwing.com/third_party/api/oauth2/web/authorize/?appid=4588&amp;redirect_uri=https%3A//app4588.acapp.acwing.com.cn/settings/acwing/web/receive_code/&amp;scope=userinfo&amp;state=39902428\"}</code>\uff0c\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165\u94fe\u63a5</p> <pre><code>https://www.acwing.com/third_party/api/oauth2/web/authorize/?appid=4588&amp;redirect_uri=https%3A//app4588.acapp.acwing.com.cn/settings/acwing/web/receive_code/&amp;scope=userinfo&amp;state=39902428\n</code></pre> <p>\u4f1a\u663e\u793a\u51fa\u8bf7\u6c42\u6388\u6743\u754c\u9762\uff1a</p> <p></p> <p>\u524d\u7aef\u5b9e\u73b0\u8fc7\u7a0b</p> <p>\u5728\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/settings/zbase.js</code> \u4e2d\u4fee\u6539\uff1a</p> <pre><code>    ...\nthis.$register_login = this.$register.find(\".ac-game-settings-option\");\nthis.$register.hide();\nthis.$acwing_login = this.$settings.find('.ac-game-settings-acwing img'); // \u6b64\u5904\u6dfb\u52a0\nthis.root.$ac_game.append(this.$settings);\nthis.start();\n}\nadd_listening_events() {\nlet outer = this; // \u6b64\u5904\u6dfb\u52a0\nthis.add_listening_events_login();\nthis.add_listening_events_register();\nthis.$acwing_login.click(function() { // \u6b64\u5904\u6dfb\u52a0\nouter.acwing_login();\n})\n}\n...\nacwing_login() { // \u6b64\u5904\u6dfb\u52a0\nconsole.log(\"click acwing login\");\n}\n...\n</code></pre> <p>\u6253\u5305\u4e4b\u540e\u91cd\u542f\u670d\u52a1\u5668\uff0c\u8fdb\u5165\u6e38\u620f\u767b\u5f55\u754c\u9762\uff0c\u70b9\u51fb\u4e00\u952e\u767b\u5f55\u4f1a\u5728\u63a7\u5236\u53f0\u770b\u5230\u8f93\u51fa <code>click acwing login</code>\u3002</p> <pre><code># \u9879\u76ee\u6839\u76ee\u5f55 /acapp/\u4e0b\n./scripts/compress_game_js.sh uwsgi --ini scripts/uwsgi.ini </code></pre> <p>Tips\uff1a\u5982\u679c\u6ca1\u6709\u53cd\u5e94\u5c31\u6e05\u7406\u4e00\u4e0b\u7f13\u5b58\u3002</p> <p>\u4e0a\u8ff0\u6b65\u9aa4\u6267\u884c\u5b8c\u6bd5\u4e4b\u540e\uff0c\u8bf4\u660e\u7a0b\u5e8f\u65e0\u8bef\u3002</p> <p>\u4e0b\u9762\u7ee7\u7eed\u4fee\u6539\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/settings/zbase.js</code> \uff1a</p> <pre><code>    ...\n});\nthis.$register_submit.click(function() {\nouter.register_on_remote();\n});\n}\n// \u4fee\u6539\u8fd9\u4e2a\u51fd\u6570\nacwing_login() {\n$.ajax({\nurl: \"https://app4588.acapp.acwing.com.cn/settings/acwing/web/apply_code\",\ntype: \"GET\",\nsuccess: function(resp) {\nconsole.log(resp);\nif (resp.result === \"success\") {\nwindow.location.replace(resp.apply_code_url); // \u91cd\u5b9a\u5411\n}\n}\n});\n}\nlogin_on_remote() { // \u5728\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u767b\u5f55\n...\n</code></pre> <p>\u6253\u5305\u4e4b\u540e\u91cd\u542f\u670d\u52a1\u5668\uff0c\u8fdb\u5165\u6e38\u620f\u767b\u5f55\u754c\u9762\uff0c\u70b9\u51fb\u4e00\u952e\u767b\u5f55\u4f1a\u8df3\u8f6c\u5230</p> <pre><code># \u9879\u76ee\u6839\u76ee\u5f55 /acapp/\u4e0b\n./scripts/compress_game_js.sh uwsgi --ini scripts/uwsgi.ini </code></pre> <p>Tips\uff1a\u5982\u679c\u6ca1\u6709\u53cd\u5e94\u5c31\u6e05\u7406\u4e00\u4e0b\u7f13\u5b58\u3002</p> <p>\u4fee\u6539\u6587\u4ef6 <code>/home/acs/acapp/game/views/settings/acwing/web/receive_code.py</code> \u7528\u4e8e\u63a5\u6536 <code>code</code>\uff1a</p> <pre><code>from django.shortcuts import redirect\ndef receive_code(request):\n# \u6b64\u5904\u6dfb\u52a0\ndata = request.GET\ncode = data.get('code')\nstate = data.get('state')\nprint(\"code:%s  state:%s\" %(code, state))\nreturn redirect(\"index\")\n</code></pre> <p>\u8fd9\u65f6\u5019\u91cd\u542f\u670d\u52a1\uff0c\u5237\u65b0\u9875\u9762\uff0c\u8fdb\u5165\u4e00\u952e\u767b\u5f55\u5e76\u70b9\u51fb\u6388\u6743\uff0c\u4f1a\u5728\u91cd\u542f\u670d\u52a1\u7684\u547d\u4ee4\u884c\u7a97\u53e3\u770b\u89c1 <code>acwing</code> \u8fd4\u56de\u7684 <code>code and state</code>\uff1a</p> <p></p> <p>\u6b64\u65f6\u56de\u5230\u9879\u76ee\u6839\u76ee\u5f55 <code>/acapp/</code> \u4e0b\u8f93\u5165\uff1a</p> <pre><code>python3 manage.py shell\nfrom django.core.cache import cache\ncache.keys('*')\n</code></pre> <p>\u53ef\u4ee5\u770b\u89c1 <code>redis</code> \u4e2d\u5b58\u50a8\u7684\u6240\u6709\u6709\u6548\u7684 <code>state</code>\uff0c\u5982\u679c\u6709\u591a\u4e2a\u662f\u56e0\u4e3a\u7533\u8bf7\u4e86\u591a\u6b21\u3002</p> <p>\u7531\u4e8e\u70b9\u51fb\u4e86\u591a\u6b21\u751f\u6210\u4e86\u591a\u4e2a <code>state</code>\uff0c\u4e3a\u4e86\u4e0d\u51fa\u95ee\u9898\uff0c\u4f7f\u7528\u4e0b\u9762\u4ee3\u7801\u5c06 redis \u4e2d\u7684\u6570\u636e\u5220\u9664\uff1a</p> <pre><code>for key in cache.keys(\"*\"): \ncache.delete(key)\n</code></pre> <p>\u4e0b\u9762\u5bf9\u63a5\u6536\u5230\u7684  <code>code and state</code> \u8fdb\u884c\u5904\u7406\uff0c\u7ee7\u7eed\u4fee\u6539\u6587\u4ef6 <code>/home/acs/acapp/game/views/settings/acwing/web/receive_code.py</code> \uff1a</p> <pre><code>from django.shortcuts import redirect\nfrom django.core.cache import cache # \u6b64\u5904\u6dfb\u52a0\ndef receive_code(request):\ndata = request.GET\ncode = data.get('code')\nstate = data.get('state')\nprint(\"code:%s  state:%s\" %(code, state))\n# \u6b64\u5904\u6dfb\u52a0\nif not cache.has_key(state):\nreturn redirect(\"index\")\ncache.delete(state) \nreturn redirect(\"index\")\n</code></pre>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E5%85%AD%E3%80%81%E9%85%8D%E7%BD%AEAcWing%E4%B8%80%E9%94%AE%E7%99%BB%E5%BD%95/#2-access_token-openid","title":"2. \u7533\u8bf7\u6388\u6743\u4ee4\u724c access_token \u548c\u7528\u6237\u7684 openid","text":"<p>\u8bf7\u6c42\u5730\u5740</p> <pre><code>https://www.acwing.com/third_party/api/oauth2/access_token/\n</code></pre> <p>\u53c2\u8003\u793a\u4f8b</p> <pre><code># \u8bf7\u6c42\u65b9\u6cd5\uff1aGET\nhttps://www.acwing.com/third_party/api/oauth2/access_token/?appid=APPID&amp;secret=APPSECRET&amp;code=CODE\n</code></pre> <p>\u53c2\u6570\u8bf4\u660e</p> \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e appid \u662f \u5e94\u7528\u7684\u552f\u4e00id\uff0c\u53ef\u4ee5\u5728AcWing\u7f16\u8f91AcApp\u7684\u754c\u9762\u91cc\u770b\u5230 secret \u662f \u5e94\u7528\u7684\u79d8\u94a5\uff0c\u53ef\u4ee5\u5728AcWing\u7f16\u8f91AcApp\u7684\u754c\u9762\u91cc\u770b\u5230 code \u662f \u7b2c\u4e00\u6b65\u4e2d\u83b7\u53d6\u7684\u6388\u6743\u7801 <p>\u8fd4\u56de\u8bf4\u660e</p> <pre><code># \u7533\u8bf7\u6210\u529f\u793a\u4f8b\n{ \"access_token\": \"ACCESS_TOKEN\", \"expires_in\": 7200, \"refresh_token\": \"REFRESH_TOKEN\",\n    \"openid\": \"OPENID\", \"scope\": \"SCOPE\",\n}\n# \u7533\u8bf7\u5931\u8d25\u793a\u4f8b\n{\n\"errcode\": 40001,\n    \"errmsg\": \"code expired\",  # \u6388\u6743\u7801\u8fc7\u671f\n}\n</code></pre> <p>\u8fd4\u56de\u53c2\u6570\u8bf4\u660e</p> \u53c2\u6570 \u8bf4\u660e access_token \u6388\u6743\u4ee4\u724c\uff0c\u6709\u6548\u671f2\u5c0f\u65f6 expires_in \u6388\u6743\u4ee4\u724c\u8fd8\u6709\u591a\u4e45\u8fc7\u671f\uff0c\u5355\u4f4d\uff08\u79d2\uff09 refresh_token \u7528\u4e8e\u5237\u65b0access_token\u7684\u4ee4\u724c\uff0c\u6709\u6548\u671f30\u5929 openid \u7528\u6237\u7684id\u3002\u6bcf\u4e2aAcWing\u7528\u6237\u5728\u6bcf\u4e2aacapp\u4e2d\u6388\u6743\u7684openid\u662f\u552f\u4e00\u7684,\u53ef\u7528\u4e8e\u8bc6\u522b\u7528\u6237\u3002 scope \u7528\u6237\u6388\u6743\u7684\u8303\u56f4\u3002\u76ee\u524d\u8303\u56f4\u4e3auserinfo\uff0c\u5305\u62ec\u7528\u6237\u540d\u3001\u5934\u50cf <p>\u5237\u65b0access_token\u7684\u6709\u6548\u671f</p> <ul> <li><code>access_token</code> \u7684\u6709\u6548\u671f\u4e3a2\u5c0f\u65f6\uff0c\u65f6\u95f4\u8f83\u77ed</li> <li><code>refresh_token</code> \u7684\u6709\u6548\u671f\u4e3a30\u5929\uff0c\u53ef\u7528\u4e8e\u5237\u65b0 <code>access_token</code></li> <li>\u5237\u65b0\u7ed3\u679c\u6709\u4e24\u79cd\uff1a<ul> <li>\u5982\u679c <code>access_token</code> \u5df2\u8fc7\u671f\uff0c\u5219\u751f\u6210\u4e00\u4e2a\u65b0\u7684 <code>access_token</code></li> <li>\u5982\u679c <code>access_token</code> \u672a\u8fc7\u671f\uff0c\u5219\u5c06\u5f53\u524d\u7684 <code>access_token</code> \u7684\u6709\u6548\u671f\u5ef6\u957f\u4e3a <code>2</code> \u5c0f\u65f6</li> </ul> </li> </ul> <p>\u53c2\u8003\u793a\u4f8b</p> <pre><code># \u8bf7\u6c42\u65b9\u6cd5\uff1aGET\nhttps://www.acwing.com/third_party/api/oauth2/refresh_token/?appid=APPID&amp;refresh_token=REFRESH_TOKEN\n</code></pre> <p>\u8fd4\u56de\u7ed3\u679c\u7684\u683c\u5f0f\u4e0e\u7533\u8bf7access_token\u76f8\u540c\u3002</p> <p>\u4fee\u6539\u6587\u4ef6 <code>/home/acs/acapp/game/views/settings/acwing/web/receive_code.py</code> \uff1a</p> <pre><code>from django.shortcuts import redirect\nfrom django.core.cache import cache\nimport requests # \u6b64\u5904\u6dfb\u52a0\ndef receive_code(request):\ndata = request.GET\ncode = data.get('code')\nstate = data.get('state')\nprint(\"code:%s  state:%s\" %(code, state))\nif not cache.has_key(state): \nreturn redirect(\"index\")\ncache.delete(state) \n# \u6dfb\u52a0\u4e0b\u9762\u5230\u6587\u4ef6\u4e2d\n# \u7533\u8bf7\u6388\u6743\u4ee4\u724c\u548c\u7528\u6237openid\napply_access_token_url = \"https://www.acwing.com/third_party/api/oauth2/access_token/\"\n# appid\u5728acapp\u8bbe\u7f6e\u754c\u9762\u4e2d\u7684AppID\n# secret\u5728acapp\u8bbe\u7f6e\u754c\u9762\u4e2d\u7684AppSecret\nparams = {\n'appid': \"4588\",\n'secret': \"ea08584c059441c297b952e06395ea08\",\n'code': code,\n}\n# \u901a\u8fc7\u94fe\u63a5\u8bbf\u95ee\u6570\u636e\naccess_token_res = requests.get(apply_access_token_url, params=params).json()\nreturn redirect(\"index\")\n</code></pre>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E5%85%AD%E3%80%81%E9%85%8D%E7%BD%AEAcWing%E4%B8%80%E9%94%AE%E7%99%BB%E5%BD%95/#3","title":"3. \u7533\u8bf7\u7528\u6237\u4fe1\u606f","text":"<p>\u8bf7\u6c42\u5730\u5740</p> <pre><code>https://www.acwing.com/third_party/api/meta/identity/getinfo/\n</code></pre> <p>\u53c2\u8003\u793a\u4f8b</p> <pre><code># \u8bf7\u6c42\u65b9\u6cd5\uff1aGET\nhttps://www.acwing.com/third_party/api/meta/identity/getinfo/?a\n</code></pre> <p>\u53c2\u6570\u8bf4\u660e</p> \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e access_token \u662f \u7b2c\u4e8c\u6b65\u4e2d\u83b7\u53d6\u7684\u6388\u6743\u4ee4\u724c openid \u662f \u7b2c\u4e8c\u6b65\u4e2d\u83b7\u53d6\u7684\u7528\u6237openid <p>\u8fd4\u56de\u8bf4\u660e</p> <pre><code># \u7533\u8bf7\u6210\u529f\u793a\u4f8b\uff1a\n{\n'username': \"USERNAME\",\n    'photo': \"https:cdn.acwing.com/xxxxx\"\n}\n# \u7533\u8bf7\u5931\u8d25\u793a\u4f8b\uff1a\n{\n'errcode': \"40004\",\n    'errmsg': \"access_token expired\"  # \u6388\u6743\u4ee4\u724c\u8fc7\u671f\n}\n</code></pre> <p>\u4fee\u6539\u6587\u4ef6 <code>/home/acs/acapp/game/views/settings/acwing/web/receive_code.py</code> \uff1a</p> <pre><code>from django.shortcuts import redirect\nfrom django.core.cache import cache\nimport requests\nfrom django.contrib.auth.models import User # \u6b64\u5904\u6dfb\u52a0\nfrom game.models.player.player import Player # \u6b64\u5904\u6dfb\u52a0\nfrom django.contrib.auth import login # \u6b64\u5904\u6dfb\u52a0\nfrom random import randint # \u6b64\u5904\u6dfb\u52a0\ndef receive_code(request):\ndata = request.GET\ncode = data.get('code')\nstate = data.get('state')\nprint(\"code:%s  state:%s\" %(code, state))\nif not cache.has_key(state): \nreturn redirect(\"index\")\ncache.delete(state) \napply_access_token_url = \"https://www.acwing.com/third_party/api/oauth2/access_token/\"\nparams = {\n'appid': \"4588\",\n'secret': \"ea08584c059441c297b952e06395ea08\",\n'code': code,\n}\naccess_token_res = requests.get(apply_access_token_url, params=params).json()\n# \u5c06\u4e0b\u9762\u6dfb\u52a0\u5230\u6587\u4ef6\u4e2d\naccess_token = access_token_res['access_token']\nopenid = access_token_res['openid']\nplayers = Player.objects.filter(openid=openid)\nif players.exists(): # \u5982\u679c\u7528\u6237\u5df2\u7ecf\u6ce8\u518c\uff0c\u76f4\u63a5\u767b\u5f55\u5373\u53ef\nlogin(request, players[0].user)\nreturn redirect(\"index\")\nget_userinfo_url = \"https://www.acwing.com/third_party/api/meta/identity/getinfo/\"\nparams = {\n\"access_token\": access_token,\n\"openid\": openid\n}\n# \u83b7\u53d6\u7528\u6237\u4fe1\u606f\nuserinfo_res = requests.get(get_userinfo_url, params=params).json()\nusername = userinfo_res['username']\nphoto = userinfo_res['photo']\n# \u9632\u6b62\u7528\u6237\u91cd\u540d\uff0c\u6bcf\u6b21\u5728username\u540e\u9762\u968f\u673a\u52a0\u4e00\u4f4d\u6570\u5373\u53ef\nwhile User.objects.filter(username=username).exists():\nusername += str(randint(0, 9))\n# \u521b\u5efa\u7528\u6237\u5e76\u4e14\u767b\u5f55\nuser = User.objects.create(username=username)\nplayer = Player.objects.create(user=user, photo=photo, openid=openid)\nlogin(request, user)\nreturn redirect(\"index\")\n</code></pre> <p>\u8fd9\u4e2a\u65f6\u5019\u91cd\u65b0\u767b\u5f55\u670d\u52a1\u5668\u5373\u53ef\u5b9e\u73b0\u4e00\u952e\u767b\u5f55\u3002</p> <p>\u4fdd\u5b58\u4ee3\u7801\uff1a</p> <pre><code>git add .\ngit commit -m \"implement web acwing oauth2 login\"\ngit push\n</code></pre>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E5%85%AD%E3%80%81%E9%85%8D%E7%BD%AEAcWing%E4%B8%80%E9%94%AE%E7%99%BB%E5%BD%95/#acappacwing","title":"\u4e09\u3001AcApp\u7aefAcWing\u4e00\u952e\u767b\u5f55","text":""},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E5%85%AD%E3%80%81%E9%85%8D%E7%BD%AEAcWing%E4%B8%80%E9%94%AE%E7%99%BB%E5%BD%95/#1-code_1","title":"1. \u7533\u8bf7\u6388\u6743\u7801 code","text":"<p>\u8bf7\u6c42\u6388\u6743\u7801\u7684API</p> <pre><code>AcWingOS.api.oauth2.authorize(appid, redirect_uri, scope, state, callback);\n</code></pre> <p>\u53c2\u6570\u8bf4\u660e</p> \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e appid \u662f \u5e94\u7528\u7684\u552f\u4e00id\uff0c\u53ef\u4ee5\u5728AcWing\u7f16\u8f91AcApp\u7684\u754c\u9762\u91cc\u770b\u5230 redirect_uri \u662f \u63a5\u6536\u6388\u6743\u7801\u7684\u5730\u5740\u3002\u9700\u8981\u7528\u5bf9\u94fe\u63a5\u8fdb\u884c\u7f16\u7801\uff1aPython3\u4e2d\u4f7f\u7528urllib.parse.quote\uff1bJava\u4e2d\u4f7f\u7528URLEncoder.encode scope \u662f \u7533\u8bf7\u6388\u6743\u7684\u8303\u56f4\u3002\u76ee\u524d\u53ea\u9700\u586buserinfo state \u662f \u7528\u4e8e\u5224\u65ad\u8bf7\u6c42\u548c\u56de\u8c03\u7684\u4e00\u81f4\u6027\uff0c\u6388\u6743\u6210\u529f\u540e\u540e\u539f\u6837\u8fd4\u56de\u3002\u8be5\u53c2\u6570\u53ef\u7528\u4e8e\u9632\u6b62csrf\u653b\u51fb\uff08\u8de8\u7ad9\u8bf7\u6c42\u4f2a\u9020\u653b\u51fb\uff09\uff0c\u5efa\u8bae\u7b2c\u4e09\u65b9\u5e26\u4e0a\u8be5\u53c2\u6570\uff0c\u53ef\u8bbe\u7f6e\u4e3a\u7b80\u5355\u7684\u968f\u673a\u6570\uff08\u5982\u679c\u662f\u5c06\u7b2c\u4e09\u65b9\u6388\u6743\u767b\u5f55\u7ed1\u5b9a\u5230\u73b0\u6709\u8d26\u53f7\u4e0a\uff0c\u90a3\u4e48\u63a8\u8350\u7528\u968f\u673a\u6570 + user_id\u4f5c\u4e3astate\u7684\u503c\uff0c\u53ef\u4ee5\u6709\u6548\u9632\u6b62CSRF\u653b\u51fb\uff09 callback \u662f redirect_uri\u8fd4\u56de\u540e\u7684\u56de\u8c03\u51fd\u6570 <p>\u8fd4\u56de\u8bf4\u660e</p> <p>\u7528\u6237\u540c\u610f\u6388\u6743\u540e\uff0c\u4f1a\u5c06 <code>code</code> \u548c <code>state</code> \u4f20\u9012\u7ed9 <code>redirect_uri</code>\u3002</p> <p>\u5982\u679c\u7528\u6237\u62d2\u7edd\u6388\u6743\uff0c\u5219\u5c06\u4f1a\u6536\u5230\u5982\u4e0b\u9519\u8bef\u7801\uff1a</p> <pre><code>{\nerrcode: \"40010\"\nerrmsg: \"user reject\"\n}\n</code></pre>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E5%85%AD%E3%80%81%E9%85%8D%E7%BD%AEAcWing%E4%B8%80%E9%94%AE%E7%99%BB%E5%BD%95/#2-access_token-openid_1","title":"2. \u7533\u8bf7\u6388\u6743\u4ee4\u724c <code>access_token</code> \u548c\u7528\u6237\u7684 <code>openid</code>","text":"<p>\u8bf7\u6c42\u5730\u5740</p> <pre><code>https://www.acwing.com/third_party/api/oauth2/access_token/\n</code></pre> <p>\u53c2\u8003\u793a\u4f8b</p> <pre><code># \u8bf7\u6c42\u65b9\u6cd5\uff1aGET\nhttps://www.acwing.com/third_party/api/oauth2/access_token/?appid=APPID&amp;secret=APPSECRET&amp;code=CODE\n</code></pre> <p>\u53c2\u6570\u8bf4\u660e</p> \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e appid \u662f \u5e94\u7528\u7684\u552f\u4e00id\uff0c\u53ef\u4ee5\u5728AcWing\u7f16\u8f91AcApp\u7684\u754c\u9762\u91cc\u770b\u5230 secret \u662f \u5e94\u7528\u7684\u79d8\u94a5\uff0c\u53ef\u4ee5\u5728AcWing\u7f16\u8f91AcApp\u7684\u754c\u9762\u91cc\u770b\u5230 code \u662f \u7b2c\u4e00\u6b65\u4e2d\u83b7\u53d6\u7684\u6388\u6743\u7801 <p>\u8fd4\u56de\u8bf4\u660e</p> <pre><code># \u7533\u8bf7\u6210\u529f\u793a\u4f8b\uff1a\n{ \"access_token\": \"ACCESS_TOKEN\", \"expires_in\": 7200, \"refresh_token\": \"REFRESH_TOKEN\",\n    \"openid\": \"OPENID\", \"scope\": \"SCOPE\",\n}\n# \u7533\u8bf7\u5931\u8d25\u793a\u4f8b\uff1a\n{\n\"errcode\": 40001,\n    \"errmsg\": \"code expired\",  # \u6388\u6743\u7801\u8fc7\u671f\n}\n</code></pre> <p>\u8fd4\u56de\u53c2\u6570\u8bf4\u660e</p> \u53c2\u6570 \u8bf4\u660e access_token \u6388\u6743\u4ee4\u724c\uff0c\u6709\u6548\u671f2\u5c0f\u65f6 expires_in \u6388\u6743\u4ee4\u724c\u8fd8\u6709\u591a\u4e45\u8fc7\u671f\uff0c\u5355\u4f4d\uff08\u79d2\uff09 refresh_token \u7528\u4e8e\u5237\u65b0access_token\u7684\u4ee4\u724c\uff0c\u6709\u6548\u671f30\u5929 openid \u7528\u6237\u7684id\u3002\u6bcf\u4e2aAcWing\u7528\u6237\u5728\u6bcf\u4e2aacapp\u4e2d\u6388\u6743\u7684openid\u662f\u552f\u4e00\u7684,\u53ef\u7528\u4e8e\u8bc6\u522b\u7528\u6237\u3002 scope \u7528\u6237\u6388\u6743\u7684\u8303\u56f4\u3002\u76ee\u524d\u8303\u56f4\u4e3auserinfo\uff0c\u5305\u62ec\u7528\u6237\u540d\u3001\u5934\u50cf <p>\u5237\u65b0access_token\u7684\u6709\u6548\u671f</p> <ul> <li><code>access_token</code> \u7684\u6709\u6548\u671f\u4e3a2\u5c0f\u65f6\uff0c\u65f6\u95f4\u8f83\u77ed</li> <li><code>refresh_token</code> \u7684\u6709\u6548\u671f\u4e3a30\u5929\uff0c\u53ef\u7528\u4e8e\u5237\u65b0 <code>access_token</code></li> <li>\u5237\u65b0\u7ed3\u679c\u6709\u4e24\u79cd\uff1a<ul> <li>\u5982\u679c <code>access_token</code> \u5df2\u8fc7\u671f\uff0c\u5219\u751f\u6210\u4e00\u4e2a\u65b0\u7684 <code>access_token</code></li> <li>\u5982\u679c <code>access_token</code> \u672a\u8fc7\u671f\uff0c\u5219\u5c06\u5f53\u524d\u7684 <code>access_token</code> \u7684\u6709\u6548\u671f\u5ef6\u957f\u4e3a <code>2</code> \u5c0f\u65f6</li> </ul> </li> </ul> <p>\u53c2\u8003\u793a\u4f8b</p> <pre><code># \u8bf7\u6c42\u65b9\u6cd5\uff1aGET\nhttps://www.acwing.com/third_party/api/oauth2/refresh_token/?appid=APPID&amp;refresh_token=REFRESH_TOKEN\n</code></pre> <p>\u8fd4\u56de\u7ed3\u679c\u7684\u683c\u5f0f\u4e0e\u7533\u8bf7access_token\u76f8\u540c\u3002</p>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E5%85%AD%E3%80%81%E9%85%8D%E7%BD%AEAcWing%E4%B8%80%E9%94%AE%E7%99%BB%E5%BD%95/#3_1","title":"3. \u7533\u8bf7\u7528\u6237\u4fe1\u606f","text":"<p>\u8bf7\u6c42\u5730\u5740</p> <pre><code>https://www.acwing.com/third_party/api/meta/identity/getinfo/\n</code></pre> <p>\u53c2\u8003\u793a\u4f8b</p> <pre><code># \u8bf7\u6c42\u65b9\u6cd5\uff1aGET\nhttps://www.acwing.com/third_party/api/meta/identity/getinfo/?a\n</code></pre> <p>\u53c2\u6570\u8bf4\u660e</p> \u53c2\u6570 \u662f\u5426\u5fc5\u987b \u8bf4\u660e access_token \u662f \u7b2c\u4e8c\u6b65\u4e2d\u83b7\u53d6\u7684\u6388\u6743\u4ee4\u724c openid \u662f \u7b2c\u4e8c\u6b65\u4e2d\u83b7\u53d6\u7684\u7528\u6237openid <p>\u8fd4\u56de\u8bf4\u660e</p> <pre><code># \u7533\u8bf7\u6210\u529f\u793a\u4f8b\uff1a\n{\n'username': \"USERNAME\",\n    'photo': \"https:cdn.acwing.com/xxxxx\"\n}\n# \u7533\u8bf7\u5931\u8d25\u793a\u4f8b\uff1a\n{\n'errcode': \"40004\",\n    'errmsg': \"access_token expired\"  # \u6388\u6743\u4ee4\u724c\u8fc7\u671f\n}\n</code></pre>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E5%85%AD%E3%80%81%E9%85%8D%E7%BD%AEAcWing%E4%B8%80%E9%94%AE%E7%99%BB%E5%BD%95/#4","title":"4. \u5177\u4f53\u5b9e\u73b0","text":"<p>\u5b9e\u73b0\u8fc7\u7a0b\u540c\u4e0a\u9762 \u4e8c\u3001WEB\u7aefAcWing\u4e00\u952e\u767b\u5f55 \u5341\u5206\u76f8\u4f3c\u3002</p> <p>\u540e\u7aef\u5b9e\u73b0</p> <p>\u9996\u5148\u5c06\u6587\u4ef6\u5939 <code>/home/acs/acapp/game/views/settings/acwing/web</code> \u4e0b\u6240\u6709\u6587\u4ef6\u590d\u5236\u5230\u6587\u4ef6\u5939 <code>/home/acs/acapp/game/views/settings/acwing/acapp</code> \u4e0b\u9762\u3002</p> <p>\u7136\u540e\u5728\u6587\u4ef6 <code>/home/acs/acapp/game/views/settings/acwing/acapp/apply_code.py</code> \u4e2d\u4fee\u6539\uff1a</p> <pre><code>from django.http import JsonResponse\nfrom urllib.parse import quote\nfrom random import randint\nfrom django.core.cache import cache\ndef get_state():\n\"\"\"\n    \u83b7\u53d6\u4e00\u4e2a8\u4f4d\u7684\u6bcf\u4e2a\u6570\u503c\u968f\u673a\u57280~8\u4e4b\u95f4\u7684\u6570\n    \"\"\"\nres = \"\"\nfor i in range(8):\nres += str(randint(0, 9))\nreturn res\ndef apply_code(request):\nappid = \"4588\"\nredirect_uri = quote(\"https://app4588.acapp.acwing.com.cn/settings/acwing/acapp/receive_code/\")\nscope = \"userinfo\"\nstate = get_state()\ncache.set(state, True, 7200)\n# \u5220\u6389 apply_code_url = \"https://www.acwing.com/third_party/api/oauth2/web/authorize/\"\nreturn JsonResponse({\n'result': \"success\",\n# \u5220\u6389\u6389'apply_code_url': apply_code_url + \"?appid=%s&amp;redirect_uri=%s&amp;scope=%s&amp;state=%s\" % (appid, redirect_uri, scope, state)\n# \u6dfb\u52a0\u4e0b\u9762\u7684\u53c2\u6570\n'appid': appid,\n'redirect_uri': redirect_uri,\n'scope': scope,\n'state': state,\n})\n</code></pre> <p>\u5728\u6587\u4ef6 <code>/home/acs/acapp/game/urls/settings/acwing/index.py</code> \u91cc\u9762\u4fee\u6539\u8def\u7531\uff1a</p> <pre><code>from django.urls import path\nfrom game.views.settings.acwing.web.apply_code import apply_code as web_apply_code # \u6b64\u5904\u4fee\u6539\nfrom game.views.settings.acwing.web.receive_code import receive_code as web_receive_code # \u6b64\u5904\u4fee\u6539\nfrom game.views.settings.acwing.acapp.apply_code import apply_code as acapp_apply_code # \u6b64\u5904\u6dfb\u52a0\nfrom game.views.settings.acwing.acapp.receive_code import receive_code as acapp_receive_code  # \u6b64\u5904\u6dfb\u52a0\nurlpatterns = [\npath(\"web/apply_code/\", web_apply_code, name=\"settings_acwing_web_apply_code\"), # \u6b64\u5904\u4fee\u6539\npath(\"web/receive_code/\", web_receive_code, name=\"settings_acwing_web_receive_code\"), # \u6b64\u5904\u4fee\u6539\npath(\"acapp/apply_code/\", acapp_apply_code, name=\"settings_acwing_acapp_apply_code\"),  # \u6b64\u5904\u6dfb\u52a0\npath(\"acapp/receive_code/\", acapp_receive_code, name=\"settings_acwing_acapp_receive_code\"),  # \u6b64\u5904\u6dfb\u52a0\n]\n</code></pre> <p>\u8fd9\u4e2a\u65f6\u5019\u5728\u91cd\u542f\u670d\u52a1\u540e\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165 <code>https://app4588.acapp.acwing.com.cn/settings/acwing/acapp/apply_code/</code>\u53ef\u4ee5\u5f97\u5230\u7ed3\u679c <code>{\"result\": \"success\", \"appid\": \"4588\", \"redirect_uri\": \"https%3A//app4588.acapp.acwing.com.cn/settings/acwing/acapp/receive_code/\", \"scope\": \"userinfo\", \"state\": \"88516570\"}</code>\u3002</p> <p>\u524d\u7aef\u5b9e\u73b0</p> <p>\u5728\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/settings/zbase.js</code> \u4e2d\u4fee\u6539\uff1a</p> <pre><code>    ...\nthis.start();\n}\nstart() { // \u4fee\u6539\u8fd9\u4e2a\u51fd\u6570\nif (this.platform === \"ACAPP\") {\nthis.getinfo_acapp();\n} else {\nthis.getinfo_web(); this.add_listening_events();\n}\n}\nadd_listening_events() {\nlet outer = this;\n...\nlogin() { this.$register.hide();\nthis.$login.show();\n}\n// \u6dfb\u52a0\nacapp_login(appid, redirect_uri, scope, start) {\nlet outer = this;\nthis.root.AcWingOS.api.oauth2.authorize(appid, redirect_uri, scope, state, function(resp) {\nconsole.log(\"called from acapp_login function\");\nconsole.log(resp);\nif (resp.result === \"success\") {\nouter.username = resp.username;\nouter.photo = resp.photo;\nouter.hide();\nouter.root.menu.show();\n}\n});\n}\n// \u6dfb\u52a0\ngetinfo_acapp() {\nlet outer = this;\n$.ajax ({\nurl: \"https://app4588.acapp.acwing.com.cn/settings/acwing/acapp/apply_code/\",\ntpye: \"GET\",\nsuccess: function(resp) {\nif (resp.result === \"success\") {\nouter.acapp_login(resp.appid, resp.redirect_uri, resp.scope, resp.state);\n}\n}\n});\n}\ngetinfo_web() { // \u4fee\u6539\u51fd\u6570\u540d\u79f0\nlet outer = this;\n$.ajax({\n...\n</code></pre> <p>\u4fee\u6539\u6587\u4ef6 <code>/home/acs/acapp/game/views/settings/acwing/acapp/receive_code.py</code>\uff1a</p> <pre><code>from django.http import JsonResponse # \u6b64\u5904\u4fee\u6539\nfrom django.core.cache import cache\nimport requests\nfrom django.contrib.auth.models import User\nfrom game.models.player.player import Player\n# \u5220\u9664 from django.contrib.auth import login\nfrom random import randint\ndef receive_code(request):\ndata = request.GET\nif \"errcode\" in data: # \u6b64\u5904\u4fee\u6539\nreturn JsonResponse({\n'result': \"apply failed\",\n'errcode': data['errcode'],\n'errmsg': data['errmsg'],\n})\ncode = data.get('code')\nstate = data.get('state')\nprint(\"code:%s  state:%s\" %(code, state))\nif not cache.has_key(state): \nreturn JsonResponse({ # \u6b64\u5904\u4fee\u6539\n'result': \"state not exist\"\n})\ncache.delete(state) \napply_access_token_url = \"https://www.acwing.com/third_party/api/oauth2/access_token/\"\nparams = {\n'appid': \"4588\",\n'secret': \"ea08584c059441c297b952e06395ea08\",\n'code': code,\n}\naccess_token_res = requests.get(apply_access_token_url, params=params).json()\naccess_token = access_token_res['access_token']\nopenid = access_token_res['openid']\nplayers = Player.objects.filter(openid=openid)\nif players.exists():\n# \u5220\u9664login(request, players[0].user) \n# \u5220\u9664return redirect(\"index\")\n# \u6dfb\u52a0\u4e0b\u9762\u4ee3\u7801\nplayer = players[0]\nreturn JsonResponse({\n'result': \"success\",\n'username': player.user.username,\n'photo': player.photo,\n})\nget_userinfo_url = \"https://www.acwing.com/third_party/api/meta/identity/getinfo/\"\nparams = {\n\"access_token\": access_token,\n\"openid\": openid\n}\nuserinfo_res = requests.get(get_userinfo_url, params=params).json()\nusername = userinfo_res['username']\nphoto = userinfo_res['photo']\nwhile User.objects.filter(username=username).exists():\nusername += str(randint(0, 9))\nuser = User.objects.create(username=username)\nplayer = Player.objects.create(user=user, photo=photo, openid=openid)\n# \u5220\u9664 login(request, user)\n# \u5220\u9664return redirect(\"index\")\n# \u6dfb\u52a0\u4e0b\u9762\u4ee3\u7801\nreturn JsonResponse({\n'result': \"success\",\n'username': player.user.username,\n'photo': player.photo,\n})\n</code></pre> <p>\u91cd\u65b0\u6253\u5305\u540e\u91cd\u542f\u670d\u52a1\uff0c\u5c31\u53ef\u4ee5\u4e00\u952e\u767b\u5f55\u4e86\u3002</p> <p>\u63d0\u4ea4\u4ee3\u7801\uff1a</p> <pre><code>git add .\ngit commit -m \"implement acapp acwing auth2 login system\"\n</code></pre>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E5%9B%9B%E3%80%81%E9%83%A8%E7%BD%B2nginx%E5%92%8C%E5%AF%B9%E6%8E%A5AcApp/","title":"\u7b2c\u56db\u7ae0 \u90e8\u7f72nginx\u548c\u5bf9\u63a5AcApp","text":"<p>\u4e24\u70b9\u6ce8\u610f\uff1a</p> <ul> <li>\u6bcf\u6b21\u66f4\u65b0 <code>js</code> \u6587\u4ef6\u4e4b\u540e\u8bb0\u7740\u91cd\u65b0\u6253\u5305\u6587\u4ef6\uff0c\u5728\u6587\u4ef6\u5939 <code>/home/acs/acapp/scripts</code> \u4e0b\u6267\u884c\uff1a<code>./compress_game_js.sh</code> \u5373\u53ef\u3002\u73b0\u5728\u7531\u4e8e\u914d\u7f6e\u5230\u4e86 <code>nginx</code> \u4e0a\uff0c\u5b83\u9700\u8981\u6267\u884c <code>python3 manage.py collectstatic</code>\uff0c\u4e0b\u9762\u7b2c\u4e09\u6b65\u4e2d\u4fee\u6539\u4e86\u6253\u5305\u6587\u4ef6\u7684\u547d\u4ee4\uff0c\u73b0\u5728\u4e24\u4e2a\u547d\u4ee4\u5408\u4e8c\u4e3a\u4e00\uff0c\u53ea\u9700\u8981\u5728\u76ee\u5f55 <code>/acapp/</code> \u4e0b\u9700\u6267\u884c <code>./scripts/compress_game_js.sh</code> \u5373\u53ef\u3002</li> <li>\u6bcf\u4e00\u6b21\u6267\u884c <code>python3 manage.py collectstatic</code>\uff0c\u90fd\u9700\u8981\u6e05\u9664\u6d4f\u89c8\u5668\u7f13\u5b58\uff1a<ul> <li>\u786c\u5237\u65b0\uff1a<code>shift + command + r</code>\uff0c\u53ef\u4ee5\u89e3\u51b3\u7edd\u5927\u591a\u6570\u95ee\u9898\u3002</li> <li>\u6e05\u9664\u7f13\u5b58\u5e76\u786c\u5237\u65b0\uff1a\u5f00\u53d1\u8005\u6a21\u5f0f\u4e0b\uff0c\u4f7f\u7528\u53f3\u952e\u70b9\u51fb\u5237\u65b0\u6309\u94ae\uff0c\u9009\u62e9 <code>\u6e05\u9664\u7f13\u5b58\u5e76\u786c\u5237\u65b0</code></li> </ul> </li> </ul>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E5%9B%9B%E3%80%81%E9%83%A8%E7%BD%B2nginx%E5%92%8C%E5%AF%B9%E6%8E%A5AcApp/#443https80http","title":"\u4e00 \u3001\u589e\u52a0\u5bb9\u5668\u7684\u6620\u5c04\u7aef\u53e3\uff1a443(https)\u300180(http)","text":"<ul> <li>\u767b\u5f55\u5bb9\u5668\uff0c\u5173\u95ed\u6240\u6709\u8fd0\u884c\u4e2d\u7684\u4efb\u52a1\u3002</li> <li>\u767b\u5f55\u8fd0\u884c\u5bb9\u5668\u7684\u670d\u52a1\u5668\uff0c\u7136\u540e\u6267\u884c\uff1a</li> </ul> <pre><code>docker commit CONTAINER_NAME django_lesson:1.1  # \u5c06\u5bb9\u5668\u4fdd\u5b58\u6210\u955c\u50cf\uff0c\u5c06CONTAINER_NAME\u66ff\u6362\u6210\u5bb9\u5668\u540d\u79f0\n\ndocker stop CONTAINER_NAME  # \u5173\u95ed\u5bb9\u5668\n\ndocker rm CONTAINER_NAME # \u5220\u9664\u5bb9\u5668\n\n# \u4f7f\u7528\u4fdd\u5b58\u7684\u955c\u50cf\u91cd\u65b0\u521b\u5efa\u5bb9\u5668\ndocker run -p 20000:22 -p 8000:8000 -p 80:80 -p 443:443 --name CONTAINER_NAME -itd django_lesson:1.1\n</code></pre> <ul> <li>\u53bb\u4e91\u670d\u52a1\u5668\u63a7\u5236\u53f0\uff0c\u5728\u5b89\u5168\u7ec4\u914d\u7f6e\u4e2d\u5f00\u653e80\u548c443\u7aef\u53e3\u3002</li> </ul>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E5%9B%9B%E3%80%81%E9%83%A8%E7%BD%B2nginx%E5%92%8C%E5%AF%B9%E6%8E%A5AcApp/#acwing-acapp","title":"\u4e8c\u3001\u5728 Acwing \u4e0a\u521b\u5efa Acapp","text":"<p>\u7cfb\u7edf\u5206\u914d\u7684\u57df\u540d\u3001nginx\u914d\u7f6e\u6587\u4ef6\u53cahttps\u8bc1\u4e66\u5728\u5982\u4e0b\u4f4d\u7f6e\uff1a</p> <p></p> <p>\u5728 <code>\u670d\u52a1\u5668IP</code> \u4e00\u680f\u586b\u5165\u81ea\u5df1\u670d\u52a1\u5668\u7684ip\u5730\u5740\u3002</p> <p>\u5c06 <code>nginx.conf</code> \u4e2d\u7684\u5185\u5bb9\u5199\u5165\u670d\u52a1\u5668 /etc/nginx/<code>nginx.conf</code> \u6587\u4ef6\u4e2d\u3002 \u5c06 <code>acapp.key</code> \u4e2d\u7684\u5185\u5bb9\u5199\u5165\u670d\u52a1\u5668 /etc/nginx/cert/<code>acapp.key</code> \u6587\u4ef6\u4e2d\u3002 \u5c06 <code>acapp.pem</code> \u4e2d\u7684\u5185\u5bb9\u5199\u5165\u670d\u52a1\u5668 /etc/nginx/cert/<code>acapp.pem</code> \u6587\u4ef6\u4e2d\u3002</p> <p>\u7136\u540e\u5728\u670d\u52a1\u5668\u4e2d\u542f\u52a8 <code>nginx</code> \u670d\u52a1\uff1a<code>sudo /etc/init.d/nginx start</code></p> <p>\u6210\u529f\u542f\u52a8\u4e4b\u540e\u4f1a\u63d0\u793a <code>OK</code>\uff0c\u5982\u679c\u5b58\u5728\u9519\u8bef\u5219\u8f93\u5165 <code>sudo nginx -s reload</code>\uff0c\u4f1a\u63d0\u793a\u9519\u5728\u4ec0\u4e48\u5730\u65b9\uff0c\u5982\u679c\u6ca1\u95ee\u9898\uff0c\u5219\u63d0\u793a <code>OK</code>\u3002</p> <p>\u6216\u8005\u5728\u6587\u4ef6 <code>/var/log/nginx/error.log</code> \u4e5f\u53ef\u4ee5\u67e5\u770b\u5b58\u5728\u7684\u9519\u8bef\u3002</p>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E5%9B%9B%E3%80%81%E9%83%A8%E7%BD%B2nginx%E5%92%8C%E5%AF%B9%E6%8E%A5AcApp/#django","title":"\u4e09\u3001\u4fee\u6539 django \u9879\u76ee\u7684\u914d\u7f6e","text":"<ul> <li>\u4fee\u6539\u6587\u4ef6\uff1a<code>/acs/acapp/acapp/setting.py</code>\uff0c\u5c06\u7b2c\u4e8c\u6b65\u4e2d\u7cfb\u7edf\u5206\u914d\u7684\u57df\u540d\u52a0\u5165\u5230 <code>`ALLOWED_HOSTS</code> \u5217\u8868\u4e2d\uff0c\u6ce8\u610f\u53ea\u9700\u8981\u6dfb\u52a0 <code>https://</code> \u540e\u9762\u7684\u5185\u5bb9\uff0c\u6dfb\u52a0\u4e4b\u540e\u662f\u8fd9\u6837\u5b50\u7684\uff1a<code>ALLOWED_HOSTS = [\"123.60.154.120\", \"app4588.acapp.acwing.com.cn\"]</code>\u3002</li> <li> <p>\u4fee\u6539\u6587\u4ef6\uff1a<code>/acs/acapp/acapp/setting.py</code>\uff0c\u5c06 <code>DEBUG = True</code> \u4fee\u6539\u4e3a <code>False</code>\u3002</p> </li> <li> <p>\u5f52\u6863<code>static</code>\u6587\u4ef6\uff1a\u5728\u6587\u4ef6\u5939 <code>/acapp</code> \u4e0b\u6267\u884c\uff1a<code>python3 manage.py collectstatic</code></p> </li> </ul> <p>\u5728\u6bcf\u6b21\u4fee\u6539 <code>js</code> \u6587\u4ef6\u4e4b\u540e\u90fd\u9700\u8981\u5148\u6253\u5305\u7136\u540e\u6267\u884c\u5f52\u6863\u547d\u4ee4\uff0c\u8fd9\u91cc\u5c06\u4e8c\u8005\u547d\u4ee4\u5408\u4e8c\u4e3a\u4e00\uff0c\u5728 <code>/acapp/scripts/compress_game_js.sh</code> \u4e2d\u5c3e\u90e8\u6dfb\u52a0\u547d\u4ee4\uff1a</p> <p><code>echo yes | python3 manage.py collectstatic</code></p> <p>\u540e\u9762\u4ec5\u5728\u76ee\u5f55 <code>/acapp/</code> \u4e0b\u9700\u6267\u884c <code>./scripts/compress_game_js.sh</code> \u5373\u53ef\u3002</p>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E5%9B%9B%E3%80%81%E9%83%A8%E7%BD%B2nginx%E5%92%8C%E5%AF%B9%E6%8E%A5AcApp/#uwsgi","title":"\u56db\u3001\u914d\u7f6e uwsgi","text":"<p>\u4e0a\u9762\u7684\u8bbe\u7f6e\uff0c\u4f7f\u7528\u6237\u901a\u8fc7 <code>80 or 443</code> \u7aef\u53e3\u8bbf\u95ee\u7f51\u7ad9\u7684\u65f6\u5019\u4f7f\u5148\u8bbf\u95ee <code>nginx</code> \u670d\u52a1\u5668\uff0c\u800c <code>uwsgi</code> \u6587\u4ef6\u5c31\u662f\u8fde\u63a5 <code>nginx</code> \u548c <code>django</code> \u4e4b\u95f4\u7684\u6865\u6881\u3002</p> <p>\u5728\u6587\u4ef6\u5939 <code>/acapp/scripts</code> \u4e0b\u9762\u6dfb\u52a0\u6587\u4ef6 <code>uwsgi.ini</code> \u5e76\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>[uwsgi]\nsocket          = 127.0.0.1:8000\nchdir           = /home/acs/acapp\nwsgi-file       = acapp/wsgi.py\nmaster          = true\nprocesses       = 2\nthreads         = 5\nvacuum          = true\n</code></pre> <p>\u5728\u6587\u4ef6\u5939 <code>/acapp</code> \u4e0b\u6267\u884c\uff1a<code>uwsgi --ini scripts/uwsgi.ini</code> \uff0c\u542f\u52a8 <code>uwsgi</code> \u670d\u52a1\u3002</p>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E5%9B%9B%E3%80%81%E9%83%A8%E7%BD%B2nginx%E5%92%8C%E5%AF%B9%E6%8E%A5AcApp/#_1","title":"\u4e94\u3001\u586b\u5199\u5269\u4f59\u4fe1\u606f","text":"<ul> <li>\u6807\u9898\uff1a\u5e94\u7528\u7684\u540d\u79f0</li> <li>\u5173\u952e\u5b57\uff1a\u5e94\u7528\u7684\u6807\u7b7e\uff08\u9009\u586b\uff09</li> <li>css\u5730\u5740\uff1acss\u6587\u4ef6\u7684\u5730\u5740\uff0c\u4f8b\u5982\uff1ahttps://app76.acapp.acwing.com.cn/static/css/game.css</li> <li>js\u5730\u5740\uff1ajs\u6587\u4ef6\u7684\u5730\u5740\uff0c\u4f8b\u5982\uff1ahttps://app76.acapp.acwing.com.cn/static/js/dist/game.js</li> <li>\u4e3b\u7c7b\u540d\uff1a\u5e94\u7528\u7684main class\uff0c\u4f8b\u5982AcGame\u3002</li> <li>\u56fe\u6807\uff1a4:3\u7684\u56fe\u7247</li> <li>\u5e94\u7528\u4ecb\u7ecd\uff1a\u4ecb\u7ecd\u5e94\u7528\uff0c\u652f\u6301markdown + latex\u8bed\u6cd5\u3002</li> </ul>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E5%9B%9B%E3%80%81%E9%83%A8%E7%BD%B2nginx%E5%92%8C%E5%AF%B9%E6%8E%A5AcApp/#_2","title":"\u516d\u3001\u8c03\u6574\u4ee3\u7801","text":"<p>\u6253\u5f00\u83dc\u5355\u9875\u9762\uff1a</p> <p>\u4e4b\u524d\u4e3a\u4e86\u65b9\u4fbf\u8c03\u8bd5\uff0c\u6253\u5f00\u7f51\u9875\u76f4\u63a5\u8fdb\u5165\u6e38\u620f\u754c\u9762\uff0c\u6ce8\u91ca\u6389\u4e86\u83dc\u5355\u9875\u9762\u3002\u73b0\u5728\u53bb\u6389\u6ce8\u91ca\uff1a <code>/home/acs/acapp/game/static/js/src/zbase.js</code> </p> <pre><code>export class AcGame {\nconstructor(id) {   this.id = id;\nthis.$ac_game = $('#' + id);\nthis.menu = new AcGameMenu(this); // \u53bb\u6389\u6ce8\u91ca\nthis.playground = new AcGamePlayground(this);\nthis.start();\n}\nstart() {\n}\n}\n</code></pre> <p>\u540c\u65f6\u4fee\u6539\u6587\u4ef6 <code>/home/acs/acapp/game/static/js/src/playground/zbase.js</code> </p> <pre><code>class AcGamePlayground {\nconstructor(root) {\nthis.root = root;\nthis.$playground = $(`&lt;div class=\"ac-game-playground\"&gt;&lt;/div&gt;`);\nthis.hide(); // \u6ce8\u91ca\nthis.start();\n}\nget_random_color() {\nlet colors = [\"blue\", \"red\", \"pink\", \"Fuchsia\", \"green\", \"yellow\", \"Aqua\"]\nreturn colors[Math.floor(Math.random() * 7)]\n}\nstart() {\n}\nshow() { // \u6253\u5f00playground\u754c\u9762\nthis.$playground.show();\n/* \u52a0\u8f7d\u754c\u9762\u4e4b\u540e\u624d\u5f00\u59cb\u521d\u59cb\u5316\uff01\u4e0d\u7136\u7a97\u53e3\u7f29\u653e\u4e4b\u540e\u5e55\u5e03\u4e0d\u4f1a\u6539\u53d8\u5927\u5c0f */\nthis.root.$ac_game.append(this.$playground);\n// \u5b58\u50a8\u754c\u9762\u7684\u5bbd\u9ad8\uff0c\u56e0\u4e3a\u540e\u9762\u5e38\u7528\nthis.width = this.$playground.width();\nthis.height = this.$playground.height();\nthis.game_map = new GameMap(this); // \u6dfb\u52a0\u5730\u56fe\nthis.players = []; // \u6dfb\u52a0\u73a9\u5bb6\nthis.players.push(new Player(this, this.width / 2, this.height / 2, this.height * 0.05, \"white\", this.height * 0.4, true));\nfor (let i = 0; i &lt; 5; i ++ ) { // \u6dfb\u52a0\u654c\u4eba\nthis.players.push(new Player(this, this.width / 2, this.height / 2, this.height * 0.05, this.get_random_color(), this.height * 0.4, false)); // \u6ce8\u610f\u654c\u4eba\u662f false\n}\n}\nhide() { // \u5173\u95edplayground\u754c\u9762\nthis.$playground.hide();\n}\n}\n</code></pre> <p>\u8fd8\u53d1\u73b0\u4e0d\u7ba1\u7a97\u53e3\u9875\u9762\u5982\u4f55\u79fb\u52a8\uff0c\u83dc\u5355\u9875\u9762\u6c38\u8fdc\u56fa\u5b9a\uff0c\u800c\u4e14\u5b57\u4f53\u4e0d\u7f8e\u89c2\uff0c\u8fd9\u91cc\u8fdb\u5165\u6587\u4ef6 <code>/home/acs/acapp/game/static/css/game.css</code> \u6587\u4ef6\u5939\u4fee\u6539\uff1a</p> <pre><code>.ac-game-menu-field {\nwidth: 20vw;\nposition: relative;\ntop: 50%; /* \u6b64\u5904\u4fee\u6539 */\nleft: 50%; /* \u6b64\u5904\u4fee\u6539 */\n}\n.ac-game-menu-field-item {\nheight: 6vh; /* \u6b64\u5904\u4fee\u6539 */\nwidth: 18vw;\ncolor: white;\nfont-size: 4vh; /* \u6b64\u5904\u4fee\u6539 */\nfont-style: italic;\n/* \u5185\u8fb9\u8ddd\u5220\u6389\uff1apadding: 2vh;*/\ncursor: pointer;\ntext-align: center;\nbackground-color: rgba(39, 21, 28, 0.6);\nborder-radius: 10px;\nletter-spacing: 0.5vw;\n}\n</code></pre> <p>\u63d0\u4ea4\u4ee3\u7801\uff1a</p> <pre><code>git add .\ngit commit -m \"create a acapp\"\ngit push    </code></pre> <p>\u5230\u8fd9\u91cc\uff0c\u90e8\u7f72\u5230\u4e86 <code>nginx</code> \u4e0a\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u5206\u914d\u7684\u7f51\u5740\u8bbf\u95ee\u3002\u5982\u679c\u8981\u50cf\u4e4b\u524d\u90a3\u6837\u901a\u8fc7 <code>\u516c\u7f51IP:\u7aef\u53e3</code> \u8bbf\u95ee\u9700\u8981\u6267\u884c <code>python3 manage.py runserver 0.0.0.0:8000</code></p>"},{"location":"blogs/post/AcWing%E5%B7%A5%E7%A8%8B%E8%AF%BE%E2%80%94%E2%80%94Django/%E7%AE%80%E4%BB%8B/","title":"\u9879\u76ee\u7b80\u4ecb","text":"<p>\u9879\u76ee\u5730\u5740</p> <p>\u6ce8\u610f\uff1a</p> <ol> <li> <p>\u9879\u76ee\u590d\u73b0\u8fc7\u7a0b\u4e2d\u5982\u679c\u51fa\u73b0\u95ee\u9898\u53ef\u4ee5\u5728\u4ed3\u5e93\u67e5\u770b\u5386\u53f2\u4ee3\u7801\u4e0e\u672c\u5730\u4ee3\u7801\u5bf9\u6bd4\u53d1\u73b0bug\u3002</p> </li> <li> <p>\u6ce8\u610f\u6587\u7ae0\u4e2d\u7684\u4ee3\u7801\u4f1a\u6709BUG\uff0c\u5199\u4ee3\u7801\u4e00\u5b9a\u8981\u5728\u4ed3\u5e93\u67e5\u770b\u5386\u53f2\u7248\u672c\u5bf9\u7740\u5199\uff01</p> </li> </ol>"},{"location":"blogs/post/Linux/%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/Linux/","title":"Linux","text":""},{"location":"blogs/post/Linux/%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/Linux/#_1","title":"\u6587\u4ef6\u68c0\u7d22","text":"<pre><code>find /path/to/directory/ -name '*.py' # \u641c\u7d22\u67d0\u4e2a\u6587\u4ef6\u8def\u5f84\u4e0b\u7684\u6240\u6709*.py\u6587\u4ef6\ngrep xxx # \u4ecestdin\u4e2d\u8bfb\u5165\u82e5\u5e72\u884c\u6570\u636e\uff0c\u5982\u679c\u67d0\u884c\u4e2d\u5305\u542bxxx\uff0c\u5219\u8f93\u51fa\u8be5\u884c\uff1b\u5426\u5219\u5ffd\u7565\u8be5\u884c\u3002\nwc # \u7edf\u8ba1\u884c\u6570\u3001\u5355\u8bcd\u6570\u3001\u5b57\u8282\u6570\n# \u65e2\u53ef\u4ee5\u4ecestdin\u4e2d\u76f4\u63a5\u8bfb\u5165\u5185\u5bb9\uff1b\u4e5f\u53ef\u4ee5\u5728\u547d\u4ee4\u884c\u53c2\u6570\u4e2d\u4f20\u5165\u6587\u4ef6\u540d\u5217\u8868\uff1b\nwc -l # \u7edf\u8ba1\u884c\u6570\nwc -w # \u7edf\u8ba1\u5355\u8bcd\u6570\nwc -c # \u7edf\u8ba1\u5b57\u8282\u6570\ntree # \u5c55\u793a\u5f53\u524d\u76ee\u5f55\u7684\u6587\u4ef6\u7ed3\u6784\ntree /path/to/directory/ # \u5c55\u793a\u67d0\u4e2a\u76ee\u5f55\u7684\u6587\u4ef6\u7ed3\u6784\ntree -a # \u5c55\u793a\u9690\u85cf\u6587\u4ef6\nag xxx # \u641c\u7d22\u5f53\u524d\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\uff0c\u68c0\u7d22xxx\u5b57\u7b26\u4e32\ncut # \u5206\u5272\u4e00\u884c\u5185\u5bb9\n# \u4ecestdin\u4e2d\u8bfb\u5165\u591a\u884c\u6570\u636e\necho $PATH | cut -d ':' -f 3,5 # \u8f93\u51faPATH\u7528:\u5206\u5272\u540e\u7b2c3\u30015\u5217\u6570\u636e\necho $PATH | cut -d ':' -f 3-5 # \u8f93\u51faPATH\u7528:\u5206\u5272\u540e\u7b2c3-5\u5217\u6570\u636e\necho $PATH | cut -c 3,5 # \u8f93\u51faPATH\u7684\u7b2c3\u30015\u4e2a\u5b57\u7b26\necho $PATH | cut -c 3-5 # \u8f93\u51faPATH\u7684\u7b2c3-5\u4e2a\u5b57\u7b26\nsort # \u5c06\u6bcf\u884c\u5185\u5bb9\u6309\u5b57\u5178\u5e8f\u6392\u5e8f\n# \u53ef\u4ee5\u4ecestdin\u4e2d\u8bfb\u53d6\u591a\u884c\u6570\u636e\n# \u53ef\u4ee5\u4ece\u547d\u4ee4\u884c\u53c2\u6570\u4e2d\u8bfb\u53d6\u6587\u4ef6\u540d\u5217\u8868\nxargs # \u5c06stdin\u4e2d\u7684\u6570\u636e\u7528\u7a7a\u683c\u6216\u56de\u8f66\u5206\u5272\u6210\u547d\u4ee4\u884c\u53c2\u6570\nfind . -name '*.py' | xargs cat | wc -l # \u7edf\u8ba1\u5f53\u524d\u76ee\u5f55\u4e0b\u6240\u6709python\u6587\u4ef6\u7684\u603b\u884c\u6570\nfind . -name '*.py' | xargs rm # \u627e\u5230\u5f53\u524d\u76ee\u5f55\u4e0b\u6240\u6709python\u6587\u4ef6\u7684\u5e76\u5220\u9664\nfind \u6307\u5b9a\u76ee\u5f55 -type d -name \".DS_Store\" | xargs rm -rf # \u5220\u9664\u6307\u5b9a\u76ee\u5f55\u4e0b\u7684\u6240\u6709 .DS_Store \u6587\u4ef6\u5939\n</code></pre>"},{"location":"blogs/post/Linux/%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/docker/","title":"Docker","text":""},{"location":"blogs/post/Linux/%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/docker/#docker","title":"Docker\u5e38\u7528\u6307\u4ee4","text":"<pre><code># \u955c\u50cf\ndocker pull ubuntu:20.04 # \u62c9\u53d6\u4e00\u4e2a\u955c\u50cf\ndocker images # \u5217\u51fa\u672c\u5730\u6240\u6709\u955c\u50cf\ndocker image rm ubuntu:20.04 \u6216 docker rmi ubuntu:20.04 # \u5220\u9664\u955c\u50cfubuntu:20.04\ndocker [container] commit CONTAINER IMAGE_NAME:TAG # \u521b\u5efa\u67d0\u4e2acontainer\u7684\u955c\u50cf\ndocker save -o ubuntu_20_04.tar ubuntu:20.04 # \u5c06\u955c\u50cfubuntu:20.04\u5bfc\u51fa\u5230\u672c\u5730\u6587\u4ef6ubuntu_20_04.tar\u4e2d\ndocker load -i ubuntu_20_04.tar # \u5c06\u955c\u50cfubuntu:20.04\u4ece\u672c\u5730\u6587\u4ef6ubuntu_20_04.tar\u4e2d\u52a0\u8f7d\u51fa\u6765\n# \u5bb9\u5668\ndocker [container] create -it ubuntu:20.04 # \u5229\u7528\u955c\u50cfubuntu:20.04\u521b\u5efa\u4e00\u4e2a\u5bb9\u5668\u3002\ndocker ps -a # \u67e5\u770b\u672c\u5730\u7684\u6240\u6709\u5bb9\u5668\ndocker [container] start CONTAINER # \u542f\u52a8\u5bb9\u5668\ndocker [container] stop CONTAINER # \u505c\u6b62\u5bb9\u5668\ndocker [container] restart CONTAINER # \u91cd\u542f\u5bb9\u5668\ndocker [contaienr] run -itd ubuntu:20.04 # \u521b\u5efa\u5e76\u542f\u52a8\u4e00\u4e2a\u5bb9\u5668\ndocker [container] attach CONTAINER # \u8fdb\u5165\u5bb9\u5668\n# \u5148\u6309Ctrl-p\uff0c\u518d\u6309Ctrl-q\u53ef\u4ee5\u6302\u8d77\u5bb9\u5668\ndocker [container] exec CONTAINER COMMAND # \u5728\u5bb9\u5668\u4e2d\u6267\u884c\u547d\u4ee4\ndocker [container] rm CONTAINER # \u5220\u9664\u5bb9\u5668\ndocker container prune # \u5220\u9664\u6240\u6709\u5df2\u505c\u6b62\u7684\u5bb9\u5668\ndocker export -o xxx.tar CONTAINER # \u5c06\u5bb9\u5668CONTAINER\u5bfc\u51fa\u5230\u672c\u5730\u6587\u4ef6xxx.tar\u4e2d\ndocker import xxx.tar image_name:tag # \u5c06\u672c\u5730\u6587\u4ef6xxx.tar\u5bfc\u5165\u6210\u955c\u50cf\uff0c\u5e76\u5c06\u955c\u50cf\u547d\u540d\u4e3aimage_name:tag\n# docker export/import\u4e0edocker save/load\u7684\u533a\u522b\uff1a\n# export/import\u4f1a\u4e22\u5f03\u5386\u53f2\u8bb0\u5f55\u548c\u5143\u6570\u636e\u4fe1\u606f\uff0c\u4ec5\u4fdd\u5b58\u5bb9\u5668\u5f53\u65f6\u7684\u5feb\u7167\u72b6\u6001\n# save/load\u4f1a\u4fdd\u5b58\u5b8c\u6574\u8bb0\u5f55\uff0c\u4f53\u79ef\u66f4\u5927\ndocker top CONTAINER # \u67e5\u770b\u67d0\u4e2a\u5bb9\u5668\u5185\u7684\u6240\u6709\u8fdb\u7a0b\ndocker stats # \u67e5\u770b\u6240\u6709\u5bb9\u5668\u7684\u7edf\u8ba1\u4fe1\u606f\uff0c\u5305\u62ecCPU\u3001\u5185\u5b58\u3001\u5b58\u50a8\u3001\u7f51\u7edc\u7b49\u4fe1\u606f\ndocker cp xxx CONTAINER:xxx \u6216 docker cp CONTAINER:xxx xxx # \u5728\u672c\u5730\u548c\u5bb9\u5668\u95f4\u590d\u5236\u6587\u4ef6\ndocker rename CONTAINER1 CONTAINER2 # \u91cd\u547d\u540d\u5bb9\u5668\ndocker update CONTAINER --memory 500MB # \u4fee\u6539\u5bb9\u5668\u9650\u5236\n</code></pre>"},{"location":"blogs/post/Linux/%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/git/","title":"Git","text":""},{"location":"blogs/post/Linux/%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/git/#git","title":"Git\u5e38\u7528\u6307\u4ee4","text":""},{"location":"blogs/post/Linux/%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/git/#_1","title":"\u57fa\u672c\u6982\u5ff5","text":"<ul> <li>\u5de5\u4f5c\u533a\uff1a\u4ed3\u5e93\u7684\u76ee\u5f55\u3002\u5de5\u4f5c\u533a\u662f\u72ec\u7acb\u4e8e\u5404\u4e2a\u5206\u652f\u7684\u3002</li> <li>\u6682\u5b58\u533a\uff1a\u6570\u636e\u6682\u65f6\u5b58\u653e\u7684\u533a\u57df\uff0c\u7c7b\u4f3c\u4e8e\u5de5\u4f5c\u533a\u5199\u5165\u7248\u672c\u5e93\u524d\u7684\u7f13\u5b58\u533a\u3002\u6682\u5b58\u533a\u662f\u72ec\u7acb\u4e8e\u5404\u4e2a\u5206\u652f\u7684\u3002</li> <li>\u7248\u672c\u5e93\uff1a\u5b58\u653e\u6240\u6709\u5df2\u7ecf\u63d0\u4ea4\u5230\u672c\u5730\u4ed3\u5e93\u7684\u4ee3\u7801\u7248\u672c</li> <li>\u7248\u672c\u7ed3\u6784\uff1a\u6811\u7ed3\u6784\uff0c\u6811\u4e2d\u6bcf\u4e2a\u8282\u70b9\u4ee3\u8868\u4e00\u4e2a\u4ee3\u7801\u7248\u672c\u3002</li> </ul>"},{"location":"blogs/post/Linux/%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/git/#_2","title":"\u5e38\u7528\u6307\u4ee4","text":"<pre><code>git config --global user.name xxx # \u8bbe\u7f6e\u5168\u5c40\u7528\u6237\u540d\uff0c\u4fe1\u606f\u8bb0\u5f55\u5728~/.gitconfig\u6587\u4ef6\u4e2d\ngit config --global user.email xxx@xxx.com # \u8bbe\u7f6e\u5168\u5c40\u90ae\u7bb1\u5730\u5740\uff0c\u4fe1\u606f\u8bb0\u5f55\u5728~/.gitconfig\u6587\u4ef6\u4e2d\ngit init # \u5c06\u5f53\u524d\u76ee\u5f55\u914d\u7f6e\u6210git\u4ed3\u5e93\uff0c\u4fe1\u606f\u8bb0\u5f55\u5728\u9690\u85cf\u7684.git\u6587\u4ef6\u5939\u4e2d\ngit add XX # \u5c06XX\u6587\u4ef6\u6dfb\u52a0\u5230\u6682\u5b58\u533a\ngit add . # \u5c06\u6240\u6709\u5f85\u52a0\u5165\u6682\u5b58\u533a\u7684\u6587\u4ef6\u52a0\u5165\u6682\u5b58\u533a\ngit reset HEAD \u6216\u8005 git reset . # \u64a4\u9500\u6682\u5b58\u533a\u6240\u6709\u6587\u4ef6\ngit reset HEAD '\u6587\u4ef6\u540d' # \u64a4\u9500\u6682\u5b58\u533a\u6307\u5b9a\u6587\u4ef6\ngit reset HEAD XXX/ # \u64a4\u9500\u6682\u5b58\u533a\u6307\u5b9a\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\ngit rm --cached XX # \u5c06\u6587\u4ef6\u4ece\u4ed3\u5e93\u7d22\u5f15\u76ee\u5f55\u4e2d\u5220\u6389\ngit commit -m \"\u7ed9\u81ea\u5df1\u770b\u7684\u5907\u6ce8\u4fe1\u606f\" # \u5c06\u6682\u5b58\u533a\u7684\u5185\u5bb9\u63d0\u4ea4\u5230\u5f53\u524d\u5206\u652f\ngit status # \u67e5\u770b\u4ed3\u5e93\u72b6\u6001\ngit diff XX # \u67e5\u770bXX\u6587\u4ef6\u76f8\u5bf9\u4e8e\u6682\u5b58\u533a\u4fee\u6539\u4e86\u54ea\u4e9b\u5185\u5bb9\ngit log # \u67e5\u770b\u5f53\u524d\u5206\u652f\u7684\u6240\u6709\u7248\u672c\ngit reflog # \u67e5\u770bHEAD\u6307\u9488\u7684\u79fb\u52a8\u5386\u53f2\uff08\u5305\u62ec\u88ab\u56de\u6eda\u7684\u7248\u672c\uff09\ngit reset --hard HEAD^ \u6216 git reset --hard HEAD~ # \u5c06\u4ee3\u7801\u5e93\u56de\u6eda\u5230\u4e0a\u4e00\u4e2a\u7248\u672c\ngit reset --hard HEAD^^ # \u5f80\u4e0a\u56de\u6eda\u4e24\u6b21\uff0c\u4ee5\u6b64\u7c7b\u63a8\ngit reset --hard HEAD~100 # \u5f80\u4e0a\u56de\u6eda100\u4e2a\u7248\u672c\ngit reset --hard \u7248\u672c\u53f7 # \u56de\u6eda\u5230\u67d0\u4e00\u7279\u5b9a\u7248\u672c\ngit checkout \u2014 XX\u6216git restore XX # \u5c06XX\u6587\u4ef6\u5c1a\u672a\u52a0\u5165\u6682\u5b58\u533a\u7684\u4fee\u6539\u5168\u90e8\u64a4\u9500\ngit remote add origin git@git.acwing.com:xxx/XXX.git # \u5c06\u672c\u5730\u4ed3\u5e93\u5173\u8054\u5230\u8fdc\u7a0b\u4ed3\u5e93\ngit push -u (\u7b2c\u4e00\u6b21\u9700\u8981-u\u4ee5\u540e\u4e0d\u9700\u8981) # \u5c06\u5f53\u524d\u5206\u652f\u63a8\u9001\u5230\u8fdc\u7a0b\u4ed3\u5e93\ngit push origin branch_name # \u5c06\u672c\u5730\u7684\u67d0\u4e2a\u5206\u652f\u63a8\u9001\u5230\u8fdc\u7a0b\u4ed3\u5e93\ngit clone git@git.acwing.com:xxx/XXX.git # \u5c06\u8fdc\u7a0b\u4ed3\u5e93XXX\u4e0b\u8f7d\u5230\u5f53\u524d\u76ee\u5f55\u4e0b\ngit checkout -b branch_name # \u521b\u5efa\u5e76\u5207\u6362\u5230branch_name\u8fd9\u4e2a\u5206\u652f\ngit branch # \u67e5\u770b\u6240\u6709\u5206\u652f\u548c\u5f53\u524d\u6240\u5904\u5206\u652f\ngit checkout branch_name # \u5207\u6362\u5230branch_name\u8fd9\u4e2a\u5206\u652f\ngit merge branch_name # \u5c06\u5206\u652fbranch_name\u5408\u5e76\u5230\u5f53\u524d\u5206\u652f\u4e0a\ngit branch -d branch_name # \u5220\u9664\u672c\u5730\u4ed3\u5e93\u7684branch_name\u5206\u652f\ngit branch branch_name # \u521b\u5efa\u65b0\u5206\u652f\ngit push --set-upstream origin branch_name # \u8bbe\u7f6e\u672c\u5730\u7684branch_name\u5206\u652f\u5bf9\u5e94\u8fdc\u7a0b\u4ed3\u5e93\u7684branch_name\u5206\u652f\ngit push -d origin branch_name # \u5220\u9664\u8fdc\u7a0b\u4ed3\u5e93\u7684branch_name\u5206\u652f\ngit pull # \u5c06\u8fdc\u7a0b\u4ed3\u5e93\u7684\u5f53\u524d\u5206\u652f\u4e0e\u672c\u5730\u4ed3\u5e93\u7684\u5f53\u524d\u5206\u652f\u5408\u5e76\ngit pull origin branch_name # \u5c06\u8fdc\u7a0b\u4ed3\u5e93\u7684branch_name\u5206\u652f\u4e0e\u672c\u5730\u4ed3\u5e93\u7684\u5f53\u524d\u5206\u652f\u5408\u5e76\ngit branch --set-upstream-to=origin/branch_name1 branch_name2 # \u5c06\u8fdc\u7a0b\u7684branch_name1\u5206\u652f\u4e0e\u672c\u5730\u7684branch_name2\u5206\u652f\u5bf9\u5e94\ngit checkout -t origin/branch_name # \u5c06\u8fdc\u7a0b\u7684branch_name\u5206\u652f\u62c9\u53d6\u5230\u672c\u5730\ngit stash # \u5c06\u5de5\u4f5c\u533a\u548c\u6682\u5b58\u533a\u4e2d\u5c1a\u672a\u63d0\u4ea4\u7684\u4fee\u6539\u5b58\u5165\u6808\u4e2d\ngit stash apply # \u5c06\u6808\u9876\u5b58\u50a8\u7684\u4fee\u6539\u6062\u590d\u5230\u5f53\u524d\u5206\u652f\uff0c\u4f46\u4e0d\u5220\u9664\u6808\u9876\u5143\u7d20\ngit stash drop # \u5220\u9664\u6808\u9876\u5b58\u50a8\u7684\u4fee\u6539\ngit stash pop # \u5c06\u6808\u9876\u5b58\u50a8\u7684\u4fee\u6539\u6062\u590d\u5230\u5f53\u524d\u5206\u652f\uff0c\u540c\u65f6\u5220\u9664\u6808\u9876\u5143\u7d20\ngit stash list # \u67e5\u770b\u6808\u4e2d\u6240\u6709\u5143\u7d20\ngit config --global init.defaultBranch main # \u5c06\u672c\u5730\u9ed8\u8ba4\u521b\u5efa\u7684\u5206\u652f\u547d\u540d\u4e3a main\n</code></pre>"},{"location":"blogs/post/Linux/%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/shell/","title":"Shell","text":""},{"location":"blogs/post/Linux/%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/shell/#_1","title":"\u4e00\u3001\u6982\u8bba","text":"<p>shell\u662f\u6211\u4eec\u901a\u8fc7\u547d\u4ee4\u884c\u4e0e\u64cd\u4f5c\u7cfb\u7edf\u6c9f\u901a\u7684\u8bed\u8a00\u3002</p> <p>shell\u811a\u672c\u53ef\u4ee5\u76f4\u63a5\u5728\u547d\u4ee4\u884c\u4e2d\u6267\u884c\uff0c\u4e5f\u53ef\u4ee5\u5c06\u4e00\u5957\u903b\u8f91\u7ec4\u7ec7\u6210\u4e00\u4e2a\u6587\u4ef6\uff0c\u65b9\u4fbf\u590d\u7528\u3002 AC Terminal\u4e2d\u7684\u547d\u4ee4\u884c\u53ef\u4ee5\u770b\u6210\u662f\u4e00\u4e2a\u201cshell\u811a\u672c\u5728\u9010\u884c\u6267\u884c\u201d\u3002</p> <p>Linux\u4e2d\u5e38\u89c1\u7684shell\u811a\u672c\u6709\u5f88\u591a\u79cd\uff0c\u5e38\u89c1\u7684\u6709\uff1a</p> <ul> <li>Bourne Shell(/usr/bin/sh\u6216/bin/sh)</li> <li>Bourne Again Shell(/bin/bash)</li> <li>C Shell(/usr/bin/csh)</li> <li> <p>K Shell(/usr/bin/ksh)</p> </li> <li> <p>zsh</p> </li> <li>\u2026</li> </ul> <p>Linux\u7cfb\u7edf\u4e2d\u4e00\u822c\u9ed8\u8ba4\u4f7f\u7528 <code>bash</code>\uff0c\u6240\u4ee5\u63a5\u4e0b\u6765\u8bb2\u89e3 <code>bash</code> \u4e2d\u7684\u8bed\u6cd5\u3002 \u6587\u4ef6\u5f00\u5934\u9700\u8981\u5199 <code>/bin/bash</code>\uff0c\u6307\u660e<code>bash</code>\u4e3a\u811a\u672c\u89e3\u91ca\u5668\u3002</p>"},{"location":"blogs/post/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/","title":"\u7b2c\u4e00\u7ae0 \u7ebf\u6027\u56de\u5f52","text":""},{"location":"blogs/post/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/#_1","title":"\u4e00\u3001\u7ebf\u6027\u56de\u5f52","text":"<p>\u9884\u6d4b\u503c \\(h_{\\theta}(x)\\)\uff1a</p> \\[ \\begin{align*} h_{\\theta}(x) &amp;= \\theta_0 \\ + \\ \\theta_1x_1 \\ + \\ \\theta_2x_2 + \\dots \\\\ &amp;= \\sum_{i=0}^{n}\\theta_ix_i\\\\ &amp;= \\theta^Tx \\\\ \\end{align*} \\] <p>\u4e0a\u5f0f\u4e2d \\(\\theta_0\\) \u901a\u5e38\u88ab\u79f0\u4e3a\u504f\u7f6e\u503c\u3002</p> <p>\u8bef\u5dee \\(\\varepsilon\\)\uff1a\u771f\u5b9e\u503c \\(y^{(i)}\\) \u4e0e\u9884\u6d4b\u503c \\(h_{\\theta}(x)\\) \u4e4b\u95f4\u7684\u5dee\u5f02\u3002\u8bef\u5dee \\(\\varepsilon^{(i)}\\) \u662f\u72ec\u7acb\u540c\u5206\u5e03\u4e14 \\(\\varepsilon^{(i)} \\sim N(0,\\ \\theta^2)\\)</p> <p>\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u6837\u672c\u6709\uff1a</p> \\[ y^{(i)} = \\theta^Tx^{(i)} \\ + \\ \\varepsilon^{(i)} \\tag 1 \\\\ \\] <p>\u663e\u7136\uff0c\u6211\u4eec\u7684\u76ee\u6807\u662f\u4f7f \\(|\\varepsilon^{(i)}|\\) \u5c3d\u53ef\u80fd\u5c0f\u3002</p> <p>\u53c8\u56e0\u4e3a\u6709 \\(\\varepsilon^{(i)} \\sim N(0,\\ \\theta^2)\\)\uff0c\u5373 </p> \\[ p(\\varepsilon^{(i)}) = \\frac{1}{\\sqrt{2 \\pi} \\sigma} exp(- \\frac{(\\varepsilon^{(i)})^2}{2\\sigma^2}) \\tag 2 \\\\ \\] <p>\u6b32\u4f7f \\(|\\varepsilon^{(i)}|\\) \u5c3d\u53ef\u80fd\u5c0f\uff0c\u7b49\u4ef7\u4e8e\u4f7f\u5f97 \\(|\\varepsilon^{(i)}|\\) \u5c3d\u53ef\u80fd\u63a5\u8fd1\u4e8e \\(0\\)\uff0c\u4e5f\u5c31\u662f\u8bf4\u4f7f\u7684\u6982\u7387 \\(p(\\varepsilon^{(i)})\\) \u5c3d\u53ef\u80fd\u5927\uff08\u56e0\u4e3a\u5747\u503c\u4e3a \\(0\\) \u7684\u6b63\u6001\u51fd\u6570\u5728 \\(\\varepsilon = 0\\) \u7684\u65f6\u5019\u53d6\u6700\u5927\u503c\uff09\u3002</p> <p>\u5c06 \\((1)\\) \u5f0f\u5e26\u5165 \\((2)\\) \u4e2d\u6709\uff1a</p> \\[ p(y^{(i)}\\ |\\ x^{(i)}; \\ \\theta) = \\frac{1}{\\sqrt{2 \\pi} \\sigma} exp(- \\frac{(y^{(i)} - \\theta^Tx^{(i)}))^2}{2\\sigma^2}) \\] <p>\u4e0a\u5f0f\u5de6\u8fb9\u8868\u662f\u5f53 \\(\\theta\\) \u4e0e \\(x^{(i)}\\) \u7ec4\u5408\u4e4b\u540e\u6240\u6c42\u51fa\u7684\u9884\u6d4b\u503c \\(h_\\theta(x)\\) \u4e0e\u771f\u5b9e\u503c \\(y^{(i)}\\) \u4e4b\u95f4\u7684\u8bef\u5dee \\(\\varepsilon^{(i)}\\) \u5e94\u8be5\u8d8a\u5c0f\uff0c\u5373\u6982\u7387 \\(p(y^{(i)}\\ |\\ x^{(i)}; \\ \\theta)\\) \u8d8a\u5927\u8d8a\u597d\uff0c\u4e5f\u5c31\u662f\u8bf4\u6c42\u4e00\u4e2a \\(\\theta\\) \u4f7f\u5f97\u6982\u7387 \\(p(y^{(i)}\\ |\\ x^{(i)}; \\ \\theta)\\) \u5c3d\u53ef\u80fd\u7684\u5927\u3002\u8fd9\u91cc\u5c31\u53ef\u4ee5\u8f6c\u6362\u4e3a\u6982\u7387\u7edf\u8ba1\u4e2d\u7684\u6700\u5927\u4f3c\u7136\u51fd\u6570\u6765\u6c42\u89e3\u3002</p> <p>\u4f3c\u7136\u51fd\u6570\uff1a</p> \\[ \\begin{align*} L(\\theta) &amp;= \\prod_{i=1}^m p(y^{(i)}\\ |\\ x^{(i)}; \\ \\theta) \\\\ &amp;= \\prod_{i=1}^m \\frac{1}{\\sqrt{2 \\pi} \\sigma} exp(- \\frac{(y^{(i)} - \\theta^Tx^{(i)}))^2}{2\\sigma^2}) \\end{align*} \\] <p>\u6839\u636e\u6700\u5927\u4f3c\u7136\u51fd\u6570\u7684\u6c42\u89e3\u65b9\u6cd5\uff0c\u4e24\u8fb9\u540c\u65f6\u53d6 \\(ln\\) \u6709</p> \\[ \\begin{align*} ln L(\\theta) &amp;= ln \\prod_{i=1}^m \\frac{1}{\\sqrt{2 \\pi} \\sigma} exp(- \\frac{(y^{(i)} - \\theta^Tx^{(i)}))^2}{2\\sigma^2}) \\\\ &amp;= mln\\frac{1}{\\sqrt{2 \\pi} \\sigma} - \\frac{1}{\\sigma^2} \\dot \\ \\frac{1}{2} \\sum_{i=1}^m (y^{(i)} - \\theta^Tx^{(i)}))^2 \\\\ J(\\theta) &amp;\\overset{\\Delta}{=} \\frac{1}{2} \\sum_{i=1}^m (y^{(i)} - \\theta^Tx^{(i)}))^2 \\ \\ \\text{(\u6700\u5c0f\u4e8c\u4e58\u6cd5)} \\\\ \\end{align*} \\] <p>\u6709\u5355\u8c03\u6027\uff0c\u8981\u4f7f \\(L(\\theta)\\) \u6700\u5927\uff0c\u5c31\u9700\u8981\u4f7f\u5f97 \\(J(\\theta)\\) \u6700\u5c0f\uff0c</p> <p>\u76ee\u6807\u51fd\u6570/\u635f\u5931\u51fd\u6570 \\(J(\\theta)\\)\uff1a</p> \\[ \\begin{align*} J(\\theta) &amp;= \\frac{1}{2} \\sum_{i=1}^m (y^{(i)} - \\theta^Tx^{(i)}))^2\\\\ &amp;= \\frac{1}{2} (X\\theta - y)^T(X\\theta - y) \\end{align*} \\] <p>\u6c42\u504f\u5bfc\uff1a</p> \\[ \\begin{align} \\nabla_\\theta J(\\theta) &amp;= \\nabla_\\theta (\\frac{1}{2} (X\\theta - y)^T(X\\theta - y)) \\\\ &amp;=\\nabla_\\theta(\\frac{1}{2} (\\theta^T X^T - y^T) (X\\theta-y)) \\\\  &amp;=\\nabla_\\theta(\\frac{1}{2} (\\theta^TX^TX\\theta - \\theta^TX^Ty - y^T X \\theta + y^Ty)) \\\\ &amp;= \\frac{1}{2} (2 X^T X \\theta - X^T y - (y^T X)^T) \\\\  &amp;= X^T X \\theta - X^T y \\\\ &amp;\\overset{\\Delta}{=} 0 \\\\ \\Rightarrow &amp;\\ \\theta = (X^TX)^{-1}X^Ty \\end{align} \\] <p>\u5bf9\u4e0a\u5f0f\u4e2d \\((3)\\) \u5230 \\((4)\\) \u7684\u8fc7\u7a0b\uff1a \u7ebf\u6027\u4ee3\u6570\u4e2d \\(X^TX\\) \u7684\u7ed3\u679c\u4e00\u5b9a\u662f\u4e00\u4e2a\u5bf9\u79f0\u77e9\u9635\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u5bf9\u79f0\u9635 \\(A\\)\uff0c\u6709\u7ed3\u8bba \\(\\frac{\\partial \\theta^T A \\theta}{\\partial \\theta} = 2 A \\theta\\)\u3002</p> <p>\u5230\u8fd9\u91cc\u5c31\u5b58\u5728\u4e24\u4e2a\u95ee\u9898\uff1a</p> <ol> <li>\u7531\u4e0a\u8ff0\u516c\u5f0f\uff0c\u5bf9\u4e8e\u7ed9\u5b9a\u7684\u6570\u636e\u77e9\u9635 \\(X\\) \u548c \\(y\\)\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u6c42\u51fa \\(\\theta\\)\uff0c\u90a3\u4e48\u673a\u5668\u5b66\u4e60\u7684\u8fc7\u7a0b\u5462\uff1f</li> <li>\u5bf9\u4e8e\u77e9\u9635 \\(X\\) \u4e0d\u4e00\u5b9a\u603b\u662f\u53ef\u9006\u77e9\u9635\u3002</li> </ol> <p>\u91cd\u65b0\u6784\u9020\u76ee\u6807\u51fd\u6570\uff1a\\(J(\\theta) = \\frac{1}{2m} \\sum_{i=1}^m (y^{i} - \\theta^Tx^{i})^2\\)</p> <p>\u4e0a\u5f0f\u4e2d\u5206\u6bcd\u52a0\u4e0a\u4e86 \\(m\\) \u662f\u4e3a\u4e86\u53d6\u5230\u5c3d\u53ef\u80fd\u591a\u7684\u6837\u672c\u7684\u5e73\u5747\u503c\uff0c\u540e\u9762\u52a0\u4e0a\u5e73\u65b9\u662f\u4e3a\u4e86\u9632\u6b62\u7b26\u53f7\u3002</p> <p>1\u3001\u6279\u91cf\u68af\u5ea6\u4e0b\u964d\uff1a</p> \\[ \\begin{align*} \\frac{\\partial J(\\theta)}{\\partial \\theta_j} &amp;= -\\frac{1}{m} \\sum_{i=1}^{m}(y^{i} - h_\\theta(x^{i}))x_j^i \\tag 1 \\\\ \\theta_j^{\u2018} &amp;= \\theta + \\frac{1}{m} \\sum_{i=1}^{m}(y^{i} - h_\\theta(x^{i}))x_j^i \\tag 2 \\\\ \\end{align*} \\] <ul> <li>\u4e0a\u5f0f \\((2)\\) \u4e2d\u66f4\u65b0\u540e\u7684 \\(\\theta_j^{'}\\) \u5e94\u8be5\u662f\u539f\u6765\u7684 \\(\\theta\\) \u51cf\u53bb\u6b65\u957f \\(-\\frac{1}{m} \\sum_{i=1}^{m}(y^{i} - h_\\theta(x^{i}))x_j^i \\tag 2\\)\uff0c\u56e0\u4e3a\u662f\u671d\u68af\u5ea6\u4e0b\u964d\u7684\u65b9\u5411\u8d70\u3002</li> <li>\u4e0a\u5f0f\u8ba1\u7b97\u5bb9\u6613\u5f97\u5230\u6700\u4f18\u89e3\uff0c\u4f46\u662f\u7531\u4e8e\u6bcf\u6b21\u90fd\u9700\u8981\u8003\u8651\u6240\u6709\u6837\u672c\uff0c\u901f\u5ea6\u5f88\u6162</li> </ul> <p>2\u3001\u968f\u673a\u68af\u5ea6\u4e0b\u964d\uff1a\\(\\theta_j^{\u2018} = \\theta + (y^{i} - h_\\theta(x^{i}))x_j^i\\)</p> <p>\u968f\u673a\u68af\u5ea6\u4e0b\u964d\u6bcf\u4e00\u6b21\u968f\u673a\u627e\u4e00\u4e2a\u6837\u672c\uff0c\u8fed\u4ee3\u901f\u5ea6\u5f88\u5feb\uff0c\u4f46\u662f\u4e0d\u4e00\u5b9a\u6bcf\u6b21\u90fd\u671d\u7740\u6536\u655b\u7684\u65b9\u5411</p> <p>3\u3001\u5c0f\u6279\u91cf\u68af\u5ea6\u4e0b\u964d\uff1a</p> \\[ \\theta_j \\ := \\ \\theta_j - \\alpha\\frac{1}{10} \\sum_{k=i}^{i+9} (h_\\theta(x^{(k)}) - y^{(k)}) x_j^{(k)} \\] <ul> <li>\u6bcf\u6b21\u9009\u62e9\u4e00\u4e0b\u90e8\u5206\u6570\u636e\u6765\u66f4\u65b0</li> <li>\u5b66\u4e60\u7387/\u6b65\u957f \\(\\alpha\\)\uff1a\u5bf9\u7ed3\u679c\u4f1a\u4ea7\u751f\u5de8\u5927\u7684\u5f71\u54cd\uff0c\u4e00\u822c\u4ece\u5c0f\u5f00\u59cb\u5f80\u5927\u8bbe\u7f6e\u3002</li> </ul> <p>python\u673a\u5668\u5b66\u4e60\u5de5\u5177\u5305\u7b80\u4ecb\uff1a<code>sckkit-learn</code></p>"},{"location":"blogs/post/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/#_2","title":"\u4e8c\u3001\u903b\u8f91\u56de\u5f52","text":"<p>\u7ecf\u5178\u7528\u6cd5\uff1a\u89e3\u51b3\u4e8c\u5206\u7c7b\u95ee\u9898\u3002</p>"},{"location":"blogs/post/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/#21-sigmoid","title":"2.1 sigmoid \u51fd\u6570\uff1a","text":"<ul> <li>\u516c\u5f0f\uff1a\\(g(z) = \\frac{1}{1 + e^{-z}}\\)</li> <li>\u81ea\u53d8\u91cf\u53d6\u503c\u4e3a\u4efb\u610f\u5b9e\u6570\uff0c\u503c\u57df\u4e3a \\([0,\\ 1]\\)</li> </ul>"},{"location":"blogs/post/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92/%E8%AF%BE%E5%A0%82%E7%AC%94%E8%AE%B0/#22","title":"2.2 \u903b\u8f91\u56de\u5f52\u516c\u5f0f\u539f\u7406","text":"<p>\u9884\u6d4b\u51fd\u6570\uff1a</p> \\[ h_{\\theta}(x) = g(\\theta^Tx) = \\frac{1}{1 + e^{-\\theta^Tx}} \\\\ \\] <p>\u5176\u4e2d \\(\\theta^Tx = \\theta_0 + \\theta_1x_1 + , \\dots, + \\theta_nx_n = \\sum_{i=1}^n \\theta_i x_i\\)</p> <p>\u5206\u7c7b\u4efb\u52a1\uff1a</p> \\[ \\begin{align*} &amp;P(y=1|x;\\theta) = h_theta(x) \\\\ &amp;P(y=0|x;\\theta) = 1 - h_theta(x) \\\\ \\overset{\u6574\u5408}\\Rightarrow  &amp;P(y|x;\\theta) = (h_\\theta(x))^y(1 - h_\\theta(x))^{1-y} \\end{align*} \\] <p>\u4f3c\u7136\u51fd\u6570\uff1a</p> \\[ L(\\theta) = \\prod_{i=1}^m P(y_i | x_i; \\theta) = \\prod_{i=1}^m (h_\\theta(x))^y(1 - h_\\theta(x))^{1-y} \\] <p>\u5bf9\u6570\u4f3c\u7136\u51fd\u6570\uff1a</p> \\[ l(\\theta) = logL(\\theta) = \\sum_{i=1}^m (y_i logh_\\theta(x_i) + (1 - y_i)log(1 - h_\\theta(x_i))) \\] <p>\u8fd9\u65f6\u5019\u662f\u4e00\u4e2a\u68af\u5ea6\u4e0a\u5347\u95ee\u9898\uff0c\u8981\u4f7f\u7684 \\(L(\\theta)\\) \u6700\u5927\uff0c\u5e94\u8be5\u6c42 \\(\\theta\\) \u7684\u6700\u5927\u503c\u3002</p> <p>\u73b0\u5728\u5f15\u5165 \\(-\\) \u8f6c\u6362\u4e3a\u4e0b\u964d\u4efb\u52a1\u3002</p> \\[ J(\\theta) = - \\frac{1}{m} l(\\theta) \\] <p>\\(J(\\theta)\\) \u5bf9 \\(\\theta\\) \u6c42\u6c42\u89e3\u504f\u5bfc\u540e\u53ef\u4ee5\u5f97\u5230 </p> \\[ -\\frac{1}{m} \\sum_{i=1}^{m} (y_i - g(\\theta^T x_i)) x_i^j \\] <p>\u53c2\u6570\u66f4\u65b0\uff1a</p> \\[ \\theta_j := \\theta_j - \\alpha \\frac{1}{m} \\sum_{i=1}^m(h_\\theta(x_i) - y_i)x_i^j \\]"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/","title":"\u7b2c\u4e00\u7ae0 \u57fa\u7840\u7b97\u6cd5","text":""},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/#1","title":"1 \u5feb\u901f\u6392\u5e8f\u7b97\u6cd5","text":"<p>Acwing 785</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\nconst int N = 1e5 + 10;\nint n, a[N];\nvoid quick_sort(int q[], int l, int r) {\nif (l &gt;= r) return;\nint i = l - 1, j = r + 1, x = q[(l + r) &gt;&gt; 1];\nwhile (i &lt; j) {\ndo i++; while (q[i] &lt; x);\ndo j--; while (q[j] &gt; x);\nif (i &lt; j) swap(q[i], q[j]);\n}\nquick_sort(q, l, j);\nquick_sort(q, j + 1, r);\n}\nint main() {\nscanf(\"%d\", &amp;n);\nfor (int i = 0; i &lt; n; i++) scanf(\"%d\", a + i);\nquick_sort(a, 0, n - 1);\nfor (int i = 0; i &lt; n; i++) printf(\"%d \", a[i]);\nputs(\"\");\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/#12-k","title":"1.2 \u7b2c k \u4e2a\u6570","text":"<p>Acwing 786</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\nconst int N = 1e5 + 10;\nint n, k, a[N];\nint quick_sort(int q[], int l, int r, int k) {\nif (l &gt;= r) return q[l];\nint i = l - 1, j = r + 1, x = q[(l + r) &gt;&gt; 1];\nwhile (i &lt; j) {\ndo i++; while (q[i] &lt; x);\ndo j--; while (q[j] &gt; x);\nif (i &lt; j) swap(q[i], q[j]);\n}\nif (j - l + 1 &gt;= k) quick_sort(q, l, j, k);\nelse quick_sort(q, j + 1, r, k - (j - l + 1));\n}\nint main() {\nscanf(\"%d%d\", &amp;n, &amp;k);\nfor (int i = 0; i &lt; n; i++) scanf(\"%d\", a + i);\nint ret = quick_sort(a, 0, n - 1, k);\nprintf(\"%d\\n\", ret);\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/#2","title":"2 \u5f52\u5e76\u6392\u5e8f\u7b97\u6cd5","text":"<p>Acwing 787</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\nconst int N = 1e5 + 10;\nint n, nums[N], tmp[N];\nvoid merge_sort(int q[], int l, int r) {\nif (l &gt;= r) return;\nint mid = (l + r) &gt;&gt; 1;\nmerge_sort(q, l, mid), merge_sort(q, mid + 1, r);\nint k = 0, i = l, j = mid + 1;\nwhile (i &lt;= mid &amp;&amp; j &lt;= r)\nif (q[i] &lt;= q[j]) tmp[k++] = q[i++];\nelse tmp[k++] = q[j++];\nwhile (i &lt;= mid) tmp[k++] = q[i++];\nwhile (j &lt;= r) tmp[k++] = q[j++];\nfor (int i = l, j = 0; i &lt;= r; i++, j++) q[i] = tmp[j];\n}\nint main() {\nscanf(\"%d\", &amp;n);\nfor (int i = 0; i &lt; n; i++) scanf(\"%d\", nums + i);\nmerge_sort(nums, 0, n - 1);\nfor (int i = 0; i &lt; n; i++) printf(\"%d \", nums[i]);\nputs(\"\");\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/#22","title":"2.2 \u9006\u5e8f\u5bf9\u6570\u91cf","text":"<p>Acwing 788</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\ntypedef long long LL;\nconst int N = 1e5 + 10;\nint n, q[N], tmp[N];\nLL merge_sort(int l, int r) {\nif (l &gt;= r) return 0;\nint mid = l + r &gt;&gt; 1;\nLL res = merge_sort(l, mid) + merge_sort(mid + 1, r);\nint i = l, j = mid + 1, k = 0;\nwhile (i &lt;= mid &amp;&amp; j &lt;= r) if (q[i] &lt;= q[j]) tmp[k ++ ] = q[i ++ ];\nelse {\nres += mid - i + 1;\ntmp[k ++ ] = q[j ++ ];\n}\nwhile (i &lt;= mid) tmp[k ++ ] = q[i ++ ];\nwhile (j &lt;= r) tmp[k ++ ] = q[j ++ ];\nfor (int i = l, j = 0; i &lt;= r; i ++ , j ++ ) q[i] = tmp[j];\nreturn res;\n}\nint main() {\ncin &gt;&gt; n;\nfor (int i = 0; i &lt; n; i ++ ) cin &gt;&gt; q[i];\ncout &lt;&lt; merge_sort(0, n - 1) &lt;&lt; endl;\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/#3","title":"3 \u4e8c\u5206","text":""},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/#31","title":"3.1 \u6570\u7684\u8303\u56f4","text":"<p>Acwing 789</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\nconst int N = 1e5 + 10;\nint n, m, q[N];\nint main() {\nscanf(\"%d%d\", &amp;n, &amp;m);\nfor (int i = 0; i &lt; n; i++) scanf(\"%d\", q + i);\nwhile (m--) {\nint x; scanf(\"%d\", &amp;x);\nint l = 0, r = n - 1;\nwhile (l &lt; r) { // \u67e5\u627e\u8d77\u59cb\u4f4d\u7f6e\nint mid = (l + r) &gt;&gt; 1;\nif (q[mid] &gt;= x) r = mid;\nelse l = mid + 1;\n}\nif (q[l] != x) {\nprintf(\"-1 -1\\n\");\ncontinue;\n}\nprintf(\"%d \", l);\nl = 0, r = n - 1;\nwhile (l &lt; r) { // \u67e5\u627e\u7ec8\u6b62\u4f4d\u7f6e\nint mid = (l + r + 1) &gt;&gt; 1;\nif (q[mid] &lt;= x) l = mid;\nelse r = mid - 1;\n}\nprintf(\"%d\\n\", l);\n}\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/#32","title":"3.2 \u6570\u7684\u4e09\u6b21\u65b9\u6839","text":"<p>Acwing 790</p> <p>\u6309\u7167\u7ecf\u9a8c\uff0c\u8ba1\u7b97\u7ed3\u679c\u7684\u7cbe\u5ea6\u8981\u6bd4\u9898\u76ee\u8981\u6c42\u7684\u7cbe\u5ea6\u9ad8\u4e24\u4f4d\u3002</p> <pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main() {\ndouble x;\nscanf(\"%lf\", &amp;x);\ndouble l = -100, r = 100;\nwhile (r - l &gt; 1e-8) {\ndouble mid = (l + r) / 2;\nif (mid * mid * mid &gt;= x) r = mid;\nelse l = mid;\n}\nprintf(\"%.6lf\\n\", l);\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/#4","title":"4 \u9ad8\u7cbe\u5ea6\u7b97\u6cd5","text":""},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/#41","title":"4.1 \u52a0\u6cd5","text":"<p>Acwing 791</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;\nusing namespace std;\nvector&lt;int&gt; add(vector&lt;int&gt; &amp;A, vector&lt;int&gt; &amp;B) {\nvector&lt;int&gt; C;\nfor (int i = 0, t = 0; i &lt; A.size() || i &lt; B.size() || t; i++) {\nif (i &lt; A.size()) t += A[i];\nif (i &lt; B.size()) t += B[i];\nC.push_back(t % 10);\nt /= 10;\n}\nreturn C;\n}\nint main() {\nstring a, b; cin &gt;&gt; a &gt;&gt; b;\nvector&lt;int&gt; A, B;\nfor (int i = a.size() - 1; i &gt;= 0; i--) A.push_back(a[i] - '0');\nfor (int i = b.size() - 1; i &gt;= 0; i--) B.push_back(b[i] - '0');\nauto C = add(A, B);\nfor (int i = C.size() - 1; i &gt;= 0; i--) cout &lt;&lt; C[i];\ncout &lt;&lt; endl;\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/#42","title":"4.2 \u51cf\u6cd5","text":"<p>Acwing 792</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;\nusing namespace std;\nbool cmp(vector&lt;int&gt; &amp;A, vector&lt;int&gt; &amp;B) {\nif (A.size() != B.size()) return A.size() &gt; B.size();\nfor (int i = A.size() - 1; i &gt;= 0; i--)\nif (A[i] != B[i])\nreturn A[i] &gt; B[i];\nreturn true;\n}\nvector&lt;int&gt; sub(vector&lt;int&gt; &amp;A, vector&lt;int&gt; &amp;B) {\nvector&lt;int&gt; C;\nfor (int i = 0, t = 0; i &lt; A.size(); i++) {\nt = A[i] - t;\nif (i &lt; B.size()) t -= B[i];\nC.push_back((t + 10) % 10);\nif (t &lt; 0) t = 1;\nelse t = 0;\n}\nwhile (C.size() &gt; 1 &amp;&amp; !C.back()) C.pop_back();\nreturn C;\n}\nint main() {\nstring a, b; cin &gt;&gt; a &gt;&gt; b;\nvector&lt;int&gt; A, B;\nfor (int i = a.size() - 1; i &gt;= 0; i--) A.push_back(a[i] - '0');\nfor (int i = b.size() - 1; i &gt;= 0; i--) B.push_back(b[i] - '0');\nvector&lt;int&gt; C;\nif (cmp(A, B)) C = sub(A, B);\nelse C = sub(B, A), cout &lt;&lt; '-';\nfor (int i = C.size() - 1; i &gt;= 0; i--) cout &lt;&lt; C[i];\ncout &lt;&lt; endl;\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/#43","title":"4.3 \u4e58\u6cd5","text":"<p>Acwing 793</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;\nusing namespace std;\nvector&lt;int&gt; mul(vector&lt;int&gt; &amp;A, int b) {\nvector&lt;int&gt; C;\nfor (int i = 0, t = 0; i &lt; A.size() || t; i++) { // \u8fd9\u91cc\u7684t\u662f\u7528\u6765\u5904\u7406\u6700\u540e\u7b97\u5b8c\u540e\u4f9d\u7136\u4f1a\u6709\u8fdb\u4f4d\u7684\u60c5\u51b5\uff01\nif (i &lt; A.size()) t += A[i] * b;\nC.push_back(t % 10);\nt /= 10;\n}\nwhile (C.size() &gt; 1 &amp;&amp; !C.back()) C.pop_back();\nreturn C;\n}\nint main() {\nstring a; int b; cin &gt;&gt; a &gt;&gt; b;\nvector&lt;int&gt; A;\nfor (int i = a.size() - 1; i &gt;= 0; i--) A.push_back(a[i] - '0');\nauto C = mul(A, b);\nfor (int i = C.size() - 1; i &gt;= 0; i--) cout &lt;&lt; C[i];\ncout &lt;&lt; endl;\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/#44","title":"4.4 \u9664\u6cd5","text":"<p>Acwing 794</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;\nusing namespace std;\nvector&lt;int&gt; div(vector&lt;int&gt; &amp;A, int b, int &amp;r) {\nvector&lt;int&gt; C;\nr = 0;\nfor (int i = A.size() - 1; i &gt;= 0; i--) {\nr = r * 10 + A[i];\nC.push_back(r / b);\nr %= b;\n}\nreverse(C.begin(), C.end());\nwhile (C.size() &gt; 1 &amp;&amp; !C.back()) C.pop_back();\nreturn C;\n}\nint main() {\nstring a; int B; cin &gt;&gt; a &gt;&gt; B;\nvector&lt;int&gt; A;\nfor (int i = a.size() - 1; i &gt;= 0; i--) A.push_back(a[i] - '0');\nint r;\nauto C = div(A, B, r);\nfor (int i = C.size() - 1; i &gt;= 0; i--) cout &lt;&lt; C[i];\ncout &lt;&lt; endl &lt;&lt; r &lt;&lt; endl;\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/#5","title":"5 \u524d\u7f00\u548c\u4e0e\u5dee\u5206","text":""},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/#51","title":"5.1 \u4e00\u7ef4\u524d\u7f00\u548c","text":"<p>Acwing 795</p> <pre><code>#include &lt;iostream&gt;\nusing namespace std;\nconst int N = 1e5 + 10;\nint n, m, s[N];\nint main() {\nscanf(\"%d%d\", &amp;n, &amp;m);\nfor (int i = 1; i &lt;= n; i++) {\nint x; scanf(\"%d\", &amp;x);\ns[i] += s[i - 1] + x;\n}\nwhile (m--) {\nint l, r; scanf(\"%d%d\", &amp;l, &amp;r);\nprintf(\"%d\\n\", s[r] - s[l - 1]);\n}\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/#52","title":"5.2 \u4e8c\u7ef4\u524d\u7f00\u548c","text":"<p>Acwing 796</p> <pre><code>#include &lt;iostream&gt;\nusing namespace std;\nconst int N = 1010;\nint n, m, q;\nint s[N][N];\nint main() {\nscanf(\"%d%d%d\", &amp;n, &amp;m, &amp;q);\nfor (int i = 1; i &lt;= n; i++)\nfor (int j = 1; j &lt;= m; j++) {\nint x; scanf(\"%d\", &amp;x);\ns[i][j] = s[i - 1][j] + s[i][j - 1] - s[i - 1][j - 1] + x;\n}\nwhile (q--) {\nint x1, y1, x2, y2; scanf(\"%d%d%d%d\", &amp;x1, &amp;y1, &amp;x2, &amp;y2);\nprintf(\"%d\\n\", s[x2][y2] - s[x1 - 1][y2] - s[x2][y1 - 1] + s[x1 - 1][y1 - 1]);\n}\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/#53","title":"5.3 \u4e00\u7ef4\u5dee\u5206","text":"<p>Acwing 797</p> <pre><code>#include &lt;iostream&gt;\nusing namespace std;\nconst int N = 1e5 + 10;\nint n, m, b[N];\nvoid insert(int l, int r, int c) {\nb[l] += c;\nb[r + 1] -= c;\n}\nint main() {\nscanf(\"%d%d\", &amp;n, &amp;m);\nfor (int i = 1; i &lt;= n; i++) {\nint x; scanf(\"%d\", &amp;x);\ninsert(i, i, x);\n}\nwhile (m--) {\nint l, r, c; scanf(\"%d%d%d\", &amp;l, &amp;r, &amp;c);\ninsert(l, r, c);\n}\nfor (int i = 1; i &lt;= n; i++) {\nb[i] += b[i - 1];\nprintf(\"%d \", b[i]);\n}\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/#54","title":"5.4 \u4e8c\u7ef4\u5dee\u5206","text":"<p>Acwing 798</p> <pre><code>#include &lt;iostream&gt;\nusing namespace std;\nconst int N = 1010;\nint n, m, q, x, b[N][N];\nvoid insert(int x1, int y1, int x2, int y2, int c) {\nb[x1][y1] += c;\nb[x2 + 1][y1] -= c;\nb[x1][y2 + 1] -= c;\nb[x2 + 1][y2 + 1] += c;\n}\nint main() {\nscanf(\"%d%d%d\", &amp;n, &amp;m, &amp;q);\nfor (int i = 1; i &lt;= n; i++)\nfor (int j = 1; j &lt;= m; j++) {\nscanf(\"%d\", &amp;x);\ninsert(i, j, i, j, x);\n}\nwhile (q--) {\nint x1, y1, x2, y2, c;\nscanf(\"%d%d%d%d%d\", &amp;x1, &amp;y1, &amp;x2, &amp;y2, &amp;c);\ninsert(x1, y1, x2, y2, c);\n}\nfor (int i = 1; i &lt;= n; i++) {\nfor (int j = 1; j &lt;= m; j++) {\nb[i][j] += b[i - 1][j] + b[i][j - 1] - b[i - 1][j - 1];\nprintf(\"%d \", b[i][j]);\n}\nprintf(\"\\n\");\n}\nreturn 0;\n} </code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/#6","title":"6 \u53cc\u6307\u9488\u7b97\u6cd5","text":""},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/#61","title":"6.1 \u6700\u957f\u8fde\u7eed\u4e0d\u91cd\u590d\u5b50\u5e8f\u5217","text":"<p>Acwing 799</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\nconst int N = 1e5 + 10;\nint n;\nint q[N], s[N]; // q\u5b58\u50a8\u5143\u7d20\uff0cs\u8bb0\u5f55\u5143\u7d20q[i]\u51fa\u73b0\u6b21\u6570\nint main() {\nscanf(\"%d\", &amp;n);\nint res = 0;\nfor (int i = 0, j = 0; i &lt; n; i++) {\nscanf(\"%d\", q + i);\ns[q[i]]++;\nwhile (s[q[i]] &gt; 1) s[q[j++]]--;\nres = max(res, i - j + 1);\n}\nprintf(\"%d\\n\", res);\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/#62","title":"6.2 \u6570\u7ec4\u5143\u7d20\u7684\u76ee\u6807\u548c","text":"<p>Acwing 800</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\nconst int N = 1e5 + 10;\nint n, m, x;\nint a[N], b[N];\nint main() {\nscanf(\"%d%d%d\", &amp;n, &amp;m, &amp;x);\nfor (int i = 0; i &lt; n; i++) scanf(\"%d\", a + i);\nfor (int i = 0; i &lt; m; i++) scanf(\"%d\", b + i);\nfor (int i = 0, j = m - 1; i &lt; n; i++) {\nwhile (j &gt;= 0 &amp;&amp; a[i] + b[j] &gt; x) j--;\nif (j &gt;= 0 &amp;&amp; a[i] + b[j] == x) printf(\"%d %d\\n\", i, j);\n}\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/#63","title":"6.3 \u5224\u65ad\u5b50\u5e8f\u5217","text":"<p>Acwing 2816</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\nconst int N = 1e5 + 10;\nint n, m;\nint a[N], b[N];\nint main() {\nscanf(\"%d%d\", &amp;n, &amp;m);\nfor (int i = 0; i &lt; n; i++) scanf(\"%d\", a + i);\nfor (int i = 0; i &lt; m; i++) scanf(\"%d\", b + i);\nint i = 0, j = 0;\nwhile (i &lt; n &amp;&amp; j &lt; m) {\nif (a[i] == b[j]) i++;\nj++;\n}\nif (i == n) puts(\"Yes\");\nelse puts(\"No\");\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/#7","title":"7 \u4f4d\u8fd0\u7b97","text":""},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/#71-1","title":"7.1 \u4e8c\u8fdb\u5236\u4e2d 1 \u7684\u4e2a\u6570","text":"<p>Acwing 801</p> <pre><code>// \u89e3\u6cd5\u4e00\nint judge(int x) {\nint ret = 0;\nwhile (x) {\nx &amp;= (x - 1); // \u53bb\u6389x\u6700\u53f3\u8fb9\u7684\u4e00\u4e2a 1\nret++;\n}\nreturn ret;\n}\n// \u89e3\u6cd5\u4e8c\nint judge(int x) {\nint ret = 0;\nfor (int i = x; i; i -= i &amp; -i) ret++; // \u6bcf\u4e00\u6b21\u5faa\u73af\u51cf\u53bb n \u7684\u6700\u540e\u4e00\u4f4d 1\nreturn ret;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/#8","title":"8 \u79bb\u6563\u5316","text":"<p>Acwing 802</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;\nusing namespace std;\ntypedef pair&lt;int, int&gt; PII;\nconst int N = 3e5 + 10;\nint n, m;\nint s[N];\nvector&lt;int&gt; alls;\nvector&lt;PII&gt; add, query;\nint find(int x) {\nint l = 0, r = alls.size() - 1;\nwhile (l &lt; r) {\nint mid = (l + r) &gt;&gt; 1;\nif (alls[mid] &gt;= x) r = mid;\nelse l = mid + 1;\n}\nreturn r + 1; // \u6ce8\u610f\u4e0b\u6807\n}\nint main() {\ncin &gt;&gt; n &gt;&gt; m;\nfor (int i = 0; i &lt; n; i++) {\nint x, c; cin &gt;&gt; x &gt;&gt; c;\nadd.push_back({x, c});\nalls.push_back(x);\n}\nfor (int i = 0; i &lt; m; i++) {\nint l, r; cin &gt;&gt; l &gt;&gt; r;\nquery.push_back({l, r});\nalls.push_back(l); alls.push_back(r);\n}\nsort(alls.begin(), alls.end());\nalls.erase((unique(alls.begin(), alls.end())), alls.end());\nfor (auto item: add) {\nint x = find(item.first);\ns[x] += item.second;\n}\nfor (int i = 1; i &lt;= alls.size(); i++) s[i] += s[i - 1];\nfor (auto item: query) {\nint l = find(item.first), r = find(item.second);\ncout &lt;&lt; s[r] - s[l - 1] &lt;&lt; endl;\n}\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/#9","title":"9 \u533a\u95f4\u5408\u5e76","text":"<p>Acwing 803</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;\nusing namespace std;\n#define x first\n#define y second\ntypedef pair&lt;int, int&gt; PII;\nint n;\nvector&lt;PII&gt; segs;\nvoid merge(vector&lt;PII&gt; &amp;segs) {\nvector&lt;PII&gt; res;\nsort(segs.begin(), segs.end());\nint st = -2e9, ed = -2e9;\nfor (auto seg: segs) if (ed &lt; seg.x) {\nif (st != -2e9) res.push_back({st, ed});\nst = seg.x, ed = seg.y;\n} else ed = max(ed, seg.y);\nif (st != -2e9) res.push_back({st, ed});\nsegs = res;\n}\nint main() {\ncin &gt;&gt; n;\nfor (int i = 0; i &lt; n; i++) {\nint l, r; cin &gt;&gt; l &gt;&gt; r;\nsegs.push_back({l, r});\n}\nmerge(segs);\ncout &lt;&lt; segs.size() &lt;&lt; endl;\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA/","title":"\u7b2c\u4e09\u7ae0 \u641c\u7d22\u4e0e\u56fe\u8bba","text":""},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA/#1-dfs","title":"1 DFS","text":""},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA/#11","title":"1.1 \u6392\u5217\u6570\u5b57","text":"<p>Acwing 842</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\nconst int N = 10;\nint n, path[N];\nbool st[N];\nvoid dfs(int u) {\nif (u == n) {\nfor (int i = 0; i &lt; n; i++) printf(\"%d \", path[i]);\nputs(\"\");\nreturn;\n}\nfor (int i = 1; i &lt;= n; i++)\nif (!st[i]) {\nst[i] = true;\npath[u] = i;\ndfs(u + 1);\nst[i] = false;\n}\n}\nint main() {\nscanf(\"%d\", &amp;n);\ndfs(0);\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA/#12-n-","title":"1.2 n-\u7687\u540e\u95ee\u9898","text":"<p>Acwing 843</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\nconst int N = 20;\nint n;\nchar g[N][N];\nbool col[N], dg[N], udg[N];\nvoid dfs(int u) { if (u == n) {\nfor (int i = 0; i &lt; n; i++) puts(g[i]);\nputs(\"\");\nreturn;\n}\nfor (int i = 0; i &lt; n; i++) // u\u4ee3\u8868\u6bcf\u4e00\u884c\uff0ci\u4ee3\u8868\u6bcf\u4e00\u5217\nif (!col[i] &amp;&amp; !dg[u + i] &amp;&amp; !udg[n - u + i]) {\ncol[i] = dg[u + i] = udg[n - u + i] = true;\ng[u][i] = 'Q';\ndfs(u + 1);\ncol[i] = dg[u + i] = udg[n - u + i] = false;\ng[u][i] = '.';\n}\n}\nint main() {\nscanf(\"%d\", &amp;n);\nfor (int i = 0; i &lt; n; i++)\nfor (int j = 0; j &lt; n; j++)\ng[i][j] = '.';\ndfs(0);\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA/#2-bfs","title":"2 BFS","text":""},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA/#21","title":"2.1 \u8d70\u8ff7\u5bab","text":"<p>Acwing 844</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;cstring&gt;\nusing namespace std;\n#define x first\n#define y second\ntypedef pair&lt;int, int&gt; PII;\nconst int N = 110, M = N * N;\nint n, m;\nint g[N][N];\nPII q[M];\nint dist[N][N];\nint dx[] = {0, -1, 0, 1}, dy[] = {-1, 0, 1, 0};\nint bfs() {\nmemset(dist, 0x3f, sizeof dist);\ndist[0][0] = 0;\nint hh = 0, tt = 0;\nq[0] = {0, 0};\nwhile (hh &lt;= tt) {\nPII t = q[hh++];\nfor (int i = 0; i &lt; 4; i++) {\nint a = t.x + dx[i], b = t.y + dy[i];\nif (a &lt; 0 || a &gt;= n || b &lt; 0 || b &gt;= m) continue;\nif (g[a][b]) continue;\nif (dist[a][b] &gt; dist[t.x][t.y] + 1) {\ndist[a][b] = dist[t.x][t.y] + 1;\nq[++tt] = {a, b};\n}\n}\n}\nreturn dist[n - 1][m - 1];\n}\nint main() {\nscanf(\"%d%d\", &amp;n, &amp;m);\nfor (int i = 0; i &lt; n; i++)\nfor (int j = 0; j &lt; m; j++)\nscanf(\"%d\", &amp;g[i][j]);\nprintf(\"%d\\n\", bfs());\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA/#22","title":"2.2 \u516b\u6570\u7801","text":"<p>Acwing 845</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;cstring&gt;\n#include &lt;queue&gt;\n#include &lt;unordered_map&gt;\nusing namespace std;\nstring start;\nqueue&lt;string&gt; q;\nunordered_map&lt;string, int&gt; dist;\nint dx[] = {0, -1, 0, 1}, dy[] = {-1, 0, 1, 0};\nint bfs() {\nstring end = \"12345678x\";\nif (start == end) return 0;\ndist[start] = 0;\nq.push(start);\nwhile (q.size()) {\nstring t = q.front();\nq.pop();\nif (t == end) return dist[t];\nint k = t.find('x');\nint x = k / 3, y = k % 3;\nfor (int i = 0; i &lt; 4; i++) {\nint a = x + dx[i], b = y + dy[i];\nif (a &lt; 0 || a &gt;= 3 || b &lt; 0 || b &gt;= 3) continue;\nstring r = t;\nswap(r[k], r[a * 3 + b]);\nif (dist.count(r)) continue;\ndist[r] = dist[t] + 1;\nq.push(r);\n}\n}\nreturn -1;\n}\nint main() {\nfor (int i = 0; i &lt; 9; i++) {\nchar c[2];\nscanf(\"%s\", c);\nstart += *c;\n}\nprintf(\"%d\\n\", bfs());\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA/#3","title":"3 \u6811\u4e0e\u56fe\u7684\u6df1\u5ea6\u4f18\u5148\u904d\u5386","text":""},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA/#31","title":"3.1 \u6811\u7684\u91cd\u5fc3","text":"<p>Acwing 846</p> <ul> <li>sum \u8bb0\u5f55\u5b50\u6811\u7ed3\u70b9\u6570\u76ee</li> <li>res \u5220\u9664\u8be5\u7ed3\u70b9\u540e\u6240\u6709\u8fde\u901a\u5757\u4e2d\u8282\u70b9\u6570\u76ee\u6700\u5927\u503c</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;cstring&gt;\nusing namespace std;\nconst int N = 1e5 + 10, M = N * 2;\nint n;\nint h[N], e[M], ne[M], idx;\nbool st[N];\nint ans = N;\nvoid add(int a, int b) {\ne[idx] = b, ne[idx] = h[a], h[a] = idx++;\n}\n// \u8fd4\u56de\u4ee5u\u4e3a\u6839\u7684\u5b50\u6811\u7ed3\u70b9\u6570\u76ee\nint dfs(int u) {\nst[u] = true;\nint sum = 1, res = 0;\nfor (int i = h[u]; i != -1; i = ne[i]) {\nint j = e[i];\nif (st[j]) continue;\nint s = dfs(j);\nres = max(res, s);\nsum += s;\n}\nres = max(res, n - sum);\nans = min(ans, res);\nreturn sum;\n}\nint main() {\nmemset(h, -1, sizeof h);\nscanf(\"%d\", &amp;n);\nfor (int i = 0; i &lt; n - 1; i++) {\nint a, b;\nscanf(\"%d%d\", &amp;a, &amp;b);\nadd(a, b), add(b, a);\n}\ndfs(1);\nprintf(\"%d\\n\", ans);\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA/#4","title":"4 \u6811\u4e0e\u56fe\u7684\u5e7f\u5ea6\u4f18\u5148\u904d\u5386","text":""},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA/#41","title":"4.1 \u56fe\u4e2d\u70b9\u7684\u5c42\u6b21","text":"<p>Acwing 847</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;cstring&gt;\nusing namespace std;\nconst int N = 1e5 + 10;\nint n, m;\nint h[N], e[N], ne[N], idx;\nint dist[N], q[N];\nvoid add(int a, int b) {\ne[idx] = b, ne[idx] = h[a], h[a] = idx++;\n}\nint bfs() {\nmemset(dist, -1, sizeof dist);\ndist[1] = 0;\nint hh = 0, tt = 0;\nq[0] = 1;\nwhile (hh &lt;= tt) {\nint t = q[hh++];\nfor (int i = h[t]; i != -1; i = ne[i]) {\nint j = e[i];\nif (dist[j] != -1) continue;\ndist[j] = dist[t] + 1;\nq[++tt] = j;\n}\n}\nreturn dist[n];\n}\nint main() {\nscanf(\"%d%d\", &amp;n, &amp;m);\nmemset(h, -1, sizeof h);\nfor (int i = 0; i &lt; m; i++) {\nint a, b;\nscanf(\"%d%d\", &amp;a, &amp;b);\nadd(a, b);\n}\nprintf(\"%d\\n\", bfs());\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA/#5","title":"5 \u62d3\u6251\u6392\u5e8f","text":""},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA/#51","title":"5.1 \u6709\u5411\u56fe\u7684\u62d3\u6251\u5e8f\u5217","text":"<p>Acwing 848</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;cstring&gt;\nusing namespace std;\nconst int N = 1e5 + 10;\nint n, m;\nint h[N], e[N], ne[N], idx;\nint q[N], d[N]; // d\u4ee3\u8868\u6bcf\u4e2a\u7ed3\u70b9\u7684\u5165\u5ea6\nvoid add(int a, int b) {\ne[idx] = b, ne[idx] = h[a], h[a] = idx++;\n}\nbool topsort() {\nint hh = -1, tt = -1;\nfor (int i = 1; i &lt;= n; i++)\nif (!d[i]) q[++tt] = i;\nwhile (hh &lt; tt) {\nint t = q[++hh];\nfor (int i = h[t]; i != -1; i = ne[i]) {\nint j = e[i];\nd[j]--;\nif (!d[j]) q[++tt] = j;\n}\n}\nreturn tt == n - 1;\n}\nint main() {\nscanf(\"%d%d\", &amp;n, &amp;m);\nmemset(h, -1, sizeof h);\nfor (int i = 0; i &lt; m; i++) {\nint a, b;\nscanf(\"%d%d\", &amp;a, &amp;b);\nadd(a, b);\nd[b]++;\n}\nif (topsort()) {\nfor (int i = 0; i &lt; n; i++) printf(\"%d \", q[i]);\nputs(\"\");\n} else puts(\"-1\");\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA/#6-dijkstra","title":"6 Dijkstra","text":""},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA/#61-dijkstra-i","title":"6.1 Dijkstra\u6c42\u6700\u77ed\u8def I","text":"<p>Acwing 849</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;cstring&gt;\nusing namespace std;\nconst int N = 510;\nint n, m;\nint g[N][N], dist[N];\nbool st[N];\nint dijsktra() {\nmemset(dist, 0x3f, sizeof dist);\ndist[1] = 0;\nfor (int i = 0; i &lt; n; i++) {\nint t = -1;\nfor (int j = 1; j &lt;= n; j++)\nif (!st[j] &amp;&amp; (t == -1 || dist[t] &gt; dist[j]))\nt = j;\nst[t] = true;\nfor (int i = 1; i &lt;= n; i++)\ndist[i] = min(dist[i], dist[t] + g[t][i]);\n}\nif (dist[n] == 0x3f3f3f3f) return -1;\nreturn dist[n];\n}\nint main() {\nscanf(\"%d%d\", &amp;n, &amp;m);\nmemset(g, 0x3f, sizeof g);\nwhile (m--) {\nint a, b, c;\nscanf(\"%d%d%d\", &amp;a, &amp;b, &amp;c);\ng[a][b] = min(g[a][b], c); // \u6d88\u9664\u91cd\u8fb9\uff0c\u4ec5\u4fdd\u7559\u6700\u5c0f\u503c\n}\nprintf(\"%d\\n\", dijsktra());\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA/#62-dijkstra-ii","title":"6.2 Dijkstra\u6c42\u6700\u77ed\u8def II","text":"<p>Acwing 850</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;cstring&gt;\n#include &lt;queue&gt;\nusing namespace std;\n#define x first\n#define y second\ntypedef pair&lt;int, int&gt; PII;\nconst int N = 1e6 + 10;\nint n, m;\nint h[N], w[N], e[N], ne[N], idx;\nint dist[N];\nbool st[N];\nvoid add(int a, int b, int c) {\ne[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx++;\n}\nint dijkstra() {\nmemset(dist, 0x3f, sizeof dist);\ndist[1] = 0;\npriority_queue&lt;PII, vector&lt;PII&gt;, greater&lt;PII&gt;&gt; heap;\nheap.push({0, 1}); // (\u8ddd\u79bb\uff0c\u7ed3\u70b9id)\nwhile (heap.size()) {\nPII t = heap.top();\nheap.pop();\nint ver = t.y, distance = t.x;\nif (st[ver]) continue;\nst[ver] = true;\nfor (int i = h[ver]; i != -1; i = ne[i]) {\nint j = e[i];\nif (dist[j] &gt; distance + w[i]) {\ndist[j] = distance + w[i];\nheap.push({dist[j], j});\n}\n}\n}\nif (dist[n] == 0x3f3f3f3f) return -1;\nreturn dist[n];\n}\nint main() {\nscanf(\"%d%d\", &amp;n, &amp;m);\nmemset(h, -1, sizeof h);\nwhile (m--) {\nint a, b, c;\nscanf(\"%d%d%d\", &amp;a, &amp;b, &amp;c);\nadd(a, b, c);\n}\nprintf(\"%d\\n\", dijkstra());\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA/#7-bellman-ford","title":"7 bellman-ford","text":""},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA/#71","title":"7.1 \u6709\u8fb9\u6570\u9650\u5236\u7684\u6700\u77ed\u8def","text":"<p>Acwing 853</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;cstring&gt;\nusing namespace std;\nconst int N = 510, M = 10010;\nint n, m, k;\nint dist[N], backup[N];\nstruct Edge {\nint a, b, w;\n} edges[M];\nvoid bellman_ford() {\nmemset(dist, 0x3f, sizeof dist);\ndist[1] = 0;\nfor (int i = 0; i &lt; k; i++) {\nmemcpy(backup, dist, sizeof dist);\nfor (int j = 0; j &lt; m; j++) {\nint a = edges[j].a, b = edges[j].b, w = edges[j].w;\ndist[b] = min(dist[b], backup[a] + w);\n}\n}\n}\nint main() {\nscanf(\"%d%d%d\", &amp;n, &amp;m, &amp;k);\nfor (int i = 0; i &lt; m; i++) {\nint a, b, c;\nscanf(\"%d%d%d\", &amp;a, &amp;b, &amp;c);\nedges[i] = {a, b, c};\n}\nbellman_ford();\nif (dist[n] &gt; 0x3f3f3f3f / 2) puts(\"impossible\");\nelse printf(\"%d\\n\", dist[n]);\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA/#8-spfa","title":"8 SPFA","text":""},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA/#81-spfa","title":"8.1 SPFA\u6c42\u6700\u77ed\u8def","text":"<p>Acwing 851</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;cstring&gt;\n#include &lt;queue&gt;\nusing namespace std;\nconst int N = 1e5 + 10;\nint n, m;\nint h[N], e[N], w[N], ne[N], idx;\nint dist[N];\nbool st[N];\nvoid add(int a, int b, int c) {\ne[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx++;\n}\nint spfa() {\nmemset(dist, 0x3f3f3f3f, sizeof dist);\ndist[1] = 0;\nqueue&lt;int&gt; q;\nq.push(1);\nst[1] = true;\nwhile (q.size()) {\nint t = q.front();\nq.pop();\nst[t] = false;\nfor (int i = h[t]; i != -1; i = ne[i]) {\nint j = e[i];\nif (dist[j] &gt; dist[t] + w[i]) {\ndist[j] = dist[t] + w[i];\nif (!st[j])\nq.push(j), st[j] = true;\n}\n}\n}\nreturn dist[n];\n}\nint main() {\nscanf(\"%d%d\", &amp;n, &amp;m);\nmemset(h, -1, sizeof h);\nwhile (m--) {\nint a, b, c;\nscanf(\"%d%d%d\", &amp;a, &amp;b, &amp;c);\nadd(a, b, c);\n}\nint t = spfa();\nif (t == 0x3f3f3f3f) puts(\"impossible\");\nelse printf(\"%d\\n\", t);\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA/#82-spfa","title":"8.2 SPFA\u5224\u65ad\u8d1f\u73af","text":"<p>Acwing 852</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;cstring&gt;\n#include &lt;queue&gt;\nusing namespace std;\nconst int N = 1e5 + 10;\nint n, m;\nint h[N], e[N], w[N], ne[N], idx;\nint dist[N], cnt[N];\nbool st[N];\nvoid add(int a, int b, int c) {\ne[idx] = b, w[idx] = c, ne[idx] = h[a], h[a] = idx++;\n}\nbool spfa() {\nqueue&lt;int&gt; q;\nfor (int i = 1; i &lt;= n; i++)\nst[i] = true, q.push(i);\nwhile (q.size()) {\nint t = q.front();\nq.pop();\nst[t] = false;\nfor (int i = h[t]; i != -1; i = ne[i]) {\nint j = e[i];\nif (dist[j] &gt; dist[t] + w[i]) {\ndist[j] = dist[t] + w[i];\ncnt[j] = cnt[t] + 1;\nif (cnt[j] &gt;= n) return true;\nif (!st[j])\nq.push(j), st[j] = true;\n}\n}\n}\nreturn false;\n}\nint main() {\nscanf(\"%d%d\", &amp;n, &amp;m);\nmemset(h, -1, sizeof h);\nwhile (m--) {\nint a, b, c;\nscanf(\"%d%d%d\", &amp;a, &amp;b, &amp;c);\nadd(a, b, c);\n}\nif (spfa()) puts(\"Yes\");\nelse puts(\"No\");\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA/#9-floyd","title":"9 Floyd","text":""},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA/#91-floyd","title":"9.1 Floyd\u6c42\u6700\u77ed\u8def","text":"<p>Acwing 854</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;cstring&gt;\nusing namespace std;\nconst int N = 210, INF = 1e9;\nint n, m, Q;\nint d[N][N];\nvoid floyd() {\nfor (int k = 1; k &lt;= n; k++)\nfor (int i = 1; i &lt;= n; i++)\nfor (int j = 1; j &lt;= n; j++)\nd[i][j] = min(d[i][j], d[i][k] + d[k][j]);\n}\nint main() {\nscanf(\"%d%d%d\", &amp;n, &amp;m, &amp;Q);\nfor (int i = 1; i &lt;= n; i++)\nfor (int j = 1; j &lt;= n; j++)\nif (i == j) d[i][j] = 0;\nelse d[i][j] = INF;\nwhile (m--) {\nint a, b, c;\nscanf(\"%d%d%d\", &amp;a, &amp;b, &amp;c);\nd[a][b] = min(d[a][b], c);\n}\nfloyd();\nwhile (Q--) {\nint a, b;\nscanf(\"%d%d\", &amp;a, &amp;b);\nif (d[a][b] &gt; INF / 2) puts(\"impossible\");\nelse printf(\"%d\\n\", d[a][b]);\n}\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA/#10-prim","title":"10 Prim","text":""},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA/#101-prim","title":"10.1 Prim\u7b97\u6cd5\u6c42\u6700\u5c0f\u751f\u6210\u6811","text":"<p>Acwing 858</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;cstring&gt;\nusing namespace std;\nconst int N = 510, INF = 0x3f3f3f3f;\nint n, m;\nint g[N][N];\nint dist[N];\nbool st[N];\nint prim() {\nmemset(dist, 0x3f, sizeof dist);\ndist[1] = 0;\nint res = 0;\nfor (int i = 0; i &lt; n; i++) {\nint t = -1;\nfor (int j = 1; j &lt;= n; j++)\nif (!st[j] &amp;&amp; (t == -1 || dist[t] &gt; dist[j]))\nt = j;\nif (i &amp;&amp; dist[t] == INF) return INF; // \u4e0d\u662f\u7b2c\u4e00\u4e2a\u8282\u70b9\u5207\u8be5\u70b9\u5230\u4e0d\u4e86\u96c6\u5408\nres += dist[t];\nst[t] = true;\nfor (int j = 1; j &lt;= n; j++)\ndist[j] = min(dist[j], g[t][j]);\n}\nreturn res;\n}\nint main() {\nscanf(\"%d%d\", &amp;n, &amp;m);\nmemset(g, 0x3f, sizeof g);\nwhile (m--) {\nint a, b, c;\nscanf(\"%d%d%d\", &amp;a, &amp;b, &amp;c);\ng[a][b] = g[b][a] = min(g[a][b], c);\n}\nint t = prim();\nif (t == INF) puts(\"impossible\");\nelse printf(\"%d\\n\", t);\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA/#11-kruskal","title":"11 Kruskal","text":""},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA/#111-kruskal","title":"11.1 Kruskal\u7b97\u6cd5\u6c42\u6700\u5c0f\u751f\u6210\u6811","text":"<p>Acwing 859</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\nconst int N = 2e5 + 10;\nint n, m;\nint p[N];\nstruct Edge {\nint a, b, w;\nbool operator&lt;(const Edge &amp;W) const {\nreturn w &lt; W.w;\n}\n} edges[N];\nint find(int x) {\nif (p[x] != x) p[x] = find(p[x]);\nreturn p[x];\n}\nint main() {\nscanf(\"%d%d\", &amp;n, &amp;m);\nfor (int i = 0; i &lt; m; i ++ ) {\nint a, b, w;\nscanf(\"%d%d%d\", &amp;a, &amp;b, &amp;w);\nedges[i] = {a, b, w};\n}\nsort(edges, edges + m);\nfor (int i = 1; i &lt;= n; i ++ ) p[i] = i;\nint res = 0, cnt = 0; // res\u6743\u91cd\u4e4b\u5408  cnt\u52a0\u5165\u96c6\u5408\u7684\u8fb9\u6570\nfor (int i = 0; i &lt; m; i ++ ) {\nint a = edges[i].a, b = edges[i].b, w = edges[i].w;\na = find(a), b = find(b);\nif (a != b) p[a] = b, res += w, cnt ++ ;\n}\nif (cnt &lt; n - 1) puts(\"impossible\");\nelse printf(\"%d\\n\", res);\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA/#12","title":"12 \u67d3\u8272\u6cd5\u5224\u5b9a\u4e8c\u5206\u56fe","text":""},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA/#121","title":"12.1 \u67d3\u8272\u6cd5\u5224\u5b9a\u4e8c\u5206\u56fe","text":"<p>Acwing 860</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;cstring&gt;\nusing namespace std;\nconst int N = 1e5 + 10, M = 2e5 + 10;\nint n, m;\nint h[N], e[M], ne[M], idx;\nint color[N];\nvoid add(int a, int b) {\ne[idx] = b, ne[idx] = h[a], h[a] = idx++;\n}\nbool dfs(int u, int c) {\ncolor[u] = c;\nfor (int i = h[u]; i != -1; i = ne[i]) {\nint j = e[i];\nif (color[j] &amp;&amp; color[j] != 3 - c) return false;\nif (!color[j] &amp;&amp; !dfs(j, 3 - c)) return false;\n}\nreturn true;\n}\nint main() {\nscanf(\"%d%d\", &amp;n, &amp;m);\nmemset(h, -1, sizeof h);\nwhile (m--) {\nint a, b;\nscanf(\"%d%d\", &amp;a, &amp;b);\nadd(a, b), add(b, a);\n}\nbool flag = true;\nfor (int i = 1; i &lt;= n; i++)\nif (!color[i])\nif (!dfs(i, 1)) {\nflag = false;\nbreak;\n}\nflag ? puts(\"Yes\") : puts(\"No\");\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA/#13","title":"13 \u5308\u7259\u5229\u7b97\u6cd5","text":""},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/%E7%AC%AC%E4%B8%89%E7%AB%A0%20%E6%90%9C%E7%B4%A2%E4%B8%8E%E5%9B%BE%E8%AE%BA/#131","title":"13.1 \u4e8c\u5206\u56fe\u7684\u6700\u5927\u5339\u914d","text":"<p>Acwing 861</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;cstring&gt;\nusing namespace std;\nconst int N = 510, M = 1e5 + 10;\nint n1, n2, m;\nint h[N], e[M], ne[M], idx;\nint match[N];\nbool st[N];\nvoid add(int a, int b) {\ne[idx] = b, ne[idx] = h[a], h[a] = idx++;\n}\nbool find(int x) {\nfor (int i = h[x]; i != -1; i = ne[i]) {\nint j = e[i];\nif (!st[j]) {\nst[j] = true;\nif (!match[j] || find(match[j])) {\nmatch[j] = x;\nreturn true;\n}\n}\n}\nreturn false;\n}\nint main() {\nscanf(\"%d%d%d\", &amp;n1, &amp;n2, &amp;m);\nmemset(h, -1, sizeof h);\nwhile (m--) {\nint a, b;\nscanf(\"%d%d\", &amp;a, &amp;b);\nadd(a, b);\n}\nint res = 0;\nfor (int i = 1; i &lt;= n1; i++) {\nmemset(st, 0, sizeof st);\nif (find(i)) res++;\n}\nprintf(\"%d\\n\", res);\nreturn 0;\n}\n</code></pre>"},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E6%8F%90%E9%AB%98%E8%AF%BE/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95%280%29/","title":"\u7b2c\u4e00\u7ae0 \u57fa\u7840\u7b97\u6cd5(0)","text":""},{"location":"blogs/post/%E7%AE%97%E6%B3%95%E6%8F%90%E9%AB%98%E8%AF%BE/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95%280%29/#_1","title":"\u5f85\u66f4\u4fe1","text":""},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E6%A6%82%E8%BF%B0/","title":"\u7b2c\u4e00\u7ae0 \u6982\u8ff0","text":""},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E6%A6%82%E8%BF%B0/#12","title":"1.2 \u56e0\u7279\u7f51\u6982\u8ff0","text":""},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E6%A6%82%E8%BF%B0/#1","title":"(1). \u7f51\u7edc\u3001\u4e92\u8fde\u7f51\uff08\u4e92\u8fde\u7f51\uff09\u548c\u56e0\u7279\u7f51","text":"<p>\u7f51\u7edc(Network)\u7531\u82e5\u5e72\u7ed3\u70b9(Node)\u548c\u94fe\u63a5\u8fd9\u4e9b\u7ed3\u70b9\u7684\u94fe\u8def(Link)\u7ec4\u6210\u3002</p> <p>\u591a\u4e2a\u7f51\u7edc\u8fd8\u53ef\u4ee5\u901a\u8fc7\u8def\u7531\u5668\u4e92\u8fde\u8d77\u6765\uff0c\u8fd9\u6837\u5c31\u6784\u6210\u4e86\u4e00\u4e2a\u8986\u76d6\u8303\u56fd\u66f4\u5927\u7684\u7f51\u7edc\uff0c\u5373\u4e92\u8054\u7f51\uff08\u6216\u4e92\u8fde\u7f51\uff09\u3002\u56e0\u6b64\uff0c\u4e92\u8054\u7f51\u662f\u201d\u7f51\u7edc\u7684\u7f51\u7edc\u201c(Network of Networks)\u3002</p> <p>\u56e0\u7279\u7f51 (lnternet\uff09\u662f\u4e16\u754c\u4e0a\u6700\u5927\u7684\u4e92\u8fde\u7f51\u7edc\uff08\u7528\u6237\u6570\u4ee5\u4ebf\u8ba1\uff0c\u4e92\u8fde\u7684\u7f51\u7edc\u6570\u4ee5\u767e\u4e07\u8ba1\uff09\u3002</p>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E6%A6%82%E8%BF%B0/#2","title":"(2). \u56e0\u7279\u7f51\u53d1\u5c55\u7684\u4e09\u4e2a\u9636\u6bb5","text":""},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E6%A6%82%E8%BF%B0/#3","title":"(3). \u56e0\u7279\u7f51\u7684\u6807\u51c6\u5316\u5de5\u4f5c","text":"<p>\u56e0\u7279\u7f51\u7684\u6807\u51c6\u5316\u5de5\u4f5c\u5bf9\u56e0\u7279\u7f51\u7684\u53d1\u5c55\u8d77\u5230\u4e86\u975e\u5e38\u91cd\u8981\u7684\u4f5c\u7528\u3002</p> <p>\u56e0\u7279\u7f51\u5728\u5236\u5b9a\u5176\u6807\u51c6\u4e0a\u7684\u4e00\u4e2a\u5f88\u5927\u7684\u7279\u70b9\u662f\u9762\u5411\u516c\u4f17\u3002</p> <ul> <li>\u56e0\u7279\u7f51\u6240\u6709\u7684RFC(Request For Comments) \u6280\u672f\u6587\u6863\u90fd\u53ef\u4ece\u56e0\u7279\u7f51\u4e0a\u514d\u8d39\u4e0b\u8f7d\uff1b</li> <li>\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u968f\u65f6\u7528\u7535\u5b50\u90ae\u4ef6\u53d1\u8868\u5bf9\u67d0\u4e2a\u6587\u6863\u7684\u610f\u89c1\u6216\u5efa\u8bae\u3002</li> </ul> <p>\u56e0\u7279\u7f51\u534f\u4f1a1SOC\u662f\u4e00\u4e2a\u56fd\u9645\u6027\u7ec4\u7ec7\uff0c\u5b83\u8d1f\u8d23\u5bf9\u56e0\u7279\u7f51\u8fdb\u884c\u5168\u9762\u7ba1\u7406\uff0c\u4ee5\u53ca\u5728\u4e16\u754c\u8303\u56f4\u5185\u4fc3\u8fdb\u5176\u53d1\u5c55\u548c\u4f7f\u7528\u3002</p> <ul> <li>\u56e0\u7279\u7f51\u4f53\u7cfb\u7ed3\u6784\u59d4\u5458\u4f1aIAB\uff0c\u8d1f\u8d23\u7ba1\u7406\u56e0\u7279\u7f51\u6709\u5173\u534f\u8bae\u7684\u5f00\u53d1\uff1b</li> <li>\u56e0\u7279\u7f51\u5de5\u7a0b\u90e8!ETF\uff0c\u8d1f\u8d23\u7814\u7a76\u4e2d\u77ed\u671f\u5de5\u7a0b\u95ee\u9898\uff0c\u4e3b\u8981\u9488\u5bf9\u534f\u8bae\u7684\u5f00\u53d1\u548c\u6807\u51c6\u5316;</li> <li>\u56e0\u7279\u7f51\u7814\u7a76\u90e8IRTF\uff0c\u4ece\u4e8b\u7406\u8bba\u65b9\u9762\u7684\u7814\u7a76\u548c\u5f00\u53d1\u4e00\u4e9b\u9700\u8981\u957f\u671f\u8003\u8651\u7684\u95ee\u9898\u3002</li> </ul> <p></p> <p>\u5236\u8ba2\u56e0\u7279\u7f51\u7684\u6b63\u5f0f\u6807\u51c6\u8981\u7ecf\u8fc7\u4ee5\u4e0b4\u4e2a\u9636\u6bb5\uff1a</p> <ul> <li>\u56e0\u7279\u7f51\u8349\u6848\uff08\u5728\u8fd9\u4e2a\u9636\u6bb5\u8fd8\u4e0d\u662fRFC\u6587\u6863\uff09</li> <li>\u5efa\u8bae\u6807\u51c6\uff08\u4ece\u8fd9\u4e2a\u9636\u6bb5\u5f00\u59cb\u5c31\u6210\u4e3aRFC\u6587\u6863\uff09</li> <li>\u8349\u6848\u6807\u51c6</li> <li>\u56e0\u7279\u7f51\u6807\u51c6</li> </ul>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E6%A6%82%E8%BF%B0/#4","title":"(4). \u56e0\u7279\u7f51\u7684\u7ec4\u6210","text":"<ul> <li> <p>\u8fb9\u7f18\u90e8\u5206\uff1a\u7531\u6240\u6709\u8fde\u63a5\u5728\u56e0\u7279\u7f51\u4e0a\u7684\u4e3b\u673a\u7ec4\u6210\u3002\u8fd9\u90e8\u5206\u662f\u7528\u6237\u76f4\u63a5\u4f7f\u7528\u7684\uff0c\u7528\u6765\u8fdb\u884c\u901a\u4fe1\uff08\u4f20\u9001\u6570\u636e\u3001\u97f3\u9891\u6216\u89c6\u9891\uff09\u548c\u8d44\u6e90\u5171\u4eab\u3002</p> </li> <li> <p>\u6838\u5fc3\u90e8\u5206\uff1a\u7531\u5927\u91cf\u7f51\u7edc\u548c\u8fde\u63a5\u8fd9\u4e9b\u7f51\u7edc\u7684\u8def\u7531\u5668\u7ec4\u6210\u3002\u8fd9\u90e8\u5206\u662f\u4e3a\u8fb9\u7f18\u90e8\u5206\u63d0\u4f9b\u670d\u52a1\u7684\uff08\u63d0\u4f9b\u8fde\u901a\u6027\u548c\u4ea4\u6362\uff09\u3002</p> </li> </ul>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E6%A6%82%E8%BF%B0/#13","title":"1.3 \u4e09\u79cd\u4ea4\u6362\u65b9\u5f0f","text":""},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E6%A6%82%E8%BF%B0/#1-circuit-switching","title":"(1). \u7535\u8def\u4ea4\u6362\uff08Circuit Switching\uff09","text":"<ul> <li> <p>\u7535\u8bdd\u4ea4\u6362\u673a\u63a5\u901a\u7535\u8bdd\u7ebf\u7684\u65b9\u5f0f\u79f0\u4e3a\u7535\u8def\u4ea4\u6362\uff1b</p> </li> <li> <p>\u4ece\u901a\u4fe1\u8d44\u6e90\u7684\u5206\u914d\u89d2\u5ea6\u6765\u770b\uff0c\u4ea4\u6362(Switching\uff09 \u5c31\u662f\u6309\u7167\u67d0\u79cd\u65b9\u5f0f\u52a8\u6001\u5730\u5206\u914d\u4f20\u8f93\u7ebf\u8def\u7684\u8d44\u6e90;</p> </li> <li> <p>\u7535\u8def\u4ea4\u6362\u7684\u4e09\u4e2a\u6b65\u9aa4\uff1a</p> <ol> <li>\ufeff\ufeff\u5efa\u7acb\u8fde\u63a5\uff08\u5206\u914d\u901a\u4fe1\u8d44\u6e90\uff09</li> <li>\ufeff\ufeff\u901a\u8bdd\uff08\u4e00\u76f4\u5360\u7528\u901a\u4fe1\u8d44\u6e90\uff09</li> <li>\ufeff\ufeff\u91ca\u653e\u8fde\u63a5\uff08\u5f52\u8fd8\u901a\u4fe1\u8d44\u6e90\uff09</li> </ol> </li> </ul> <p>\u5f53\u4f7f\u7528\u7535\u8def\u4ea4\u6362\u6765\u4f20\u9001\u8ba1\u7b97\u673a\u6570\u636e\u65f6\uff0c\u5176\u7ebf\u8def\u7684\u4f20\u6986\u6548\u7387\u5f80\u5f80\u5f88\u4f4e\uff0c\u56e0\u4e3a\u7535\u8def\u4ea4\u6362\u5f80\u5f80\u662f\u7a81\u53d1\u5f0f\u53d1\u751f\u7684\u3002</p>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E6%A6%82%E8%BF%B0/#2-packet-switching","title":"(2). \u5206\u7ec4\u4ea4\u6362 \uff08Packet Switching\uff09","text":"<ul> <li>\u53d1\u9001\u65b9\uff1a\u6784\u9020\u5206\u7ec4\u3001\u53d1\u9001\u5206\u7ec4</li> <li>\u8def\u7531\u5668\uff1a\u7f13\u5b58\u5206\u7ec4\u3001\u8f6c\u53d1\u5206\u7ec4</li> <li>\u63a5\u6536\u65b9\uff1a\u63a5\u6536\u5206\u7ec4\u3001\u8fd8\u539f\u62a5\u6587</li> </ul>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E6%A6%82%E8%BF%B0/#3-message-switching","title":"(3). \u62a5\u6587\u4ea4\u6362(Message Switching)","text":"<p>\u4e0e\u5206\u7ec4\u4ea4\u6362\u7c7b\u4f3c\uff0c\u4f46\u662f\u62a5\u6587\u4ea4\u6362\u4e2d\u7684\u6570\u636e\u62a5\u7684\u5927\u5c0f\u662f\u4e0d\u53d7\u9650\u5236\uff0c\u6240\u4ee5\u8def\u7531\u5668\u4e2d\u9700\u8981\u6709\u8db3\u591f\u5927\u7684\u7f13\u5b58\u3002</p>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E6%A6%82%E8%BF%B0/#4_1","title":"(4). \u4e09\u79cd\u4ea4\u6362\u65b9\u5f0f\u5bf9\u6bd4","text":"\u4ea4\u6362\u65b9\u5f0f \u7535\u8def\u4ea4\u6362 \u62a5\u6587\u4ea4\u6362 \u5206\u7ec4\u4ea4\u6362 \u4f18\u70b9 \u901a\u4fe1\u65f6\u5ef6\u5c0f\u6709\u5e8f\u4f20\u8f93\u6ca1\u6709\u51b2\u7a81 \ufeff\u6d3b\u7528\u8303\u56f4\u5e7f\u5b9e\u65f6\u6027\u5f3a\u63a7\u5236\u7b80\u5355 \u65e0\u9700\u5efa\u7acb\u8fde\u63a5\u52a8\u6001\u5206\u914d\u7ebf\u8def\u63d0\u9ad8\u7ebf\u8def\u53ef\u9760\u6027\u63d0\u9ad8\u7ebf\u8def\u5229\u7528\u7387\u63d0\u4f9b\u591a\u76ee\u6807\u670d\u52a1 \u65e0\u9700\u5efa\u7acb\u8fde\u63a5\u7ebf\u8def\u5229\u7528\u7387\u9ad8\u7b80\u5316\u4e86\u5b58\u50a8\u7ba1\u7406\u52a0\u901f\u4f20\u8f93\u51cf\u5c11\u51fa\u9519\u9884\u7387\u548c\u91cd\u53d1\u6570\u636e\u91cf \u7f3a\u70b9 \u5efa\u7acb\u8fde\u63a5\u65f6\u95f4\u957f\ufeff\u7ebf\u8def\u72ec\u5360\uff0c\u4f7f\u7528\u6548\u7387\u4f4e\u7075\u6d3b\u6027\u5dee\u96be\u4ee5\u89c4\u683c\u5316 \u5f15\u8d77\u4e86\u8f6c\u53d1\u65f6\u5ef6\u9700\u8981\u8f83\u5927\u5b58\u50a8\u7ea7\u5b58\u7a7a\u95f4\u9700\u8981\u4f20\u8f93\u989c\u5916\u7684\u4fe1\u606f\u91cf \u5f15\u8d77\u4e86\u8f6c\u53d1\u65f6\u5ef6\u9700\u8981\u4f20\u7269\u989d\u5916\u7684\u4fe1\u70b9\u91cf\u5bf9\u4e8e\u6570\u636e\u62a5\u670d\u52a1\uff0c\u5b58\u5728\u5931\u5e8f\uff0c\u4e1f\u5931\u6216\u91cd\u590d\u5206\u7ec4\u7684\u95ee\u9898\uff1b\u5bf9\u4e8e\u865a\u7535\u8def\u670d\u52a1\uff0c\u5b58\u5728\u547c\u53eb\u5efa\u7acb\uff0c\u6570\u636e\u4f20\u8f93\u548c\u53d1\u7535\u8def\u91ca\u653e\u4e09\u4e2a\u8fc7\u7a0b"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E6%A6%82%E8%BF%B0/#14","title":"1.4 \u8ba1\u7b97\u673a\u7f51\u7edc\u7684\u5b9a\u4e49\u548c\u5206\u7c7b","text":"<p>\u8ba1\u7b97\u673a\u7f51\u7edc\u7684\u6700\u7b80\u5355\u7684\u5b9a\u4e49\u662f\uff1a\u4e00\u4e9b\u4e92\u76f8\u8fde\u63a5\u7684\u3001\u81ea\u6cbb\u7684\u8ba1\u7b97\u673a\u7684\u96c6\u5408\u3002</p>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/","title":"\u7b2c\u4e00\u7ae0 \u8ba1\u7b97\u673a\u7f51\u7edc\u4f53\u7cfb\u7ed3\u6784","text":""},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/#1","title":"(1) \u6982\u5ff5\u4e0e\u529f\u80fd","text":"<p>1\u3001\u6982\u5ff5</p> <p>\u8ba1\u7b97\u673a\u7f51\u7edc\uff1a\u662f\u4e00\u4e2a\u5c06\u5206\u6563\u7684\u3001\u5177\u6709\u72ec\u7acb\u529f\u80fd\u7684\u8ba1\u7b97\u673a\u7cfb\u7edf\uff0c\u901a\u8fc7\u901a\u4fe1\u8bbe\u5907\u4e0e\u7ebf\u8def\u8fde\u63a5\u8d77\u6765\uff0c\u7531\u529f\u80fd\u5b8c\u5584\u7684\u8f6f\u4ef6\u5b9e\u73b0\u8d44\u6e90\u5171\u4eab\u548c\u4fe1\u606f\u4f20\u9012\u7684\u7cfb\u7edf\u3002</p> <p>ISP (Internet Service Provider)\uff1a\u56e0\u7279\u7f51\u670d\u52a1\u63d0\u4f9b\u8005/\u56e0\u7279\u7f51\u670d\u52a1\u63d0\u4f9b\u5546\uff0c\u662f\u4e00\u4e2a\u5411\u5e7f\u5927\u7528\u6237\u7efc\u5408\u63d0\u4f9b\u4e92\u8054\u7f51\u63a5\u5165\u670d\u52a1\u3001\u4fe1\u606f\u4e1a\u52a1\u548c\u589e\u503c\u4e1a\u52a1\u7684\u516c\u53f8\u3002</p> <p>IXP (Internet Exchange Point)\uff1a\u56e0\u7279\u7f51\u4ea4\u6362\u70b9</p> <p>2\u3001\u529f\u80fd</p> <ul> <li>\u6570\u636e\u901a\u4fe1</li> <li>\u8d44\u6e90\u5171\u4eab\uff1a\u540c\u4e00\u4e2a\u8ba1\u7b97\u673a\u7f51\u7edc\u4e0a\u7684\u5176\u5b83\u8ba1\u7b97\u673a\u53ef\u4ee5\u4f7f\u7528\u67d0\u53f0\u8ba1\u7b97\u673a\u7684\u8ba1\u7b97\u673a\u8d44\u6e90\u7684\u884c\u4e3a\uff0c\u53ef\u5171\u4eab\u786c\u4ef6\u3001\u8f6f\u4ef6\u3001\u6570\u636e\u3002eg\uff1a\u7f51\u7edc\u6253\u5370\u673a\u3002</li> <li>\u5206\u5e03\u5f0f\u5904\u7406\uff1a\u591a\u53f0\u8ba1\u7b97\u673a\u5404\u81ea\u627f\u62c5\u540c\u4e00\u5de5\u4f5c\u4efb\u52a1\u7684\u4e0d\u540c\u90e8\u5206\u3002eg\uff1aHadoop \u5e73\u53f0\u3002\u53ef\u4ee5\u63d0\u9ad8\u7f51\u7edc\u7684\u63d0\u9ad8\u53ef\u9760\u6027\u4e0e\u8d1f\u8f7d\u5747\u8861\u3002</li> </ul>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/#2","title":"(2) \u7ec4\u6210\u4e0e\u5206\u7c7b","text":"<p>1\u3001\u7ec4\u6210\uff1a\u786c\u4ef6 + \u8f6f\u4ef6 + \u534f\u8bae - \u6309\u5de5\u4f5c\u65b9\u5f0f\u5206\u7c7b\uff1a     - \u8fb9\u7f18\u90e8\u5206\uff1a\u7528\u4e8e\u76f4\u63a5\u4f7f\u7528         - C/S \u65b9\u5f0f(Client / Server)         - P2P \u65b9\u5f0f(peer-to-peer)     - \u6838\u5fc3\u90e8\u5206\uff1a\u4e3a\u8fb9\u7f18\u90e8\u5206\u670d\u52a1</p> <ul> <li>\u6309\u529f\u80fd\u7ec4\u6210\u5206\u7c7b\uff1a\u6570\u636e\u901a\u4fe1 + \u8d44\u6e90\u5171\u4eab<ul> <li>\u901a\u4fe1\u5b50\u7f51\uff1a\u5b9e\u73b0\u6570\u636e\u901a\u4fe1</li> <li>\u8d44\u6e90\u5b50\u7f51\uff1a\u5b9e\u73b0\u8d44\u6e90\u5171\u4eab/\u6570\u636e\u5904\u7406</li> </ul> </li> </ul> <p>2\u3001\u5206\u7c7b</p> <ul> <li>\u6309\u5206\u5e03\u8303\u56f4\u5206\u7c7b\uff1a\u5e7f\u57df\u7f51 WAN\uff08\u91c7\u7528\u4ea4\u6362\u6280\u672f\uff09\u3001\u57ce\u57df\u7f51 MAN\u3001\u5c40\u57df\u7f51 LAN\uff08\u91c7\u7528\u5e7f\u64ad\u6280\u672f\uff09\u3001\u4e2a\u4eba\u533a\u57df\u7f51 PAN</li> <li>\u6309\u4f7f\u7528\u8005\u5206\u7c7b\uff1a\u516c\u7528\u7f51\u3001\u4e13\u7528\u7f51</li> <li>\u6309\u4ea4\u6362\u6280\u672f\u5206\u7c7b\uff1a\u7535\u8def\u4ea4\u6362\u3001\u62a5\u6587\u4ea4\u6362\u3001\u5206\u7ec4\u4ea4\u6362</li> <li>\u6309\u62d3\u6251\u7ed3\u6784\u5206\u88c2\uff1a\u603b\u7ebf\u578b\u3001\u661f\u578b\u3001\u73af\u578b\u3001\u7f51\u72b6\u578b</li> <li>\u6309\u4f20\u8f93\u6280\u672f\u5206\u7c7b\uff1a<ul> <li>\u5e7f\u64ad\u5f0f\u7f51\u7edc\uff1a\u5171\u4eab\u516c\u5171\u901a\u4fe1\u4fe1\u9053</li> <li>\u70b9\u5bf9\u70b9\u7f51\u7edc\uff1a\u4f7f\u7528\u5206\u7ec4\u5b58\u50a8\u8f6c\u53d1\u548c\u8def\u7531\u9009\u62e9\u673a\u5236</li> </ul> </li> </ul>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/#3","title":"(3) \u6807\u51c6\u5316\u5de5\u4f5c\u4e0e\u7ec4\u7ec7","text":"<p>1\u3001\u6807\u51c6\u5206\u7c7b</p> <ul> <li>\u6cd5\u5b9a\u6807\u51c6\uff1a\u6709\u6743\u5a01\u673a\u6784\u5236\u5b9a\u7684\u6b63\u5f0f\u7684\u3001\u5408\u6cd5\u7684\u6807\u51c6\u3002eg\uff1aOSI</li> <li>\u4e8b\u5b9e\u6807\u51c6\uff1a\u67d0\u4e9b\u516c\u5f0f\u7684\u4ea7\u54c1\u5728\u7ade\u4e89\u4e2d\u5360\u636e\u4e86\u4e3b\u6d41\uff0c\u65f6\u95f4\u957f\u4e86\uff0c\u8fd9\u4e0b\u4ea7\u54c1\u4e2d\u7684\u534f\u8bae\u548c\u6280\u672f\u5c31\u6210\u4e86\u6807\u51c6\u3002eg\uff1aTCP/IP</li> </ul> <p>2\u3001RFC(Request For Comments)\uff1a\u56e0\u7279\u7f51\u6807\u51c6\u7684\u5f62\u5f0f</p> <p>RFC \u8981\u4e0a\u5347\u4e3a\u56e0\u7279\u7f51\u6b63\u5f0f\u7684\u6807\u51c6\u7684\u4e09\u4e2a\u9636\u6bb5\uff1a - \u56e0\u7279\u7f51\u8349\u6848(Internet Draft)\uff1a\u8fd9\u4e2a\u9636\u6bb5\u8fd8\u4e0d\u662f RFC \u6587\u6863 - \u5efa\u8bae\u6807\u51c6(Proposed Standard)\uff1a\u4ece\u8fd9\u4e2a\u9636\u6bb5\u5f00\u59cb\u6210\u4e3a RFC \u6587\u6863 - \u56e0\u7279\u7f51\u6807\u51c6(Internet Standard)</p> <p>3\u3001\u6807\u51c6\u5316\u5de5\u4f5c\u7684\u76f8\u5173\u7ec4\u7ec7</p> <ul> <li>ISO (International Organization for Standardization\uff0c\u56fd\u9645\u6807\u51c6\u5316\u7ec4\u7ec7)</li> <li>ITU (International Telecommunication Union\uff0c\u56fd\u9645\u7535\u4fe1\u8054\u76df)</li> <li>IEEE (Institute of Electrical and Electronics Engineers\uff0c\u7535\u6c14\u4e0e\u7535\u5b50\u5de5\u7a0b\u5e08\u534f\u4f1a)</li> <li>IETF (The Internet Engineering Task Force\uff0c\u4e92\u8054\u7f51\u5de5\u7a0b\u4efb\u52a1\u7ec4)</li> </ul>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/#4","title":"(4) \u6027\u80fd\u6307\u6807","text":"<p>1\u3001\u901f\u7387</p> <p>\u5b9a\u4e49\uff1a\u901f\u7387\u53c8\u79f0\u6570\u636e\u7387\u3001\u6570\u636e\u4f20\u8f93\u7387\u6216\u8005\u6bd4\u7279\u7387\uff0c\u6307\u8fde\u63a5\u5728\u8ba1\u7b97\u673a\u7f51\u7edc\u4e0a\u7684\u4e3b\u673a\u5728\u6570\u5b57\u4fe1\u9053\u4e0a\u4f20\u9001\u6570\u636e\u4f4d\u6570\u7684\u901f\u7387</p> <p>\u901f\u7387\u5355\u4f4d\uff1a\\(1\\)Tb/s = \\(10^3\\)Gb/s = \\(10^6\\)Mb/s = \\(10^9\\)kb/s = \\(10^{12}\\)b/s</p> <p>\u5bf9\u4e8e\u5b58\u50a8\u5bb9\u91cf\u7684\u5355\u4f4d\uff1a - \\(1\\)Byte = \\(8\\)bit - \\(1\\)TB = \\(2^{10}\\)GB = \\(2^{20}\\)MB = \\(2^{30}\\)KB = \\(2^{40}\\)B = \\(2^{43}\\)b</p> <p>2\u3001\u5e26\u5bbd</p> <p>\u539f\u672c\u5b9a\u4e49\uff1a\u6307\u67d0\u4e2a\u4fe1\u53f7\u5177\u6709\u7684\u9891\u5e26\u5bbd\u5ea6\uff0c\u5373\u6700\u9ad8\u9891\u7387\u4e0e\u6700\u4f4e\u9891\u7387\u4e4b\u5dee\uff0c\u5355\u4f4d\u4e3a\u8d6b\u5179\uff08HZ\uff09\u3002</p> <p>\u8ba1\u7f51\u4e2d\u7684\u5b9a\u4e49\uff1a\u5728\u8ba1\u7b97\u673a\u7f51\u7edc\u4e2d\uff0c\u5e26\u5bbd\u7528\u6765\u8868\u793a\u7f51\u7edc\u7684\u901a\u4fe1\u7ebf\u8def\u4f20\u9001\u6570\u636e\u7684\u80fd\u529b\uff0c\u901a\u5e38\u662f\u6307\u5355\u4f4d\u65f6\u95f4\u5185\u4ece\u7f51\u7edc\u4e2d\u7684\u67d0\u4e00\u70b9\u5230\u53e6\u4e00\u70b9\u6240\u80fd\u901a\u8fc7\u7684\u201c\u6700\u9ad8\u6570\u636e\u7387\u201d\uff0c\u5373\u7f51\u7edc\u8bbe\u5907\u6240\u80fd\u652f\u6301\u7684\u6700\u9ad8\u901f\u5ea6\u3002</p> <p>\u5e26\u5bbd\u5355\u4f4d\uff1a\\(1\\)Tb/s = \\(10^3\\)Gb/s = \\(10^6\\)Mb/s = \\(10^9\\)kb/s = \\(10^{12}\\)b/s</p> <p>\u5e26\u5bbd\u4e00\u822c\u53ea\u53d1\u9001\u7aef\u7684\u901f\u7387\uff01</p> <p>3\u3001\u541e\u5410\u91cf</p> <p>\u5b9a\u4e49\uff1a\u5355\u4f4d\u65f6\u95f4\u5185\u901a\u8fc7\u67d0\u4e2a\u7f51\u7edc\uff08\u6216\u4fe1\u9053\u3001\u63a5\u53e3\uff09\u7684\u6570\u636e\u91cf\u3002</p> <p>\u541e\u5410\u91cf\u53d7\u7f51\u7edc\u7684\u5e26\u5bbd\u6216\u7f51\u7edc\u7684\u989d\u5b9a\u901f\u7387\u7684\u9650\u5236\u3002</p> <p>\u541e\u5410\u91cf\u5355\u4f4d\uff1a\\(1\\)Tb/s = \\(10^3\\)Gb/s = \\(10^6\\)Mb/s = \\(10^9\\)kb/s = \\(10^{12}\\)b/s</p> <p>\u901f\u7387\u3001\u5e26\u5bbd\u3001\u541e\u5410\u91cf\u4e09\u8005\u4e4b\u95f4\u7684\u5173\u7cfb\uff1a </p> <p>4\u3001\u65f6\u5ef6</p> <p>\u5b9a\u4e49\uff1a\u6307\u6570\u636e\uff08\u62a5\u6587/\u5206\u7ec4/\u6bd4\u7279\u6d41\uff09\u4ece\u7f51\u7edc\uff08\u6216\u94fe\u8def\uff09\u7684\u4e00\u7aef\u4f20\u9001\u5230\u53e6\u4e00\u7aef\u6240\u9700\u7684\u65f6\u95f4\u3002\u4e5f\u53eb\u5ef6\u8fdf\u6216\u8005\u8fdf\u5ef6\u3002</p> <p>\u65f6\u5ef6\u5355\u4f4d\uff1as</p> <p>\u5206\u7c7b\uff1a - \u53d1\u9001\u65f6\u5ef6\uff08\u4f20\u8f93\u65f6\u5ef6\uff09\uff1a\u53d1\u9001\u65f6\u5ef6  = \\(\\frac{\u6570\u636e\u957f\u5ea6}{\u4fe1\u9053\u5e26\u5bbd\uff08\u53d1\u9001\u901f\u7387\uff09}\\) - \u4f20\u64ad\u65f6\u5ef6\uff1a\u53d6\u51b3\u4e8e\u7535\u78c1\u6ce2\u4f20\u64ad\u901f\u5ea6\u548c\u94fe\u8def\u957f\u5ea6\uff0c\u4f20\u64ad\u65f6\u5ef6 = \\(\\frac{\u4fe1\u9053\u957f\u5ea6}{\u7535\u78c1\u6ce2\u5728\u4fe1\u9053\u4e0a\u7684\u4f20\u64ad\u901f\u7387}\\) - \u6392\u961f\u65f6\u5ef6\uff1a\u7b49\u5f85\u8f93\u51fa\\\u5165\u94fe\u8def\u53ef\u7528\uff0c - \u5904\u7406\u65f6\u5ef6\uff1a\u68c0\u9519\u3001\u627e\u51fa\u53e3</p> <p>\u6ce8\u610f\uff0c\u5982\u679c\u4ec5\u63d0\u9ad8\u53d1\u9001\u901f\u7387\uff0c\u53ea\u4f1a\u4f7f\u53d1\u9001\u65f6\u5ef6\u51cf\u5c0f\uff0c\u4f46\u662f\u4f20\u64ad\u65f6\u5ef6\u662f\u4e0d\u4f1a\u6539\u53d8\u7684\u3002</p> <p>5\u3001\u65f6\u5ef6\u5e26\u5bbd\u79ef</p> <p>\u5b9a\u4e49\uff1a\u65f6\u5ef6\u5e26\u5bbd\u79ef = \u4f20\u64ad\u65f6\u5ef6 x \u5e26\u5bbd\uff0c\u65f6\u5ef6\u5e26\u5bbd\u79ef\u53c8\u79f0\u4e3a\u4ee5\u6bd4\u7279\u4e3a\u5355\u4f4d\u7684\u94fe\u8def\u957f\u5ea6 \uff0c\u5373\u201c\u67d0\u6bb5\u94fe\u8def\u73b0\u5728\u6709\u591a\u5c11\u6bd4\u7279\u201d\u3002</p> <p>\u5355\u4f4d\uff1abit = s x b/s</p> <p>6\u3001\u5f80\u8fd4\u65f6\u5ef6 RTT</p> <p>\u5b9a\u4e49\uff1a\u4ece\u53d1\u9001\u65b9\u53d1\u9001\u6570\u636e\u5f00\u59cb\uff0c\u5230\u53d1\u9001\u65b9\u63a5\u6536\u5230\u63a5\u6536\u65b9\u7684\u786e\u8ba4\uff08\u63a5\u6536\u65b9\u6536\u5230\u6570\u636e\u540e\u7acb\u5373\u53d1\u9001\u786e\u8ba4\uff09\uff0c\u603b\u5171\u7ecf\u5386\u7684\u65f6\u5ef6\u3002</p> <p>RTT \u5305\u62ec\uff1a - \u5f80\u8fd4\u4f20\u64ad\u65f6\u5ef6 = \u4f20\u64ad\u65f6\u5ef6 x 2 - \u672b\u7aef\u5904\u7406\u65f6\u95f4</p> <p>7\u3001\u5229\u7528\u7387</p> <p>\u5206\u7c7b\uff1a - \u4fe1\u9053\u5229\u7528\u7387 = \\(\\frac{\u6709\u6570\u636e\u901a\u8fc7\u65f6\u95f4}{(\u6709 + \u65e0) \u6570\u636e\u901a\u8fc7\u65f6\u95f4}\\) - \u7f51\u7edc\u5229\u7528\u7387 = \u4fe1\u9053\u5229\u7528\u7387\u52a0\u6743\u5e73\u5747\u503c</p> <p>\u65f6\u5ef6\u4e0e\u5229\u7528\u7387\u7684\u5173\u7cfb\uff1a</p>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/#5","title":"(5) \u5206\u5c42\u7ed3\u6784\u3001\u534f\u8bae\u3001\u63a5\u53e3\u3001\u670d\u52a1","text":"<p>\u7f51\u7edc\u4f53\u7cfb\u7ed3\u6784\u662f\u4ece\u529f\u80fd\u4e0a\u63cf\u8ff0\u8ba1\u7b97\u673a\u7f51\u7edc\u7ed3\u6784\u3002</p> <p>\u540d\u8bcd\u5b9a\u4e49\uff1a</p> <ul> <li>\u5b9e\u4f53\uff1a\u7b2c n \u5c42\u4e2d\u6d3b\u52a8\u5143\u7d20\u79f0\u4e3a n \u5c42\u5b9e\u4f53\uff0c\u540c\u4e00\u5c42\u7684\u5b9e\u4f53\u53eb\u505a\u5bf9\u7b49\u5b9e\u4f53\u3002</li> <li>\u534f\u8bae\uff1a\u4e3a\u8fdb\u884c\u7f51\u7edc\u4e2d\u7684\u5bf9\u7b49\u5b9e\u4f53\u6570\u636e\u4ea4\u6362\u800c\u5efa\u7acb\u7684\u89c4\u5219\u3001\u6807\u51c6\u6216\u8005\u7ea6\u5b9a\u79f0\u4e3a\u7f51\u7edc\u534f\u8bae\u3010\u6c34\u5e73\u3011\u3002\u534f\u8bae\u7684\u4e09\u5927\u8981\u7d20\uff1a<ul> <li>\u8bed\u6cd5\uff1a\u89c4\u5b9a\u4f20\u8f93\u6570\u636e\u7684\u683c\u5f0f</li> <li>\u8bed\u4e49\uff1a\u89c4\u5b9a\u6240\u8981\u5b8c\u6210\u7684\u529f\u80fd</li> <li>\u540c\u6b65\uff1a\u89c4\u5b9a\u5404\u79cd\u64cd\u4f5c\u7684\u987a\u5e8f</li> </ul> </li> <li>\u63a5\u53e3\uff08\u8bbf\u95ee\u670d\u52a1\u70b9 SAP\uff09\uff1a\u4e0a\u5c42\u4f7f\u7528\u4e0b\u5c42\u670d\u52a1\u7684\u5165\u53e3\u3002</li> <li>\u670d\u52a1\uff1a\u4e0b\u5c42\u4e3a\u76f8\u90bb\u4e0a\u5c42\u63d0\u4f9b\u7684\u529f\u80fd\u8c03\u7528\u3010\u5782\u76f4\u3011\u3002</li> <li>SDU \u670d\u52a1\u6570\u636e\u5355\u5143\uff1a\u4e3a\u5b8c\u6210\u7528\u6237\u6240\u8981\u6c42\u7684\u529f\u80fd\u800c\u5e94\u4f20\u8fbe\u7684\u6570\u636e</li> <li>PCI \u534f\u8bae\u63a7\u5236\u4fe1\u606f\uff1a\u63a7\u5236\u534f\u8bae\u64cd\u4f5c\u7684\u4fe1\u606f</li> <li>PDU \u534f\u8bae\u6570\u636e\u5355\u5143\uff1a\u5bf9\u7b49\u5c42\u6b21\u4e4b\u95f4\u4f20\u9001\u7684\u6570\u636e\u5355\u4f4d\uff0cPDU = SDU + PCI</li> </ul> <p>\u5206\u5c42\u7684\u539f\u5219\uff1a</p> <ol> <li>\u5404\u5c42\u4e4b\u95f4\u76f8\u4e92\u72ec\u7acb\uff0c\u6bcf\u5c42\u53ea\u5b9e\u73b0\u4e00\u79cd\u76f8\u5bf9\u72ec\u7acb\u7684\u529f\u80fd\u3002</li> <li>\u6bcf\u5c42\u4e4b\u95f4\u754c\u9762\u81ea\u7136\u6e05\u6670\uff0c\u6291\u90c1\u7406\u89e3\uff0c\u76f8\u4e92\u4ea4\u6d41\u5c3d\u53ef\u80fd\u5c11\u3002</li> <li>\u7ed3\u6784\u4e0a\u53ef\u5206\u5272\u5f00\uff0c\u6bcf\u5c42\u90fd\u91c7\u7528\u6700\u9002\u5408\u7684\u6280\u672f\u6765\u5b9e\u73b0\u3002</li> <li>\u4fdd\u6301\u4e0b\u5c42\u5bf9\u4e0a\u5c42\u7684\u72ec\u7acb\u6027\uff0c\u4e0a\u5c42\u5355\u9879\u4f7f\u7528\u4e0b\u5c42\u63d0\u4f9b\u7684\u670d\u52a1\u3002</li> </ol> <p>\u5206\u5c42\u7ed3\u6784\u5206\u7c7b\uff1a</p> <ul> <li>7 \u5c42 OSI \u53c2\u8003\u6a21\u578b\uff08\u6cd5\u5b9a\u6807\u51c6\uff09</li> <li>4 \u5c42 TCP/IP \u53c2\u8003\u6a21\u578b\uff08\u4e8b\u5b9e\u6807\u51c6\uff09</li> </ul>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/#6-7-osi","title":"(6) 7 \u5c42 OSI \u53c2\u8003\u6a21\u578b","text":"<p>\u63d0\u51fa\u76ee\u7684\uff1a\u652f\u6301\u5f02\u6784\u7f51\u7edc\u7cfb\u7edf\u7684\u4e92\u8054\u4e92\u901a</p> <ul> <li>\u5e94\u7528\u5c42\uff1a\u6240\u6709\u80fd\u548c\u7528\u6237\u4ea4\u4e92\u4ea7\u751f\u7f51\u7edc\u6d41\u91cf\u7684\u7a0b\u5e8f\u3002\u7ecf\u5178\u5e94\u7528\u5c42\u670d\u52a1\uff1a\u6587\u4ef6\u4f20\u8f93\uff08FTP)\u3001\u7535\u5b50\u90ae\u4ef6\uff08SMTP\uff09\u3001\u4e07\u7ef4\u7f51\uff08HTTP\uff09\u3002</li> <li>\u8868\u793a\u5c42\uff1a\u7528\u4e8e\u5904\u7406\u5728\u4e24\u4e2a\u901a\u4fe1\u7cfb\u7edf\u4e2d\u4ea4\u6362\u4fe1\u606f\u7684\u8868\u793a\u65b9\u5f0f\uff08\u8bed\u6cd5\u548c\u8bed\u4e49\uff09<ul> <li>\u529f\u80fd\u4e00\uff1a\u6570\u636e\u683c\u5f0f\u53d8\u6362</li> <li>\u529f\u80fd\u4e8c\uff1a\u6570\u636e\u52a0\u5bc6\u89e3\u5bc6</li> <li>\u529f\u80fd\u4e09\uff1a\u6570\u636e\u538b\u7f29\u548c\u6062\u590d</li> </ul> </li> <li>\u4f1a\u8bdd\u5c42\uff1a\u5411\u8868\u793a\u5c42\u5b9e\u4f53/\u7528\u6237\u8fdb\u7a0b\u63d0\u4f9b\u5efa\u7acb\u8fde\u63a5\u5e76\u5728\u8fde\u63a5\u4e0a\u6709\u5e8f\u5730\u4f20\u8f93\u6570\u636e\u3002\u8fd9\u662f\u4f1a\u8bdd\uff0c\u4e5f\u662f\u5efa\u7acb\u540c\u6b65\uff08SYN\uff09\u3002<ul> <li>\u529f\u80fd\u4e00\uff1a\u5efa\u7acb\u3001\u7ba1\u7406\u3001\u7ec8\u6b62\u4f1a\u8bdd</li> <li>\u529f\u80fd\u4e8c\uff1a\u4f7f\u7528\u6821\u9a8c\u70b9\u53ef\u4f7f\u4f1a\u8bdd\u5728\u901a\u4fe1\u5931\u6548\u65f6\u4ece\u6821\u9a8c\u70b9/\u540c\u6b65\u70b9\u7ee7\u7eed\u56de\u590d\u901a\u4fe1\uff0c\u5b9e\u73b0\u6570\u636e\u540c\u6b65\u3002\u9002\u7528\u4e8e\u4f20\u8f93\u5927\u6587\u4ef6\u3002</li> </ul> </li> <li>\u4f20\u8f93\u5c42\uff1a\u8d1f\u8d23\u4e3b\u673a\u4e2d\u4e24\u4e2a\u8fdb\u7a0b\u7684\u901a\u4fe1\uff0c\u5373\u7aef\u5230\u7aef\u901a\u4fe1\u3002\u4f20\u8f93\u5355\u4f4d\u662f\u62a5\u6587\u6bb5\u6216\u8005\u7528\u6237\u6570\u636e\u62a5\u3002<ul> <li>\u529f\u80fd\u4e00\uff1a\u53ef\u9760\u4f20\u8f93\u3001\u4e0d\u53ef\u9760\u4f20\u8f93</li> <li>\u529f\u80fd\u4e8c\uff1a\u5dee\u9519\u63a7\u5236</li> <li>\u529f\u80fd\u4e09\uff1a\u6d41\u91cf\u63a7\u5236</li> <li>\u529f\u80fd\u56db\uff1a\u590d\u7528\u5206\u7528</li> </ul> </li> <li>\u7f51\u7edc\u5c42\uff1a\u628a\u5206\u7ec4\u4ece\u6e90\u7aef\u4f20\u5230\u76ee\u7684\u7aef\uff0c\u4e3a\u5206\u7ec4\u4ea4\u6362\u7f51\u4e0a\u7684\u4e0d\u540c\u4e3b\u673a\u63d0\u4f9b\u901a\u4fe1\u670d\u52a1\u3002\u4f20\u8f93\u5355\u4f4d\u662f\u6570\u636e\u62a5\u3002<ul> <li>\u529f\u80fd\u4e00\uff1a\u8def\u7531\u9009\u62e9\uff08\u6700\u4f73\u8def\u5f84\uff09</li> <li>\u529f\u80fd\u4e8c\uff1a\u6d41\u91cf\u63a7\u5236</li> <li>\u529f\u80fd\u4e09\uff1a\u5dee\u9519\u63a7\u5236</li> <li>\u529f\u80fd\u56db\uff1a\u62e5\u585e\u63a7\u5236</li> </ul> </li> <li>\u6570\u636e\u94fe\u8def\u5c42\uff1a\u628a\u7f51\u7edc\u5c42\u4f20\u4e0b\u6765\u7684\u6570\u636e\u62a5\u7ec4\u6210\u5e27\u3002\u4f20\u8f93\u5355\u4f4d\u662f\u5e27\u3002<ul> <li>\u529f\u80fd\u4e00\uff1a\u6210\u5e27\uff08\u5b9a\u4e49\u5e27\u7684\u5f00\u59cb\u548c\u7ed3\u675f\uff09</li> <li>\u529f\u80fd\u4e8c\uff1a\u5dee\u9519\u63a7\u5236\uff08\u5e27\u9519 + \u4f4d\u9519\uff09</li> <li>\u529f\u80fd\u4e09\uff1a\u6d41\u91cf\u63a7\u5236</li> <li>\u529f\u80fd\u56db\uff1a\u8bbf\u95ee\uff08\u63a5\u5165\uff09\u63a7\u5236\uff08\u63a7\u5236\u5bf9\u4fe1\u9053\u7684\u8bbf\u95ee\uff09</li> </ul> </li> <li>\u7269\u7406\u5c42\uff1a\u5728\u5c4b\u91cc\u5a92\u4f53\u4e0a\u5b9e\u73b0\u6bd4\u7279\u6d41\u7684\u900f\u660e\u4f20\u8f93\u3002\u4f20\u8f93\u5355\u4f4d\u662f\u6bd4\u7279\u3002<ul> <li>\u529f\u80fd\u4e00\uff1a\u5b9a\u4e49\u63a5\u53e3\u7279\u6027</li> <li>\u529f\u80fd\u4e8c\uff1a\u5b9a\u4e49\u4f20\u8f93\u6a21\u5f0f\uff08\u5355\u5de5\u3001\u534a\u53cc\u5de5\u3001\u53cc\u5de5\uff09</li> <li>\u529f\u80fd\u4e09\uff1a\u5b9a\u4e49\u4f20\u8f93\u901f\u7387</li> <li>\u529f\u80fd\u56db\uff1a\u6bd4\u7279\u540c\u6b65</li> <li>\u529f\u80fd\u4e94\uff1a\u6bd4\u7279\u7f16\u7801 <p>\u900f\u660e\u4f20\u8f93\uff1a\u6307\u4e0d\u7ba1\u6240\u4f20\u6570\u636e\u662f\u4ec0\u4e48\u6837\u7684\u6bd4\u7279\u7ec4\u5408\uff0c\u90fd\u5e94\u5f53\u80fd\u591f\u5728\u94fe\u8def\u4e0a\u4f20\u9001\u3002</p> </li> </ul> </li> </ul>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/#7-tcpip","title":"(7) TCP/IP \u6a21\u578b","text":"<p>OSI\u53c2\u8003\u6a21\u578b\u4e0e TCP/IP \u53c2\u8003\u6a21\u578b\u7684\u76f8\u540c\u70b9  - \u90fd\u5206\u5c42  - \u57fa\u4e8e\u72ec\u7acb\u7684\u534f\u8bae\u6808\u6982\u5ff5  - \u53ef\u4ee5\u5b9e\u73b0\u5f02\u6784\u7f51\u7edc\u7cfb\u7edf\u7684\u4e92\u8054\u4e92\u901a</p> <p>OSI\u53c2\u8003\u6a21\u578b\u4e0e TCP/IP \u53c2\u8003\u6a21\u578b\u7684\u4e0d\u540c\u70b9 - OSI \u5b9a\u4e49\u4e09\u70b9\uff1a\u670d\u52a1\u3001\u534f\u8bae\u3001\u63a5\u53e3 - OSI \u5148\u51fa\u73b0\uff0c\u53c2\u8003\u6a21\u578b\u5148\u4e8e\u534f\u8bae\u53d1\u660e\uff0c\u4e0d\u504f\u5411\u7279\u5b9a\u534f\u8bae - TCP/IP \u8bbe\u8ba1\u4e4b\u521d\u5c31\u8003\u8651\u5230\u5f02\u6784\u7f51\u7edc\u4e92\u8054\u95ee\u9898\uff0c\u5c06 IP \u4f5c\u4e3a\u91cd\u8981\u5c42\u6b21  - \u5728\u7f51\u7edc\u5c42\u4e0e\u4f20\u8f93\u5c42\u7684\u533a\u522b\uff1a</p>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%B8%80%E7%AB%A0%20%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84/#8","title":"(8) \u4e94\u5c42\u53c2\u8003\u6a21\u578b","text":"<p>\u7efc\u5408\u4e86 OSI \u548c TCP/IP \u7684\u4f18\u70b9</p>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/","title":"\u7b2c\u4e8c\u7ae0 \u7269\u7406\u5c42","text":""},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#1","title":"(1) \u7269\u7406\u5c42\u7684\u57fa\u672c\u6982\u5ff5","text":"<p>\u7269\u7406\u5c42\u89e3\u51b3\u5982\u4f55\u5728\u94fe\u63a5\u5404\u79cd\u8ba1\u7b97\u673a\u7684\u4f20\u8f93\u5a92\u4f53\u4e0a\u4f20\u8f93\u6570\u636e\u6bd4\u7279\u6d41\uff0c\u800c\u4e0d\u662f\u6307\u5177\u4f53\u7684\u4f20\u8f93\u5a92\u4f53\u3002</p> <p>\u7269\u7406\u5c42\u7684\u4e3b\u8981\u4efb\u52a1\uff1a\u786e\u5b9a\u4f20\u8f93\u5a92\u4f53\u63a5\u53e3\u6709\u5173\u7684\u4e00\u4e9b\u7279\u6027\uff0c\u5373\u5b9a\u4e49\u6807\u51c6\u3002</p> <p>\u7269\u7406\u5c42\u63a5\u53e3\u7279\u6027</p> <ol> <li>\u673a\u68b0\u7279\u6027\uff1a\u5b9a\u4e49\u7269\u7406\u8fde\u63a5\u7684\u7279\u6027\uff0c\u89c4\u5b9a\u7269\u7406\u94fe\u63a5\u662f\u6240\u91c7\u7528\u7684\u89c4\u683c\u3001\u63a5\u53e3\u5f62\u72b6\u3001\u5f15\u7ebf\u6570\u76ee\u3001\u5f15\u811a\u6570\u76ee\u548c\u6392\u5217\u60c5\u51b5\u3002</li> <li>\u7535\u6c14\u7279\u6027\uff1a\u89c4\u5b9a\u4f20\u8f93\u4e8c\u8fdb\u5236\u4f4d\u65f6\uff0c\u7ebf\u8def\u4e0a\u4fe1\u53f7\u7684\u7535\u538b\u8303\u56f4\u3001\u963b\u6297\u5339\u914d\u3001\u4f20\u8f93\u901f\u7387\u548c\u8ddd\u79bb\u9650\u5236\u7b49\u3002</li> <li>\u529f\u80fd\u7279\u6027\uff1a\u6307\u660e\u67d0\u6761\u7ebf\u4e0a\u51fa\u73b0\u7684\u67d0\u4e00\u7535\u5e73\u8868\u793a\u4f55\u79cd\u610f\u4e49\uff0c\u63a5\u53e3\u90e8\u4ef6\u7684\u4fe1\u53f7\u663e\u5f97\u7528\u9014\u3002</li> <li>\u89c4\u7a0b\u7279\u6027\uff08\u8fc7\u7a0b\u7279\u6027\uff09\uff1a\u5b9a\u4e49\u5404\u6761\u7269\u7406\u7ebf\u8def\u7684\u5de5\u4f5c\u89c4\u7a0b\u548c\u65f6\u5e8f\u5173\u7cfb\u3002</li> </ol>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#2","title":"(2) \u6570\u636e\u901a\u4fe1","text":"<p>\u901a\u4fe1\u7684\u76ee\u7684\u662f\u4f20\u9001\u6d88\u606f\u3002</p>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#21","title":"2.1 \u6570\u636e\u901a\u4fe1\u76f8\u5173\u57fa\u672c\u672f\u8bed","text":"<ul> <li>\u6570\u636e data\uff1a\u4f20\u9001\u4fe1\u606f\u7684\u5b9e\u4f53\uff0c\u901a\u5e38\u662f\u6709\u610f\u4e49\u7684\u7b26\u53f7\u5e8f\u5217\u3002</li> <li>\u4fe1\u53f7\uff1a\u6570\u636e\u7535\u6c14/\u7535\u78c1\u7684\u8868\u73b0\uff0c\u662f\u6570\u636e\u5728\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u7684\u5b58\u5728\u5f62\u5f0f\u3002<ul> <li>\u6570\u5b57\u4fe1\u53f7/\u79bb\u6563\u4fe1\u53f7</li> <li>\u6a21\u62df\u4fe1\u53f7/\u8fde\u7eed\u4fe1\u53f7</li> </ul> </li> <li>\u4fe1\u6e90\uff1a\u4ea7\u751f\u548c\u53d1\u9001\u6570\u636e\u7684\u6e90\u5934</li> <li>\u4fe1\u5bbf\uff1a\u63a5\u53d7\u6570\u636e\u7684\u7ec8\u70b9</li> <li>\u4fe1\u9053\uff1a\u4fe1\u53f7\u7684\u4f20\u8f93\u5a92\u4ecb\u3002\u4e00\u822c\u7528\u6765\u8868\u793a\u5411\u67d0\u4e00\u4e2a\u65b9\u5411\u4f20\u9001\u4fe1\u606f\u7684\u4ecb\u8d28\uff0c\u56e0\u6b64\u4e00\u6761\u901a\u4fe1\u7ebf\u8def\u5f80\u5f80\u5305\u542b\u4e00\u6761\u53d1\u9001\u4fe1\u9053\u548c\u4e00\u6761\u63a5\u53d7\u4fe1\u9053\u3002<ul> <li>\u6309\u4f20\u8f93\u4fe1\u53f7\u5206\u7c7b\uff1a\u6a21\u62df\u4fe1\u9053\u3001\u6570\u5b57\u4fe1\u9053</li> <li>\u6309\u4f20\u8f93\u4ecb\u8d28\u5206\u7c7b\uff1a\u65e0\u7ebf\u4fe1\u9053\u3001\u6709\u7ebf\u4fe1\u9053</li> </ul> </li> </ul>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#22","title":"2.2 \u4e09\u79cd\u901a\u4fe1\u65b9\u5f0f","text":"<p>\u4ece\u901a\u4fe1\u53cc\u65b9\u4fe1\u606f\u7684\u4ea4\u4e92\u65b9\u5f0f\u770b\uff0c\u53ef\u4ee5\u6709\u4e09\u79cd\u57fa\u672c\u65b9\u5f0f\uff1a </p> <ul> <li>\u5355\u5de5\u901a\u4fe1\uff1a\u53ea\u6709\u4e00\u4e2a\u65b9\u5411\u7684\u901a\u4fe1\u800c\u6ca1\u6709\u53cd\u65b9\u5411\u7684\u4ea4\u4e92\uff0c\u4ec5\u9700\u8981\u4e00\u6761\u4fe1\u9053\u3002eg\uff1a\u5e7f\u64ad\u3002</li> <li>\u534a\u53cc\u5de5\u901a\u4fe1/\u53cc\u5411\u4ea4\u66ff\u901a\u4fe1\uff1a\u901a\u4fe1\u7684\u53cc\u65b9\u90fd\u53ef\u4ee5\u53d1\u9001\u6216\u8005\u63a5\u53d7\u4fe1\u606f\uff0c\u4f46\u4efb\u4f55\u4e00\u65b9\u90fd\u4e0d\u80fd\u540c\u65f6\u53d1\u9001\u548c\u63a5\u6536\uff0c\u9700\u8981\u4e24\u6761\u4fe1\u9053\u3002eg\uff1a\u5bf9\u8bb2\u673a\u3002</li> <li>\u5168\u53cc\u5de5\u901a\u4fe1/\u53cc\u5411\u540c\u65f6\u901a\u4fe1\uff1a\u901a\u4fe1\u53cc\u65b9\u90fd\u53ef\u4ee5\u540c\u4e8b\u53d1\u9001\u548c\u63a5\u53d7\u4fe1\u606f\uff0c\u9700\u8981\u4e24\u6761\u4fe1\u9053\u3002eg\uff1a\u6253\u7535\u8bdd\u3002</li> </ul>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#23","title":"2.3 \u6570\u636e\u4f20\u8f93\u65b9\u5f0f","text":"<ul> <li>\u4e32\u884c\u4f20\u8f93\uff1a\u5c06\u8868\u793a\u4e00\u4e2a\u5b57\u7b26\u7684 8 \u4f4d\u4e8c\u8fdb\u5236\u6570\u6309\u7531\u4f4e\u4f4d\u5230\u9ad8\u4f4d\u7684\u987a\u5e8f\u4e00\u6b21\u53d1\u9001\u3002\u901f\u5ea6\u6162\uff0c\u8d39\u7528\u4f4e\uff0c\u9002\u5408\u8ddd\u79bb\u8fdc\u3002</li> <li>\u5e76\u884c\u4f20\u8f93\uff1a\u5c06\u8868\u793a\u4e00\u4e2a\u5b57\u4ed8\u7684 8 \u4f4d\u4e8c\u8fdb\u5236\u6570\u540c\u65f6\u901a\u8fc7 8 \u6761\u4fe1\u9053\u53d1\u9001\u3002\u901f\u5ea6\u5feb\uff0c\u8d39\u7528\u9ad8\uff0c\u9002\u5408\u8fd1\u8ddd\u79bb\u3002\u8ba1\u7b97\u673a\u5185\u90e8\u4f7f\u7528\u5e76\u884c\u4f20\u8f93\u3002</li> <li>\u540c\u6b65\u4f20\u8f93\uff1a\u5728\u540c\u6b65\u4f20\u8f93\u7684\u6a21\u5f0f\u4e0b\uff0c\u6570\u636e\u7684\u4f20\u9001\u662f\u4ee5\u4e00\u4e2a\u6570\u636e\u533a\u5757\u4e3a\u5355\u4f4d\uff0c\u56e0\u6b64\u540c\u6b65\u4f20\u8f93\u53c8\u79f0\u4e3a\u533a\u5757\u4f20\u8f93\u3002\u5728\u4f20\u9001\u6570\u636e\u65f6\uff0c\u9700\u8981\u5148\u9001\u51fa 1 \u4e2a\u6216\u8005\u591a\u4e2a\u540c\u6b65\u5b57\u7b26 SYN\uff0c\u518d\u9001\u51fa\u6574\u6279\u7684\u6570\u636e\u3002</li> </ul> <ul> <li>\u5f02\u6b65\u4f20\u8f93\uff1a\u5f02\u6b65\u4f20\u8f93\u5c06\u6bd4\u7279\u5206\u6210\u5c0f\u7ec4\u8fdb\u884c\u4f20\u9001\uff0c\u5c0f\u7ec4\u53ef\u4ee5\u662f 8 \u4f4d\u7684 1 \u4e2a\u5b57\u7b26\u6216\u8005\u66f4\u957f\u3002\u53d1\u9001\u65b9\u53ef\u4ee5\u5728\u4efb\u4f55\u65f6\u53ef\u53d1\u9001\u8fd9\u4e9b\u6bd4\u7279\u7ec4\uff0c\u800c\u63a5\u6536\u65b9\u4e0d\u77e5\u9053\u4ed6\u4eec\u4f1a\u5728\u4ec0\u4e48\u65f6\u5019\u5230\u8fbe\u3002\u4f20\u9001\u6570\u636e\u65f6\uff0c\u52a0\u4e00\u4e2a\u5b57\u7b26\u8d77\u59cb\u4f4d\u548c\u4e00\u4e2a\u5b57\u7b26\u7ec8\u6b62\u4f4d\u3002 </li> </ul>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#24","title":"2.4 \u7801\u5143","text":"<p>\u5b9a\u4e49\uff1a\u6307\u7528\u4e00\u4e2a\u56fa\u5b9a\u957f\u5ea6\u7684\u4fe1\u53f7\u6ce2\u5f62\uff08\u6570\u5b57\u8109\u51b2\uff09\uff0c\u4ee3\u8868\u4e0d\u540c\u79bb\u6563\u6570\u503c\u7684\u57fa\u672c\u6ce2\u5f62\uff0c\u662f\u6570\u5b57\u901a\u4fe1\u4e2d\u6570\u5b57\u4fe1\u53f7\u7684\u8ba1\u91cf\u5355\u4f4d\uff0c\u8fd9\u4e2a\u65f6\u957f\u5185\u7684\u4fe1\u53f7\u6210\u4e3a k \u8fdb\u5236\u7801\u5143\uff0c\u800c\u8be5\u65f6\u957f\u6210\u4e3a\u7801\u5143\u5bbd\u5ea6\u3002\u5f53\u7801\u5143\u7684\u79bb\u6563\u72b6\u6001\u6709 M \u4e2a\u65f6\uff08M \u5927\u4e8e 2\uff09\uff0c\u6b64\u65f6\u7801\u5143\u4e3a M \u8fdb\u5236\u7801\u5143\u3002</p> <p>1 \u7801\u5143\u53ef\u4ee5\u643a\u5e26\u591a\u4e2a\u6bd4\u7279\u7684\u4fe1\u606f\u91cf\u3002</p> <p>\u4e8c\u8fdb\u5236\u7f16\u7801\u65f6\uff0c\u5b58\u5728 01\uff08\u9ad8\u7535\u5e73\u4e0e\u4f4e\u7535\u5e73\uff09\u4e24\u79cd\u4fe1\u53f7\uff0c\u6b64\u65f6\u5c31\u5bf9\u5e94\u7740\u4e24\u79cd\u4e0d\u540c\u7684\u79bb\u6563\u72b6\u6001\uff0c\u9700\u8981 1bit \u6765\u8868\u793a\u3002</p> <p>\u56db\u8fdb\u5236\u7f16\u7801\u65f6\uff0c\u5b58\u5728 4 \u79cd\u4fe1\u53f7\uff0c\u6b64\u65f6\u5c31\u5bf9\u5e94\u7740\u56db\u79cd\u4e0d\u540c\u7684\u79bb\u6563\u72b6\u6001\uff0c\u9700\u8981 2bit \u6765\u8868\u793a\u3002  </p> <p>\u5341\u516d\u8fdb\u5236\u7f16\u7801\u65f6\uff0c\u5b58\u5728 16 \u79cd\u4fe1\u53f7\uff0c\u6b64\u65f6\u5c31\u5bf9\u5e94\u7740 16 \u79cd\u4e0d\u540c\u7684\u79bb\u6563\u72b6\u6001\uff0c\u9700\u8981 4bit \u6765\u8868\u793a\u3002</p>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#25","title":"2.5 \u6570\u5b57\u901a\u4fe1\u7cfb\u7edf\u6570\u636e\u4f20\u8f93\u901f\u7387\u7684\u4e24\u79cd\u8868\u793a\u65b9\u6cd5","text":"<p>\u901f\u7387\u4e5f\u53eb\u6570\u636e\u7387\uff0c\u662f\u6307\u6570\u636e\u7684\u4f20\u8f93\u901f\u7387\uff0c\u8868\u793a\u5355\u4f4d\u65f6\u95f4\u5185\u4f20\u8f93\u7684\u6570\u636e\u91cf\u3002\u53ef\u4ee5\u7528\u7801\u5143\u4f20\u8f93\u901f\u7387\u548c\u4fe1\u606f\u4f20\u8f93\u901f\u7387\u6765\u8868\u793a\u3002</p> <p>\u7801\u5143\u4f20\u8f93\u901f\u7387</p> <p>\u522b\u540d\u7801\u5143\u901f\u7387\u3001\u6ce2\u5f62\u901f\u7387\u3001\u8c03\u5236\u901f\u7387\u3001\u7b26\u53f7\u901f\u7387\u7b49\uff0c\u5b83\u8868\u793a\u5355\u4f4d\u65f6\u95f4\u5185\u6570\u5b57\u901a\u4fe1\u7cfb\u7edf\u6240\u4f20\u8f93\u7684\u7801\u5143\u4e2a\u6570\uff08\u4e5f\u53ef\u79f0\u4e3a\u8109\u51b2\u4e2a\u6570\u6216\u8005\u4fe1\u53f7\u53d8\u5316\u7684\u6b21\u6570\uff09\uff0c\u5355\u4f4d\u662f\u6ce2\u7279\uff08Baud\uff0c\u7b80\u5199 B\uff09\u30021B \u8868\u793a\u6570\u5b57\u901a\u4fe1\u7cfb\u7edf\u6bcf\u79d2\u4f20\u8f93\u4e00\u4e2a\u7801\u5143\u3002</p> <p>\u6570\u5b57\u4fe1\u53f7\u6709\u591a\u8fdb\u5236\u548c\u4e8c\u8fdb\u5236\u4e4b\u5206\uff0c\u4f46\u662f\u7801\u5143\u901f\u7387\u4e0e\u8fdb\u5236\u6570\u65e0\u5173\uff0c\u53ea\u4e0e\u7801\u5143\u957f\u5ea6 T \u6709\u5173\uff0c\u4e14\u4e8c\u8005\u4e92\u4e3a\u5012\u6570\uff1a </p> \\[R_B = \\frac{1}{T}(B)\\] <p>\u4fe1\u606f\u4f20\u8f93\u901f\u7387</p> <p>\u522b\u540d\u4fe1\u606f\u901f\u7387\u3001\u6bd4\u7279\u7387\u7b49\uff0c\u8868\u793a\u5355\u4f4d\u65f6\u95f4\u5185\u6570\u5b57\u901a\u4fe1\u7cfb\u7edf\u4f20\u8f93\u7684\u4e8c\u8fdb\u5236\u7801\u5143\u4e2a\u6570 \uff08\u5373\u6bd4\u7279\u6570\uff09\uff0c\u5355\u4f4d\u4f7f\u6bd4\u7279/\u79d2\uff08b/s\uff09\u30021b/s \u8868\u793a 1 \u79d2\u4f20\u8f93\u591a\u5c11\u4e2a\u6bd4\u7279\u3002</p> <p>\u5173\u7cfb</p> <p>\u82e5\u4e00\u4e2a\u7801\u5143\u643a\u5e26 nbit \u7684\u4fe1\u606f\u91cf\uff0c\u5219 M Baud \u7684\u7801\u5143\u4f20\u8f93\u901f\u7387\u6240\u5bf9\u5e94\u7684\u4fe1\u606f\u4f20\u8f93\u901f\u7387\u4e3a Mxn bit/s\u3002</p> <p>\u7ecf\u5178\u4f8b\u9898 1\uff1a</p> <p></p> <p>\u7ecf\u5178\u4f8b\u9898 2\uff1a</p> <p></p> \\[4800 = 1600 \\times log_2^8\\] <p>\u7ecf\u5178\u4f8b\u9898 3\uff1a</p> <p></p> \\[1200 = 2400 \\div log_2^4\\]"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#26","title":"2.6 \u5e26\u5bbd","text":"<ul> <li>\u6a21\u62df\u4fe1\u53f7\u4e2d\uff1a\u6700\u9ad8\u9891\u7387\u548c\u6700\u4f4e\u9891\u7387\u95f4\u7684\u5dee\u503c\u5c31\u4ee3\u8868\u4e86\u7cfb\u7edf\u7684\u901a\u9891\u5e26\u5bbd\uff0c\u5355\u4f4d\u8d6b\u5179(Hz)\u3002</li> <li>\u6570\u5b57\u8bbe\u5907\u4e2d\uff1a\u8868\u662f\u5728\u5355\u4f4d\u65f6\u95f4\u5185\u4ece\u7f51\u7edc\u4e2d\u7684\u67d0\u4e00\u70b9\u5230\u53e6\u4e00\u70b9\u6240\u80fd\u901a\u8fc7\u7684\u201c\u6700\u9ad8\u6570\u636e\u7387\u201d/\u5355\u4f4d\u65f6\u95f4\u5185\u901a\u8fc7\u94fe\u8def\u7684\u6570\u91cf\uff0c\u5e38\u7528\u6765\u8868\u793a\u7f51\u7edc\u4e2d\u7684\u901a\u4fe1\u7ebf\u8def\u6240\u80fd\u4f20\u8f93\u6570\u636e\u7684\u80fd\u529b\uff0c\u5355\u4f4d\u6bd4\u7279\u6bcf\u79d2(bps\uff0cb/s)\u3002</li> </ul>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#3","title":"(3) \u5948\u6c0f\u51c6\u5219\u548c\u9999\u519c\u5b9a\u7406","text":""},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#31","title":"3.1 \u5931\u771f","text":"<p>\u5f71\u54cd\u5931\u771f\u7a0b\u5ea6\u7684\u56e0\u7d20\uff1a\u7801\u5143\u4f20\u8f93\u901f\u7387\u3001\u4fe1\u53f7\u4f20\u8f93\u8ddd\u79bb\u3001\u566a\u58f0\u5e72\u6270\u3001\u4f20\u8f93\u5a92\u4f53\u8d28\u91cf</p> <p>\u4e00\u79cd\u91cd\u8981\u5931\u771f\u73b0\u8c61--\u7801\u95f4\u4e32\u6270</p> <p>\u7801\u95f4\u4e32\u6270\uff1a\u63a5\u6536\u7aef\u6536\u5230\u7684\u4fe1\u53f7\u6ce2\u5f62\u5931\u53bb\u4e86\u7801\u5143\u4e4b\u95f4\u6e05\u6670\u754c\u9650\u7684\u73b0\u8c61\u3002\u5982\u4e0b\u56fe\u4e2d\u7b2c\u56db\u6839\u7535\u8bdd\u7ebf\u4e0a\u7684\u6ce2\u5f62\u9707\u52a8\u592a\u5feb\uff0c\u5bfc\u81f4\u63a5\u6536\u65b9\u65e0\u6cd5\u8bc6\u522b\u3002</p> <p></p>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#32","title":"3.2 \u5948\u6c0f\u51c6\u5219\uff08\u5948\u594e\u65af\u7279\u5b9a\u7406\uff09","text":"<p>\u5728\u5948\u6c0f\u51c6\u5219\u548c\u9999\u519c\u5b9a\u7406\u4e2d\u7684\u5e26\u5bbd\u5355\u4f4d\u662f\u8d6b\u5179 Hz\uff01</p> <p>\u5948\u6c0f\u51c6\u5219\uff1a\u5728\u7406\u60f3\u4f4e\u901a\uff08\u65e0\u566a\u58f0\u3001\u5e26\u5bbd\u53d7\u9650\uff09\u6761\u4ef6\u4e0b\uff0c\u4e3a\u4e86\u907f\u514d\u7801\u95f4\u4e32\u6270\uff0c\u6781\u9650\u7801\u5143\u4f20\u8f93\u901f\u7387\u4e3a 2W Baud\uff0cW \u8868\u662f\u5e26\u5bbd\uff0c\u5355\u4f4d\u4e3a Hz\u3002</p> <p>\u7406\u60f3\u4f4e\u901a\u4fe1\u9053\u4e0b\u7684\u6781\u9650\u6570\u636e\u4f20\u8f93\u901f\u7387\u4e3a \\(= 2W log_2^V(b/s)\\)\uff0c\u5176\u4e2d v \u4ee3\u8868\u6709\u51e0\u79cd\u7801\u5143/\u7801\u5143\u7684\u79bb\u6563\u7535\u5e73\u6570\u76ee\u3002</p> <p>\u6ce8\u610f\uff1a</p> <ol> <li>\u5728\u4efb\u4f55\u4fe1\u9053\u4e2d\uff0c\u7801\u5143\u4f20\u8f93\u7684\u901f\u7387\u662f\u6709\u4e0a\u9650\u7684\u3002\u82e5\u4f20\u8f93\u901f\u7387\u8d85\u8fc7\u6b64\u4e0a\u7ebf\uff0c\u5c31\u51fa\u51fa\u73b0\u4e25\u91cd\u7684\u7801\u95f4\u4e32\u6270\u95ee\u9898\uff0c\u4f7f\u63a5\u6536\u7aef\u5bf9\u7801\u5143\u7684\u5b8c\u5168\u6b63\u786e\u8bc6\u522b\u6210\u4e3a\u4e0d\u53ef\u80fd\u3002</li> <li>\u4fe1\u9053\u7684\u9891\u5e26\u8d8a\u5bbd\uff08\u5373\u80fd\u901a\u8fc7\u7684\u4fe1\u53f7\u9ad8\u9891\u5206\u91cf\u8d8a\u591a\uff09\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u66f4\u9ad8\u7684\u901f\u7387\u8fdb\u884c\u7801\u5143\u7684\u6709\u6548\u4f20\u8f93\u3002</li> <li>\u5948\u6c0f\u51c6\u5219\u7ed9\u51fa\u4e86\u7801\u5143\u4f20\u8f93\u901f\u7387\u7684\u9650\u5236\uff0c\u4f46\u662f\u5e76\u6ca1\u6709\u5bf9\u4fe1\u606f\u4f20\u8f93\u901f\u7387\u7ed9\u51fa\u9650\u5236\u3002</li> <li>\u7531\u4e8e\u7801\u5143\u7684\u4f20\u8f93\u901f\u7387\u53d7\u5230\u5948\u6c0f\u51c6\u5219\u7684\u5236\u7ea6\uff0c\u6240\u4ee5\u8981\u63d0\u9ad8\u6570\u636e\u7684\u4f20\u8f93\u901f\u7387\uff0c\u5c31\u5fc5\u987b\u8bbe\u6cd5\u5e08\u6bcf\u4e2a\u7801\u5143\u80fd\u643a\u5e26\u66f4\u591a\u4e2a\u6bd4\u7279\u7684\u4fe1\u606f\u91cf\uff0c\u8fd9\u5c31\u9700\u8981\u91c7\u7528\u591a\u5143\u5236\u7684\u8c03\u5236\u65b9\u6cd5\u3002</li> </ol>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#33","title":"3.3 \u9999\u519c\u5b9a\u7406","text":"<p>\u566a\u58f0\u5b58\u5728\u4e8e\u6240\u6709\u7684\u7535\u5b50\u8bbe\u5907\u548c\u901a\u4fe1\u4fe1\u9053\u4e2d\u3002\u7531\u4e8e\u566a\u58f0\u968f\u673a\u4ea7\u751f\uff0c\u5b83\u7684\u77ac\u65f6\u503c\u6709\u65f6\u4f1a\u5f88\u5927\uff0c\u56e0\u6b64\u566a\u58f0\u4f1a\u4f7f\u63a5\u6536\u7aef\u5bf9\u7801\u5143\u7684\u5224\u65ad\u4ea7\u751f\u9519\u8bef\u3002\u4f46\u662f\u566a\u58f0\u7684\u5f71\u54cd\u662f\u76f8\u5bf9\u7684\uff0c\u82e5\u4fe1\u53f7\u5f3a\uff0c\u90a3\u4e48\u566a\u58f0\u5f71\u54cd\u76f8\u5bf9\u8f83\u5c0f\u3002\u56e0\u6b64\uff0c\u4fe1\u566a\u6bd4\u5c31\u5f88\u91cd\u8981\u3002</p> <p>\u4fe1\u566a\u6bd4 = \u4fe1\u53f7\u7684\u5e73\u5747\u529f\u7387 / \u566a\u58f0\u7684\u5e73\u5747\u529f\u7387\uff0c\u8bb0\u4e3a \\(S/N\\)\uff0c\u5e76\u7528\u5206\u8d1d (db) \u4f5c\u4e3a\u5ea6\u91cf\u5355\u4f4d\uff0c\u4e8c\u8005\u8f6c\u6362\u5173\u7cfb\u4e3a\uff1a\u4fe1\u566a\u6bd4(db)\\(=10log_{10}^{(S/N)}\\)\u3002</p> <p>\u9999\u519c\u5b9a\u7406\uff1a \u5728\u5e26\u5bbd\u53d7\u9650\u4e14\u6709\u566a\u58f0\u7684\u4fe1\u9053\u4e2d\uff0c\u4e3a\u4e86\u4e0d\u4ea7\u751f\u8bef\u5dee\uff0c\u4fe1\u606f\u7684\u6570\u636e\u4f20\u8f93\u901f\u7387\u6709\u4e0a\u9650\u503c\u3002</p> <p>\u4fe1\u9053\u7684\u6781\u9650\u6570\u636e\u4f20\u8f93\u901f\u7387 = \\(W log_2^{(1 + S/N)}\\ \\ (b/s)\\)\uff0c\u5176\u4e2d W \u8868\u793a\u5e26\u5bbd\u3002</p> <p>\u6ce8\u610f\uff1a </p> <ol> <li>\u4fe1\u9053\u7684\u5e26\u5bbd\u6216\u8005\u4fe1\u9053\u4e2d\u7684\u4fe1\u566a\u6bd4\u8d8a\u5927\uff0c\u5219\u4fe1\u606f\u7684\u6781\u9650\u4f20\u8f93\u901f\u7387\u5c31\u8d8a\u9ad8\u3002</li> <li>\u5bf9\u4e00\u5b9a\u5f97\u4f20\u8f93\u5e26\u5bbd\u548c\u4e00\u5b9a\u7684\u4fe1\u566a\u6bd4\uff0c\u4fe1\u606f\u7684\u4f20\u8f93\u901f\u7387\u7684\u4e0a\u9650\u5c31\u786e\u5b9a\u4e86\u3002</li> <li>\u53ea\u8981\u4fe1\u606f\u7684\u4f20\u8f93\u901f\u7387\u4f4e\u4e8e\u4fe1\u9053\u7684\u6781\u9650\u4f20\u8f93\u901f\u7387\uff0c\u5c31\u4e00\u5b9a\u80fd\u627e\u5230\u67d0\u79cd\u65b9\u6cd5\u6765\u5b9e\u73b0\u8bef\u5dee\u9519\u7684\u4f20\u8f93\u3002</li> <li>\u9999\u519c\u5b9a\u7406\u5f97\u51fa\u7684\u4e3a\u6781\u9650\u4fe1\u606f\u4f20\u8f93\u901f\u7387\uff0c\u5b9e\u9645\u4fe1\u9053\u80fd\u8fbe\u5230\u7684\u4f20\u8f93\u901f\u7387\u8981\u88ab\u5b83\u4f4e\u4e0d\u5c11\u3002</li> <li>\u4ece\u9999\u519c\u5b9a\u7406\u53ef\u4ee5\u5f97\u51fa\uff0c\u82e5\u4fe1\u9053\u7684\u5e26\u5bbd W \u6216\u8005\u4fe1\u566a\u6bd4 S/N \u6ca1\u6709\u4e0a\u9650\uff08\u4e0d\u53ef\u80fd\uff09\uff0c\u90a3\u4e48\u4fe1\u9053\u7684\u6781\u9650\u4fe1\u606f\u4f20\u8f93\u901f\u7387\u4e5f\u5c31\u6ca1\u6709\u4e0a\u9650\u3002</li> </ol>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#34","title":"3.4 \u5948\u6c0f\u51c6\u5219\u548c\u9999\u519c\u5b9a\u7406\u7684\u8054\u7cfb","text":""},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#4","title":"(4) \u7f16\u7801\u4e0e\u8c03\u5236","text":""},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#41","title":"4.1 \u57fa\u5e26\u4fe1\u53f7\u4e0e\u5bbd\u5e26\u4fe1\u53f7","text":"<p>\u4fe1\u9053\uff1a\u4fe1\u53f7\u4f20\u8f93\u7684\u5a92\u4ecb\u3002\u4e00\u822c\u7528\u6765\u8868\u793a\u5411\u67d0\u4e00\u4e2a\u65b9\u5411\u4f20\u9001\u4fe1\u606f\u7684\u4ecb\u8d28\uff0c\u56e0\u6b64\u4e00\u6761\u901a\u4fe1\u7ebf\u8def\u5f80\u5f80\u5305\u542b\u4e00\u6761\u53d1\u9001\u4fe1\u9053\u548c\u4e00\u6761\u63a5\u53d7\u4fe1\u9053\u3002</p> <p>\u4fe1\u9053\u4e0a\u4f20\u9001\u7684\u4fe1\u53f7\uff1a</p> <ul> <li>\u57fa\u5e26\u4fe1\u53f7\uff1a\u5c06\u6570\u5b57\u4fe1\u53f7 1 \u548c 0 \u76f4\u63a5\u7528\u4e24\u79cd\u4e0d\u540c\u7684\u7535\u538b\u8868\u793a\uff0c\u518d\u9001\u5230\u6570\u5b57\u4fe1\u9053\u4e0a\u53bb\u4f20\u8f93\uff08\u57fa\u5e26\u4f20\u8f93\uff09\u3002\u9002\u5408\u8ddd\u79bb\u8f83\u8fd1\u7684\u4f20\u8f93\u3002</li> <li>\u5bbd\u5e26\u4fe1\u53f7\uff1a\u5c06\u57fa\u5e26\u4fe1\u53f7\u8fdb\u884c\u8c03\u5236\u540e\u5f62\u6210\u7684\u9891\u5206\u590d\u7528\u6a21\u62df\u4fe1\u53f7\uff0c\u518d\u4f20\u9001\u5230\u6a21\u62df\u4fe1\u9053\u4e0a\u53bb\u4f20\u8f93\uff08\u5bbd\u5e26\u4f20\u8f93\uff09\u3002\u628a\u57fa\u5e26\u4fe1\u53f7\u7ecf\u8fc7\u8f7d\u6ce2\u8c03\u5236\u540e\uff0c\u628a\u4fe1\u53f7\u7684\u9891\u7387\u8303\u56f4\u642c\u79fb\u5230\u8f83\u9ad8\u7684\u9891\u6bb5\u4ee5\u4fbf\u5728\u4fe1\u9053\u4e2d\u4f20\u8f93\uff08\u5373\u4ec5\u5728\u4e00\u6bb5\u9891\u7387\u8303\u56f4\u5185\u80fd\u591f\u901a\u8fc7\u4fe1\u9053\uff09\u3002\u9002\u5408\u8ddd\u79bb\u8f83\u8fdc\u7684\u4f20\u8f93\u3002</li> </ul>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#42","title":"4.2 \u7f16\u7801\u4e0e\u8c03\u5236\u533a\u522b","text":""},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#43","title":"4.3 \u6570\u5b57\u6570\u636e\u7f16\u7801\u4e3a\u6570\u5b57\u4fe1\u53f7","text":"<p>\u975e\u5f52\u96f6\u7f16\u7801\uff1a\u7f16\u7801\u5bb9\u6613\u5b9e\u73b0\uff0c\u4f46\u662f\u6ca1\u6709\u68c0\u9519\u529f\u80fd\uff0c\u4e14\u65e0\u6cd5\u5224\u65ad\u4e00\u4e2a\u7801\u5143\u7684\u5f00\u59cb\u548c\u7ed3\u675f\uff0c\u4ee5\u81f3\u4e8e\u6536\u53d1\u53cc\u65b9\u96be\u4ee5\u4fdd\u6301\u540c\u6b65\u3002</p> <p>\u5f52\u96f6\u7f16\u7801\uff1a\u4fe1\u53f7\u7535\u5e73\u5728\u4e00\u4e2a\u7801\u5143\u4e4b\u5185\u90fd\u8981\u6062\u590d\u5230\u96f6\u7684\u8fd9\u79cd\u7f16\u7801\u65b9\u5f0f\u3002</p> <p>\u66fc\u5207\u65af\u7279\u7f16\u7801\uff1a\u5c06\u7801\u5143\u5206\u6210\u4e24\u4e2a\u76f8\u7b49\u7684\u95f4\u9694\uff0c\u524d\u4e00\u4e2a\u95f4\u9694\u4e3a\u4f4e\u7535\u5e73\u540e\u4e00\u4e2a\u4e3a\u9ad8\u7535\u5e73\u8868\u793a\u7801\u5143 1\uff1b\u7801\u5143 0 \u5219\u6b63\u597d\u76f8\u53cd\u3002\u4e5f\u53ef\u4ee5\u91c7\u7528\u76f8\u53cd\u7684\u89c4\u5b9a\u3002\u8be5\u7f16\u7801\u7684\u7279\u70b9\u662f\u5728\u6bcf\u4e00\u4e2a\u7801\u5143\u7684\u4e2d\u95f4\u51fa\u73b0\u7535\u5e73\u8df3\u53d8\uff0c\u4f4d\u4e2d\u95f4\u7684\u8df3\u53d8\u5373\u4f5c\u4e3a\u65f6\u949f\u4fe1\u53f7\uff08\u53ef\u7528\u4e8e\u540c\u6b65\uff09\uff0c\u53c8\u505a\u6570\u5b57\u4fe1\u53f7\uff0c\u4f46\u5b83\u6240\u5360\u7684\u9891\u5e26\u5bbd\u5ea6\u662f\u539f\u59cb\u7684\u57fa\u5e26\u5bbd\u5ea6\u7684\u4e24\u500d\u3002\u6bcf\u4e00\u4e2a\u7801\u5143\u90fd\u88ab\u8c03\u6210\u4e24\u4e2a\u7535\u5e73\uff0c\u6240\u4ee5\u6570\u636e\u4f20\u8f93\u901f\u7387\u53ea\u6709\u8c03\u5236\u901f\u7387\u7684 \u00bd\u3002</p> <p>\u5dee\u5206\u66fc\u5207\u65af\u7279\u7f16\u7801\uff08\u540c 0 \u5f02 1\uff09\uff1a\u5e38\u7528\u4e8e\u5c40\u57df\u7f51\u4f20\u8f93\uff0c\u5176\u89c4\u5219\u662f\uff1a\u82e5\u7801\u5143\u4e3a 1\uff0c\u5219\u524d\u534a\u4e2a\u7801\u5143\u7684\u7535\u5e73\u4e0e\u4e0a\u4e00\u4e2a\u7801\u5143\u7684\u540e\u534a\u4e2a\u7801\u5143\u7684\u7535\u5e73\u76f8\u540c\uff0c\u82e5\u4e3a 0\uff0c\u5219\u76f8\u53cd\u3002\u8be5\u7f16\u7801\u7684\u7279\u70b9\u4e3a\uff1a\u6bcf\u4e2a\u7801\u5143\u7684\u4e2d\u95f4\uff0c\u90fd\u6709\u4e00\u6b21\u7535\u5e73\u7684\u8df3\u8f6c\uff0c\u53ef\u4ee5\u5b9e\u73b0\u81ea\u540c\u6b65\uff0c\u4e14\u6297\u5e72\u6270\u6027\u5f3a\u4e0e\u66fc\u5207\u65af\u7279\u7f16\u7801\u3002</p> <p>4B/5B\u7f16\u7801\uff1a\u6bd4\u7279\u6d41\u4e2d\u63d2\u5165\u989d\u5916\u7684\u6bd4\u7279\u4ee5\u6253\u7834\u4e00\u8fde\u4e32\u7684 0 \u6216 1\uff0c\u5c31\u662f\u7528 5 \u4e2a\u6bd4\u7279\u6765\u7f16\u7801 4\u4e2a\u6bd4\u7279\u7684\u6570\u636e\uff0c\u4e4b\u540e\u5728\u4f20\u7ed9\u63a5\u6536\u65b9\uff0c\u56e0\u6b64\u79f0\u4e3a 4B/5B \u7f16\u7801\u3002\u7f16\u7801\u6548\u7387\u4e3a80%\u3002</p> <p></p> <p></p>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#44","title":"4.4 \u6570\u5b57\u6570\u636e\u8c03\u5236\u4e3a\u6a21\u62df\u4fe1\u53f7","text":""},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#45","title":"4.5 \u6a21\u62df\u6570\u636e\u7f16\u7801\u4e3a\u6570\u5b57\u4fe1\u53f7","text":""},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#46","title":"4.6 \u6a21\u62df\u6570\u636e\u8c03\u5236\u4e3a\u6a21\u62df\u4fe1\u53f7","text":""},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#5","title":"(5) \u6570\u636e\u4ea4\u6362\u65b9\u5f0f","text":""},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#51-circuit-exchanging","title":"5.1 \u7535\u8def\u4ea4\u6362\uff08Circuit Exchanging\uff09","text":"<p>\u539f\u7406\uff1a\u5728\u6570\u636e\u4f20\u8f93\u671f\u95f4\uff0c\u6e90\u8282\u70b9\u4e0e\u76ee\u7684\u8282\u70b9\u4e4b\u95f4\u6709\u4e00\u6761\u7531\u4e2d\u95f4\u8282\u70b9\u6784\u6210\u7684\u4e13\u7528\u7269\u7406\u8fde\u63a5\u7ebf\u8def\uff0c\u5728\u6570\u636e\u4f20\u8f93\u7ed3\u675f\u4e4b\u524d\uff0c\u8fd9\u6761\u7ebf\u8def\u4e00\u76f4\u4fdd\u6301\u3002</p> <p>\u8fc7\u7a0b\uff1a\u5efa\u7acb\u8fde\u63a5 \\(\\rightarrow\\) \u6570\u636e\u4f20\u8f93 \\(\\rightarrow\\) \u91ca\u653e\u8fde\u63a5</p> <p>\u7279\u70b9\uff1a\u72ec\u5360\u8d44\u6e90\uff0c\u7528\u6237\u59cb\u7ec8\u5360\u7528\u7aef\u5230\u7aef\u7684\u56fa\u5b9a\u4f20\u8f93\u5bbd\u5e26\u3002\u9002\u7528\u4e8e\u8fdc\u7a0b\u6279\u5904\u7406\u4fe1\u606f\u4f20\u8f93\u6216\u8005\u7cfb\u7edf\u95f4\u5b9e\u65f6\u6027\u8981\u6c42\u9ad8\u7684\u5927\u91cf\u6570\u636e\u4f20\u8f93\u7684\u60c5\u51b5\u3002</p> <p>\u4f18\u7f3a\u70b9\uff1a</p> <p></p>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#52-message-exchanging","title":"5.2 \u62a5\u6587\u4ea4\u6362\uff08Message Exchanging\uff09","text":"<p>\u62a5\u6587\uff08message\uff09\uff1a\u62a5\u6587\u662f\u7f51\u7edc\u4e2d\u4ea4\u6362\u4e0e\u4f20\u8f93\u7684\u6570\u636e\u5355\u5143\uff0c\u5373\u7ad9\u70b9\u4e00\u6b21\u6027\u8981\u53d1\u9001\u7684\u6570\u636e\u5757\u3002\u62a5\u6587\u5305\u542b\u4e86\u5b8c\u6574\u7684\u6570\u636e\u4fe1\u606f\uff0c\u5176\u957f\u77ed\u5f88\u4e0d\u4e00\u81f4\uff0c\u957f\u5ea6\u4e0d\u9650\u4e14\u53ef\u53d8\u3002</p> <p>\u62a5\u6587\u4ea4\u6362\u539f\u7406\uff1a\u65e0\u9700\u5728\u4e24\u4e2a\u7ad9\u70b9\u4e4b\u95f4\u5efa\u7acb\u4e00\u6761\u4e13\u7528\u901a\u8def\uff0c\u6570\u636e\u4f20\u8f93\u7684\u5355\u4f4d\u662f\u62a5\u6587\uff0c\u4f20\u9001\u8fc7\u7a0b\u91c7\u7528 \u5b58\u50a8\u8f6c\u53d1 \u65b9\u5f0f\u3002</p> <p>\u4f18\u7f3a\u70b9\uff1a</p> <p></p>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#53-packet-exchanging","title":"5.3 \u5206\u7ec4\u4ea4\u6362\uff08Packet Exchanging\uff09","text":"<p>\u5206\u7ec4\uff08packet\uff09\uff1a\u5927\u591a\u6570\u8ba1\u7b97\u673a\u7f51\u7edc\u90fd\u4e0d\u80fd\u8fde\u7eed\u7684\u4f20\u9001\u4efb\u610f\u957f\u5ea6\u7684\u6570\u636e\uff0c\u6240\u4ee5\u5b9e\u9645\u4e0a\u7f51\u7edc\u7cfb\u7edf\u628a\u6570\u636e\u5206\u5272\u6210\u5c0f\u5757\uff0c\u7136\u540e\u9010\u5757\u7684\u53d1\u9001\uff0c\u8fd9\u79cd\u5c0f\u5757\u5c31\u6210\u4e3a\u5206\u7ec4\u3002</p> <p>\u5206\u7ec4\u4ea4\u6362\u539f\u7406\uff1a\u5206\u7ec4\u4ea4\u6362\u4e0e\u62a5\u6587\u4ea4\u6362\u7684\u65b9\u5f0f\u57fa\u672c\u76f8\u540c\uff0c\u90fd\u91c7\u7528 \u5b58\u50a8\u8f6c\u53d1 \u7684\u65b9\u5f0f\uff0c\u5f62\u5f0f\u4e0a\u7684\u4e3b\u8981\u5dee\u522b\u5728\u4e8e\uff0c\u5206\u7ec4\u4ea4\u6362\u7f51\u4e2d\u8981\u9650\u5236\u6240\u4f20\u8f93\u7684\u6570\u636e\u5355\u4f4d\u7684\u957f\u5ea6\uff0c\u4e00\u822c\u4e3a 128B \u3002\u53d1\u9001\u8282\u70b9\u9996\u5148\u5bf9\u4ece\u7ec8\u7aef\u8bbe\u5907\u9001\u6765\u7684\u6570\u636e\u62a5\u6587\u8fdb\u884c\u63a5\u6536\u3001\u5b58\u50a8\uff0c\u800c\u540e\u5c06\u62a5\u6587\u5212\u5206\u6210\u4e00\u5b9a\u957f\u5ea6\u7684\u5206\u7ec4\uff0c\u5e76\u4ee5\u5206\u7ec4\u4e3a\u5355\u4f4d\u8fdb\u884c\u4f20\u8f93\u548c\u4ea4\u6362\u3002\u63a5\u6536\u8282\u70b9\u5956\u6536\u5230\u7684\u5206\u7ec4\u7956\u88c5\u6210\u4fe1\u606f\u6216\u8005\u62a5\u6587\u3002</p> <p>\u4f18\u7f3a\u70b9\uff1a</p> <p></p>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#531","title":"5.3.1 \u5206\u7ec4\u4ea4\u6362\u2014\u2014\u6570\u636e\u62a5\u65b9\u5f0f","text":"<p>\u7279\u70b9\uff1a</p> <p></p>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#532","title":"5.3.2 \u5206\u7ec4\u4ea4\u6362\u2014\u2014\u865a\u7535\u8def\u65b9\u5f0f","text":"<p>\u7279\u70b9\uff1a</p> <p></p>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#533","title":"5.3.3 \u6570\u636e\u62a5\u4e0e\u865a\u7535\u8def\u4e24\u79cd\u65b9\u5f0f\u7684\u533a\u522b","text":""},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#54","title":"5.4 \u6570\u636e\u4ea4\u6362\u65b9\u5f0f\u7684\u9009\u62e9","text":""},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#6","title":"(6) \u7269\u7406\u5c42\u4f20\u8f93\u4ecb\u8d28","text":"<p>\u4f20\u8f93\u4ecb\u8d28\uff1a\u4e5f\u79f0\u4e3a\u4f20\u8f93\u5a92\u4f53/\u4f20\u8f93\u5a92\u4ecb\uff0c\u662f\u6570\u636e\u4f20\u8f93\u7cfb\u7edf\u4e2d\u5728\u53d1\u9001\u8bbe\u5907\u548c\u63a5\u53d7\u8bbe\u5907\u4e4b\u95f4\u7684\u7269\u7406\u901a\u8def\u3002</p> <p>\u4f20\u8f93\u5a92\u4f53\u5e76\u4e0d\u662f\u7269\u7406\u5c42\u3002\u4f20\u8f93\u5a92\u4f53\u5728\u7269\u7406\u5c42\u4e0b\u9762\uff0c\u56e0\u4e3a\u7269\u7406\u5c42\u4f7f\u4f53\u7cfb\u7ed3\u6784\u7684\u7b2c\u4e00\u5c42\uff0c\u56e0\u6b64\u6709\u65f6\u79f0\u4f20\u8f93\u5a92\u4f53\u4e3a 0 \u5c42\u3002\u5728\u4f20\u8f93\u5a92\u4f53\u4e2d\u4f20\u8f93\u7684\u662f\u4fe1\u53f7\uff0c\u4f46\u662f\u4f20\u8f93\u5a92\u4f53\u5e76\u4e0d\u77e5\u9053\u6240\u4f20\u8f93\u7684\u4fe1\u53f7\u6240\u4ee3\u8868\u6240\u4ee3\u8868\u7684\u610f\u4e49\uff0c\u4f46\u662f\u7269\u7406\u5c42\u89c4\u5b9a\u4e86 \u7535\u6c14\u7279\u6027\uff0c\u56e0\u6b64\u80fd\u591f\u8bc6\u522b\u6240\u4f20\u9001\u7684\u6bd4\u7279\u6d41\u3002</p> <p>\u4f20\u8f93\u4ecb\u8d28\u5206\u7c7b\uff1a</p> <ul> <li>\u5bfc\u5411\u6027\u4f20\u8f93\u4ecb\u8d28\uff1a\u7535\u78c1\u6ce2\u88ab\u5bfc\u5411\u6cbf\u7740\u56fa\u4f53\u5a92\u4ecb\u4f20\u64ad\u3002</li> <li>\u975e\u5bfc\u5411\u6027\u4f20\u8f93\u4ecb\u8d28\uff1a\u81ea\u7531\u7a7a\u95f4\uff0c\u4ecb\u8d28\u53ef\u4ee5\u662f\u7a7a\u6c14\u3001\u771f\u7a7a\u3001\u6d77\u6c34\u7b49\u3002</li> </ul>"},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#61","title":"6.1 \u53cc\u7ede\u7ebf","text":""},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#62","title":"6.2 \u540c\u8f74\u7535\u7f06","text":""},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#63","title":"6.3 \u5149\u948e","text":""},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#64","title":"6.4 \u975e\u5bfc\u5411\u6027\u4f20\u8f93\u4ecb\u8d28","text":""},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#7","title":"(7) \u7269\u7406\u5c42\u8bbe\u5907","text":""},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#71","title":"7.1 \u4e2d\u7ee7\u5668","text":""},{"location":"blogs/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E4%B8%93%E4%B8%9A%E5%9F%BA%E7%A1%80%E8%AF%BE%E7%A8%8B/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%AC%AC%E4%BA%8C%E7%AB%A0%20%E7%89%A9%E7%90%86%E5%B1%82/#72","title":"7.2 \u96c6\u7ebf\u5668(\u591a\u53e3\u4e2d\u7ee7\u5668)","text":""}]}